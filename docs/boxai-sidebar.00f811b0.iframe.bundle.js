"use strict";(globalThis.webpackChunkbox_ui_elements=globalThis.webpackChunkbox_ui_elements||[]).push([[98155],{"./src/elements/common/content-answers/constants.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Bp:()=>SPREADSHEET_FILE_EXTENSIONS,Wj:()=>CODE_FILE_EXTENSIONS,aH:()=>DOCUMENT_FILE_EXTENSIONS,e0:()=>TEXT_FILE_EXTENSIONS,y1:()=>DOCUMENT_SUGGESTED_QUESTIONS});const CODE_FILE_EXTENSIONS=["as","as3","asm","bat","c","cc","cmake","cpp","cs","css","cxx","diff","erb","groovy","h","haml","hh","htm","html","java","js","json","less","m","make","md","ml","mm","php","pl","plist","properties","py","rb","rst","sass","scala","script","scm","sml","sql","sh","vi","vim","webdoc","xhtml","yaml"],DOCUMENT_FILE_EXTENSIONS=["csv","doc","docx","dwg","gdoc","gsheet","gslide","gslides","idml","indd","indt","inx","key","numbers","odp","ods","odt","pages","pdf","ppt","pptx","rtf","wpd","xls","xlsm","xlsx"],TEXT_FILE_EXTENSIONS=["as","as3","asm","bat","c","cc","cmake","cpp","cs","css","cxx","diff","erb","groovy","h","haml","hh","java","js","json","less","log","m","make","md","ml","mm","php","pl","plist","properties","py","rb","rst","sass","scala","script","scm","sml","sql","sh","txt","vi","vim","webdoc","yaml"],SPREADSHEET_FILE_EXTENSIONS=["xls","xlsx","xlsm","xlsb","csv","ods","gsheet"],DOCUMENT_SUGGESTED_QUESTIONS=[{id:"suggested-question-1",labelId:"documentSuggestedQuestionLabel1",promptId:"documentSuggestedQuestionPrompt1"},{id:"suggested-question-2",labelId:"documentSuggestedQuestionLabel2",promptId:"documentSuggestedQuestionPrompt2"},{id:"suggested-question-3",labelId:"documentSuggestedQuestionLabel3",promptId:"documentSuggestedQuestionPrompt3"},{id:"suggested-question-4",labelId:"documentSuggestedQuestionLabel4",promptId:"documentSuggestedQuestionPrompt4"}]},"./src/elements/common/content-answers/messages.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=(0,__webpack_require__("./node_modules/react-intl/lib/index.js").YK)({contentAnswersTitle:{id:"boxui.contentAnswers.contentAnswersTitle",defaultMessage:"Box AI"},defaultTooltip:{id:"boxui.contentAnswers.defaultTooltip",defaultMessage:"Get instant answers about this document using Box AI"},disabledTooltipFileNotCompatible:{id:"boxui.contentAnswers.disabledTooltipFileNotCompatible",defaultMessage:"Box AI is not currently supported for this file type"},hasQuestionsTooltip:{id:"boxui.contentAnswers.hasQuestionsTooltip",defaultMessage:"Return to Box AI"},documentSuggestedQuestionLabel1:{id:"boxui.contentAnswers.documentSuggestedQuestionLabel1",defaultMessage:"Summarize this document"},documentSuggestedQuestionPrompt1:{id:"boxui.contentAnswers.documentSuggestedQuestionPrompt1",defaultMessage:"Summarize this document"},documentSuggestedQuestionLabel2:{id:"boxui.contentAnswers.documentSuggestedQuestionLabel2",defaultMessage:"What are the key takeaways?"},documentSuggestedQuestionPrompt2:{id:"boxui.contentAnswers.documentSuggestedQuestionPrompt2",defaultMessage:"What are the key takeaways?"},documentSuggestedQuestionLabel3:{id:"boxui.contentAnswers.documentSuggestedQuestionLabel3",defaultMessage:"How can this document be improved?"},documentSuggestedQuestionPrompt3:{id:"boxui.contentAnswers.documentSuggestedQuestionPrompt3",defaultMessage:"How can this document be improved?"},documentSuggestedQuestionLabel4:{id:"boxui.contentAnswers.documentSuggestedQuestionLabel4",defaultMessage:"Are there any next steps defined?"},documentSuggestedQuestionPrompt4:{id:"boxui.contentAnswers.documentSuggestedQuestionPrompt4",defaultMessage:"Are there any next steps defined?"},welcomeMessageIntelligentQueryNotice:{id:"boxui.contentAnswers.welcomeMessageIntelligentQueryNotice",defaultMessage:"You can ask Box AI both simple and complex questions in your spreadsheet: total counts, averages, advanced comparisons, trend analyses and so on. Try it out today!"},welcomeMessageSpreadsheetNotice:{id:"boxui.contentAnswers.welcomeMessageSpreadsheetNotice",defaultMessage:"Spreadsheet support works best for text dense files"},welcomeMessageSpreadsheetNoticeAriaLabel:{id:"boxui.contentAnswers.welcomeMessageSpreadsheetNoticeAriaLabel",defaultMessage:"spreadsheet support notification banner"}})},"./src/elements/content-sidebar/BoxAISidebar.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>elements_content_sidebar_BoxAISidebar});var react=__webpack_require__("./node_modules/react/index.js"),useIntl=__webpack_require__("./node_modules/react-intl/lib/src/components/useIntl.js"),context=__webpack_require__("./node_modules/@box/box-ai-agent-selector/dist/esm/lib/contexts/context.js"),flow=__webpack_require__("./node_modules/lodash/flow.js"),flow_default=__webpack_require__.n(flow),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),box_ai_agent_selector_with_api=__webpack_require__("./node_modules/@box/box-ai-agent-selector/dist/esm/lib/box-ai-agent-selector-with-api.js"),tooltip=__webpack_require__("./node_modules/@box/blueprint-web/dist/lib-esm/tooltip/tooltip.js"),icon_button=__webpack_require__("./node_modules/@box/blueprint-web/dist/lib-esm/primitives/icon-button/icon-button.js"),ArrowsExpand=__webpack_require__("./node_modules/@box/blueprint-web-assets/dist/icons/Fill/ArrowsExpand.js"),clear_conversation_button=__webpack_require__("./node_modules/@box/box-ai-content-answers/dist/chunks/clear-conversation-button.js"),box_ai_content_answers=__webpack_require__("./node_modules/@box/box-ai-content-answers/dist/esm/lib/box-ai-content-answers.js"),modal=__webpack_require__("./node_modules/@box/box-ai-content-answers/dist/esm/lib/components/modal/modal.js"),api_wrapper=__webpack_require__("./node_modules/@box/box-ai-content-answers/dist/esm/lib/components/api-wrapper/api-wrapper.js"),SidebarContent=__webpack_require__("./src/elements/content-sidebar/SidebarContent.js"),api_context=__webpack_require__("./src/elements/common/api-context/index.js"),error_boundary=__webpack_require__("./src/elements/common/error-boundary/index.js"),logger=__webpack_require__("./src/elements/common/logger/index.js"),constants=__webpack_require__("./src/constants.js"),logger_constants=__webpack_require__("./src/elements/common/logger/constants.js"),performance=__webpack_require__("./src/utils/performance.js"),noop=__webpack_require__("./node_modules/lodash/noop.js"),noop_default=__webpack_require__.n(noop);const BoxAISidebarContext=react.createContext({cache:null,contentName:"",elementId:"",fileExtension:"",isFeedbackEnabled:!1,isFeedbackFormEnabled:!1,isStopResponseEnabled:!1,items:[],recordAction:noop_default(),setCacheValue:noop_default(),shouldFeedbackFormIncludeFeedbackText:!1,shouldPreinitSession:!0});var types=__webpack_require__("./node_modules/@box/box-ai-agent-selector/dist/chunks/types.js"),text_text=__webpack_require__("./node_modules/@box/blueprint-web/dist/lib-esm/text/text.js"),messages=__webpack_require__("./src/elements/common/messages.js");function BoxAISidebarTitle({isAIStudioAgentSelectorEnabled=!1}){const{formatMessage}=(0,useIntl.A)(),{agents,requestState}=(0,context._F)(),hasAgentSelectorRequestEnded=requestState!==types.R.NOT_STARTED&&requestState!==types.R.IN_PROGRESS,hasAgentSelectorRequestFailed=requestState===types.R.ERROR||requestState===types.R.CANCELLED,isAgentSelectorVisible=agents.length>1&&requestState===types.R.SUCCESS;return!isAIStudioAgentSelectorEnabled||hasAgentSelectorRequestFailed||!isAgentSelectorVisible&&hasAgentSelectorRequestEnded?react.createElement(text_text.E,{as:"h3",className:"bcs-title"},formatMessage(messages.A.sidebarBoxAITitle)):null}const content_sidebar_BoxAISidebarTitle=BoxAISidebarTitle;try{BoxAISidebarTitle.displayName="BoxAISidebarTitle",BoxAISidebarTitle.__docgenInfo={description:"",displayName:"BoxAISidebarTitle",props:{isAIStudioAgentSelectorEnabled:{defaultValue:{value:"false"},description:"",name:"isAIStudioAgentSelectorEnabled",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/elements/content-sidebar/BoxAISidebarTitle.tsx#BoxAISidebarTitle"]={docgenInfo:BoxAISidebarTitle.__docgenInfo,name:"BoxAISidebarTitle",path:"src/elements/content-sidebar/BoxAISidebarTitle.tsx#BoxAISidebarTitle"})}catch(__react_docgen_typescript_loader_error){}var injectStylesIntoStyleTag=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("./node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),BoxAISidebar=__webpack_require__("./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[13].use[2]!./src/elements/content-sidebar/BoxAISidebar.scss"),options={};options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(BoxAISidebar.A,options);BoxAISidebar.A&&BoxAISidebar.A.locals&&BoxAISidebar.A.locals;const _excluded=["createSession","encodedSession","onClearAction","onSelectedAgentCallback","getAIStudioAgents","hasRequestInProgress","hostAppName","isAIStudioAgentSelectorEnabled","isLoading","onSelectAgent","questions","shouldShowLandingPage","sendQuestion","stopQuestion"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const MARK_NAME_JS_READY=`${constants.mE6}_${logger_constants.T}`;function BoxAISidebarContent(props){const{createSession,encodedSession,onClearAction,onSelectedAgentCallback,getAIStudioAgents,hasRequestInProgress,hostAppName,isAIStudioAgentSelectorEnabled,isLoading,onSelectAgent,questions,shouldShowLandingPage,sendQuestion,stopQuestion}=props,rest=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(props,_excluded),{formatMessage}=(0,useIntl.A)(),isSessionInitiated=react.useRef(!1),[isModalOpen,setIsModalOpen]=react.useState(!1),{cache,contentName,elementId,fileExtension,isFeedbackEnabled,isFeedbackFormEnabled,isStopResponseEnabled,items,itemSize,onFeedbackFormSubmit,onUserInteraction,recordAction,setCacheValue,shouldFeedbackFormIncludeFeedbackText,shouldPreinitSession}=react.useContext(BoxAISidebarContext),{agents,requestState,selectedAgent}=(0,context._F)(),{questions:cacheQuestions}=cache;cache.shouldShowLandingPage!==shouldShowLandingPage&&setCacheValue("shouldShowLandingPage",shouldShowLandingPage),cache.encodedSession!==encodedSession&&setCacheValue("encodedSession",encodedSession),cache.questions!==questions&&setCacheValue("questions",questions),cache.agents.selectedAgent!==selectedAgent&&setCacheValue("agents",{agents,requestState,selectedAgent});const handleUserIntentToUseAI=(userHasInteracted=!1)=>{shouldPreinitSession||encodedSession||isLoading||!createSession||createSession(!0,!1),userHasInteracted&&onUserInteraction&&onUserInteraction()},handleSwitchToModalClick=()=>{handleUserIntentToUseAI(),setIsModalOpen(!0)};react.useEffect((()=>(shouldPreinitSession&&!encodedSession&&createSession&&createSession(!0,!0),encodedSession&&cacheQuestions.length>0&&!1===cacheQuestions[cacheQuestions.length-1].isCompleted&&sendQuestion({prompt:cacheQuestions[cacheQuestions.length-1].prompt}),recordAction&&recordAction({action:"programmatic",component:"sidebar",feature:"answers",target:"loaded",data:{items:items.map((item=>({status:item.status,fileType:item.fileType})))}}),()=>{stopQuestion()})),[]),react.useEffect((()=>{const lastQuestion=cacheQuestions[cacheQuestions.length-1];!shouldPreinitSession&&!isSessionInitiated.current&&encodedSession&&lastQuestion?.isLoading&&(sendQuestion(lastQuestion,selectedAgent,!1),isSessionInitiated.current=!0)}),[encodedSession]),react.useEffect((()=>{onSelectedAgentCallback?.(selectedAgent)}),[selectedAgent?.id]);return react.createElement(react.Fragment,null,react.createElement(SidebarContent.A,{actions:react.createElement(react.Fragment,null,react.createElement("div",{className:"bcs-BoxAISidebar-title-part"},react.createElement(content_sidebar_BoxAISidebarTitle,{isAIStudioAgentSelectorEnabled}),isAIStudioAgentSelectorEnabled&&react.createElement("div",{className:"bcs-BoxAISidebar-agentSelector"},react.createElement(box_ai_agent_selector_with_api._,{disabled:hasRequestInProgress,fetcher:getAIStudioAgents,hostAppName,onAgentsListOpen:handleUserIntentToUseAI,onSelectAgent,recordAction,shouldHideAgentSelectorOnLoad:!0,variant:"sidebar"}))),react.createElement(clear_conversation_button.C,{onClick:onClearAction}),react.createElement(tooltip.m_,{content:formatMessage(messages.A.sidebarBoxAISwitchToModalView),variant:"standard"},react.createElement(icon_button.K,{"aria-label":formatMessage(messages.A.sidebarBoxAISwitchToModalView),className:"bcs-BoxAISidebar-expand","data-target-id":"IconButton-expandBoxAISidebar",icon:ArrowsExpand.A,onClick:handleSwitchToModalClick,size:"small"}))),className:classnames_default()("bcs-BoxAISidebar",{"with-modal-open":isModalOpen}),elementId,sidebarView:constants.zJD},react.createElement("div",{className:"bcs-BoxAISidebar-content"},react.createElement(box_ai_content_answers.C,_extends({className:"bcs-BoxAISidebar-contentAnswers",contentName,contentType:formatMessage(messages.A.sidebarBoxAIContent),hostAppName,isAIStudioAgentSelectorEnabled,isFeedbackEnabled,isFeedbackFormEnabled,isStopResponseEnabled,items,questions,onFeedbackFormSubmit,onUserIntentToUseAI:handleUserIntentToUseAI,shouldFeedbackFormIncludeFeedbackText,shouldShowLandingPage:cache.shouldShowLandingPage,showLoadingIndicator:isLoading&&shouldPreinitSession,stopQuestion,submitQuestion:sendQuestion,variant:"sidebar",recordAction},rest)))),react.createElement(modal.h,_extends({contentName,contentType:formatMessage(messages.A.sidebarBoxAIContent),extension:fileExtension,getAIStudioAgents,hasRequestInProgress,hostAppName,isAIStudioAgentSelectorEnabled,isFeedbackEnabled,isFeedbackFormEnabled,isStopResponseEnabled,items,itemSize,onClearAction,onFeedbackFormSubmit,onOpenChange:()=>{setIsModalOpen(!1)},onSelectAgent,onUserIntentToUseAI:handleUserIntentToUseAI,open:isModalOpen,questions,recordAction:isModalOpen?recordAction:void 0,shouldFeedbackFormIncludeFeedbackText,shouldShowLandingPage:cache.shouldShowLandingPage,showLoadingIndicator:!1,stopPropagationOnEsc:!0,stopQuestion,submitQuestion:sendQuestion,variant:"collapsible"},rest,{shouldRenderProviders:!1})))}(0,performance.G)(MARK_NAME_JS_READY);const content_sidebar_BoxAISidebarContent=flow_default()([(0,logger.V)(constants.mE6),(0,error_boundary.X)(constants.mE6),api_context.S,api_wrapper.a])(BoxAISidebarContent);try{BoxAISidebarContent.displayName="BoxAISidebarContent",BoxAISidebarContent.__docgenInfo={description:"",displayName:"BoxAISidebarContent",props:{cachedSuggestedQuestions:{defaultValue:null,description:"",name:"cachedSuggestedQuestions",required:!1,type:{name:"SuggestedQuestionType[]"}},createSessionRequest:{defaultValue:null,description:"",name:"createSessionRequest",required:!1,type:{name:"(payload: Record<string, unknown>, itemID: string) => Promise<CreateSessionResponse>"}},fetchTimeout:{defaultValue:null,description:"",name:"fetchTimeout",required:!1,type:{name:"StreamResponseTimeout"}},formatCitations:{defaultValue:null,description:"",name:"formatCitations",required:!1,type:{name:"(citations: CitationResponse[]) => CitationType[]"}},getAgentConfig:{defaultValue:null,description:"",name:"getAgentConfig",required:!1,type:{name:"agentFetcherType"}},getAIStudioAgents:{defaultValue:null,description:"",name:"getAIStudioAgents",required:!1,type:{name:"() => Promise<AgentListResponse>"}},getAnswer:{defaultValue:null,description:"",name:"getAnswer",required:!1,type:{name:"fetcherType"}},getAnswerStreaming:{defaultValue:null,description:"",name:"getAnswerStreaming",required:!1,type:{name:"fetcherStreamingType"}},getSuggestedQuestions:{defaultValue:null,description:"",name:"getSuggestedQuestions",required:!1,type:{name:"SuggestedQuestionFetcherType"}},hostAppName:{defaultValue:null,description:"",name:"hostAppName",required:!1,type:{name:"string"}},isAgentSelectorEnabled:{defaultValue:null,description:"Flag to enable or disable the agent selector\nPrefer passing isAIStudioAgentSelectorEnabled and getAIStudioAgents instead since this prop will be removed soon\n@deprecated",name:"isAgentSelectorEnabled",required:!1,type:{name:"boolean"}},isAIStudioAgentSelectorEnabled:{defaultValue:null,description:"",name:"isAIStudioAgentSelectorEnabled",required:!1,type:{name:"boolean"}},isDebugModeEnabled:{defaultValue:null,description:"",name:"isDebugModeEnabled",required:!1,type:{name:"boolean"}},isResetChatEnabled:{defaultValue:null,description:"",name:"isResetChatEnabled",required:!1,type:{name:"boolean"}},isStopResponseEnabled:{defaultValue:null,description:"",name:"isStopResponseEnabled",required:!1,type:{name:"boolean"}},isCitationsEnabled:{defaultValue:null,description:"",name:"isCitationsEnabled",required:!1,type:{name:"boolean"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!1,type:{name:"boolean"}},isMarkdownEnabled:{defaultValue:null,description:"",name:"isMarkdownEnabled",required:!1,type:{name:"boolean"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!1,type:{name:"boolean"}},isStreamingEnabled:{defaultValue:null,description:"",name:"isStreamingEnabled",required:!1,type:{name:"boolean"}},itemID:{defaultValue:null,description:"Item ID for the content answers\n@deprecated Prefer passing items instead since this prop will be deprecated soon",name:"itemID",required:!1,type:{name:"string"}},items:{defaultValue:null,description:"",name:"items",required:!1,type:{name:"ItemType[]"}},onCloseModal:{defaultValue:null,description:"",name:"onCloseModal",required:!1,type:{name:"() => void"}},onCitationClick:{defaultValue:null,description:"",name:"onCitationClick",required:!1,type:{name:"ItemClickHandler"}},onItemClick:{defaultValue:null,description:"",name:"onItemClick",required:!1,type:{name:"ItemClickHandler"}},onSuggestedQuestionsFetched:{defaultValue:null,description:"",name:"onSuggestedQuestionsFetched",required:!1,type:{name:"(fetchedSuggestedQuestions: SuggestedQuestionType[]) => void"}},parentItem:{defaultValue:null,description:"",name:"parentItem",required:!1,type:{name:"ItemType"}},restoredQuestions:{defaultValue:null,description:"",name:"restoredQuestions",required:!1,type:{name:"QuestionType[]"}},restoredSession:{defaultValue:null,description:"",name:"restoredSession",required:!1,type:{name:"string"}},restoredShouldShowLandingPage:{defaultValue:null,description:"",name:"restoredShouldShowLandingPage",required:!1,type:{name:"boolean"}},sendErrorLog:{defaultValue:null,description:"",name:"sendErrorLog",required:!1,type:{name:"SendErrorLog"}},shouldRenderProviders:{defaultValue:null,description:"",name:"shouldRenderProviders",required:!1,type:{name:"boolean"}},shouldPreinitSession:{defaultValue:null,description:"",name:"shouldPreinitSession",required:!1,type:{name:"boolean"}},suggestedQuestionsRequestState:{defaultValue:null,description:"",name:"suggestedQuestionsRequestState",required:!1,type:{name:"enum",value:[{value:'"not_started"'},{value:'"in_progress"'},{value:'"success"'},{value:'"error"'},{value:'"cancelled"'}]}},suggestedQuestions:{defaultValue:null,description:"",name:"suggestedQuestions",required:!1,type:{name:"SuggestedQuestionType[]"}},warningNotice:{defaultValue:null,description:"",name:"warningNotice",required:!1,type:{name:"string"}},warningNoticeAriaLabel:{defaultValue:null,description:"",name:"warningNoticeAriaLabel",required:!1,type:{name:"string"}},promptButtonClickHandler:{defaultValue:null,description:"",name:"promptButtonClickHandler",required:!1,type:{name:"(clickHandler: (content: string) => void) => void"}},chatMessages:{defaultValue:null,description:"",name:"chatMessages",required:!1,type:{name:"(QuestionType | WelcomeMessageType)[]"}},createSession:{defaultValue:null,description:"",name:"createSession",required:!0,type:{name:"(shouldAddLoading?: boolean, shouldTriggerError?: boolean) => void"}},encodedSession:{defaultValue:null,description:"",name:"encodedSession",required:!0,type:{name:"string"}},error:{defaultValue:null,description:"",name:"error",required:!0,type:{name:"enum",value:[{value:'"large_file"'},{value:'"general"'}]}},hasRequestInProgress:{defaultValue:null,description:"",name:"hasRequestInProgress",required:!0,type:{name:"boolean"}},onAgentEditorToggle:{defaultValue:null,description:"",name:"onAgentEditorToggle",required:!0,type:{name:"(agent: AgentType) => void"}},onClearAction:{defaultValue:null,description:"",name:"onClearAction",required:!0,type:{name:"() => void"}},onSelectAgent:{defaultValue:null,description:"",name:"onSelectAgent",required:!0,type:{name:"(agent: AgentType) => void"}},onSelectedAgentCallback:{defaultValue:null,description:"",name:"onSelectedAgentCallback",required:!0,type:{name:"((selectedAgent: AgentType) => void) & ((selectedAgent: AgentType) => void)"}},questions:{defaultValue:null,description:"@deprecated Prefer passing chatMessages instead since this prop will be deprecated soon",name:"questions",required:!0,type:{name:"QuestionType[]"}},retryQuestion:{defaultValue:null,description:"",name:"retryQuestion",required:!0,type:{name:"RetryQuestion"}},sendQuestion:{defaultValue:null,description:"",name:"sendQuestion",required:!0,type:{name:"SubmitQuestion"}},setAnswerFeedback:{defaultValue:null,description:"",name:"setAnswerFeedback",required:!0,type:{name:"(questionId: string, feedbackValue: FeedbackValue) => void"}},stopQuestion:{defaultValue:null,description:"",name:"stopQuestion",required:!0,type:{name:"StopQuestion"}},shouldShowLandingPage:{defaultValue:null,description:"",name:"shouldShowLandingPage",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/elements/content-sidebar/BoxAISidebarContent.tsx#BoxAISidebarContent"]={docgenInfo:BoxAISidebarContent.__docgenInfo,name:"BoxAISidebarContent",path:"src/elements/content-sidebar/BoxAISidebarContent.tsx#BoxAISidebarContent"})}catch(__react_docgen_typescript_loader_error){}var content_answers_constants=__webpack_require__("./src/elements/common/content-answers/constants.ts"),content_answers_messages=__webpack_require__("./src/elements/common/content-answers/messages.ts");const BoxAISidebar_excluded=["cache","contentName","elementId","fileExtension","fileID","getSuggestedQuestions","isIntelligentQueryMode","isFeedbackEnabled","isFeedbackFormEnabled","isStopResponseEnabled","items","itemSize","localizedQuestions","onFeedbackFormSubmit","onUserInteraction","recordAction","renderRemoteModule","setCacheValue","shouldFeedbackFormIncludeFeedbackText","shouldPreinitSession","setHasQuestions"];function BoxAISidebar_extends(){return BoxAISidebar_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},BoxAISidebar_extends.apply(null,arguments)}const BoxAISidebar_BoxAISidebar=props=>{const{cache,contentName,elementId,fileExtension,fileID,getSuggestedQuestions,isIntelligentQueryMode,isFeedbackEnabled,isFeedbackFormEnabled,isStopResponseEnabled,items,itemSize,localizedQuestions,onFeedbackFormSubmit,onUserInteraction,recordAction,renderRemoteModule,setCacheValue,shouldFeedbackFormIncludeFeedbackText,shouldPreinitSession=!0,setHasQuestions}=props,rest=function BoxAISidebar_objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function BoxAISidebar_objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(props,BoxAISidebar_excluded),{questions}=cache,{formatMessage}=(0,useIntl.A)(),contextValue=react.useMemo((()=>({cache,contentName,elementId,fileExtension,isFeedbackEnabled,isFeedbackFormEnabled,isStopResponseEnabled,items,itemSize,onFeedbackFormSubmit,onUserInteraction,recordAction,setCacheValue,shouldFeedbackFormIncludeFeedbackText,shouldPreinitSession})),[cache,contentName,elementId,fileExtension,isFeedbackEnabled,isFeedbackFormEnabled,isStopResponseEnabled,items,itemSize,onFeedbackFormSubmit,onUserInteraction,recordAction,setCacheValue,shouldFeedbackFormIncludeFeedbackText,shouldPreinitSession]);if(react.useEffect((()=>{setHasQuestions&&setHasQuestions(questions.length>0)}),[questions.length,setHasQuestions]),renderRemoteModule)return renderRemoteModule(elementId);let questionsWithoutInProgress=questions;questions.length>0&&!questions[questions.length-1].isCompleted&&(questionsWithoutInProgress=questionsWithoutInProgress.slice(0,-1));const isSpreadsheet=content_answers_constants.Bp.includes(fileExtension);let spreadsheetNotice=isSpreadsheet?formatMessage(content_answers_messages.A.welcomeMessageSpreadsheetNotice):"";isIntelligentQueryMode?spreadsheetNotice=formatMessage(content_answers_messages.A.welcomeMessageIntelligentQueryNotice):isSpreadsheet&&(spreadsheetNotice=formatMessage(content_answers_messages.A.welcomeMessageSpreadsheetNotice));const suggestedQuestions=null===getSuggestedQuestions?localizedQuestions:[];return react.createElement(context.UQ,{value:cache.agents},react.createElement(BoxAISidebarContext.Provider,{value:contextValue},react.createElement(content_sidebar_BoxAISidebarContent,BoxAISidebar_extends({cachedSuggestedQuestions:cache.suggestedQuestions,getSuggestedQuestions,isOpen:!0,isStopResponseEnabled,itemID:fileID,itemIDs:[fileID],onSuggestedQuestionsFetched:fetchedSuggestedQuestions=>{setCacheValue("suggestedQuestions",fetchedSuggestedQuestions)},restoredQuestions:questionsWithoutInProgress,restoredSession:cache.encodedSession,restoredShouldShowLandingPage:cache.shouldShowLandingPage,shouldPreinitSession,suggestedQuestions:cache.suggestedQuestions.length>0?cache.suggestedQuestions:suggestedQuestions,warningNotice:spreadsheetNotice,warningNoticeAriaLabel:formatMessage(content_answers_messages.A.welcomeMessageSpreadsheetNoticeAriaLabel)},rest))))},elements_content_sidebar_BoxAISidebar=BoxAISidebar_BoxAISidebar;try{BoxAISidebar_BoxAISidebar.displayName="BoxAISidebar",BoxAISidebar_BoxAISidebar.__docgenInfo={description:"",displayName:"BoxAISidebar",props:{contentName:{defaultValue:null,description:"",name:"contentName",required:!0,type:{name:"string"}},cache:{defaultValue:null,description:"",name:"cache",required:!0,type:{name:"BoxAISidebarCache"}},createSessionRequest:{defaultValue:null,description:"",name:"createSessionRequest",required:!0,type:{name:"(payload: Record<string, unknown>, itemID: string) => Promise<unknown>"}},elementId:{defaultValue:null,description:"",name:"elementId",required:!0,type:{name:"string"}},fetchTimeout:{defaultValue:null,description:"",name:"fetchTimeout",required:!0,type:{name:"Record<string, unknown>"}},fileExtension:{defaultValue:null,description:"",name:"fileExtension",required:!0,type:{name:"string"}},fileID:{defaultValue:null,description:"",name:"fileID",required:!0,type:{name:"string"}},getAgentConfig:{defaultValue:null,description:"",name:"getAgentConfig",required:!0,type:{name:"(payload: Record<string, unknown>) => Promise<unknown>"}},getAIStudioAgents:{defaultValue:null,description:"",name:"getAIStudioAgents",required:!0,type:{name:"() => Promise<unknown>"}},getAnswer:{defaultValue:null,description:"",name:"getAnswer",required:!0,type:{name:"(payload: Record<string, unknown>, itemID?: string, itemIDs?: string[], state?: Record<string, unknown>) => Promise<unknown>"}},getAnswerStreaming:{defaultValue:null,description:"",name:"getAnswerStreaming",required:!0,type:{name:"(payload: Record<string, unknown>, itemID?: string, itemIDs?: string[], abortController?: AbortController, state?: Record<string, unknown>) => Promise<unknown>"}},getSuggestedQuestions:{defaultValue:null,description:"",name:"getSuggestedQuestions",required:!0,type:{name:"(itemID: string) => Promise<unknown>"}},hostAppName:{defaultValue:null,description:"",name:"hostAppName",required:!0,type:{name:"string"}},isAgentSelectorEnabled:{defaultValue:null,description:"",name:"isAgentSelectorEnabled",required:!0,type:{name:"boolean"}},isAIStudioAgentSelectorEnabled:{defaultValue:null,description:"",name:"isAIStudioAgentSelectorEnabled",required:!0,type:{name:"boolean"}},isCitationsEnabled:{defaultValue:null,description:"",name:"isCitationsEnabled",required:!0,type:{name:"boolean"}},isDebugModeEnabled:{defaultValue:null,description:"",name:"isDebugModeEnabled",required:!0,type:{name:"boolean"}},isFeedbackEnabled:{defaultValue:null,description:"",name:"isFeedbackEnabled",required:!0,type:{name:"boolean"}},isFeedbackFormEnabled:{defaultValue:null,description:"",name:"isFeedbackFormEnabled",required:!0,type:{name:"boolean"}},isIntelligentQueryMode:{defaultValue:null,description:"",name:"isIntelligentQueryMode",required:!0,type:{name:"boolean"}},isMarkdownEnabled:{defaultValue:null,description:"",name:"isMarkdownEnabled",required:!0,type:{name:"boolean"}},isStopResponseEnabled:{defaultValue:null,description:"",name:"isStopResponseEnabled",required:!1,type:{name:"boolean"}},isStreamingEnabled:{defaultValue:null,description:"",name:"isStreamingEnabled",required:!0,type:{name:"boolean"}},items:{defaultValue:null,description:"",name:"items",required:!0,type:{name:"ItemType[]"}},itemSize:{defaultValue:null,description:"",name:"itemSize",required:!1,type:{name:"string"}},localizedQuestions:{defaultValue:null,description:"",name:"localizedQuestions",required:!0,type:{name:"{ id: string; label: string; prompt: string; }[]"}},onFeedbackFormSubmit:{defaultValue:null,description:"",name:"onFeedbackFormSubmit",required:!1,type:{name:"(data: FeedbackFormData, onSuccess: () => void) => void"}},onUserInteraction:{defaultValue:null,description:"",name:"onUserInteraction",required:!1,type:{name:"() => void"}},recordAction:{defaultValue:null,description:"",name:"recordAction",required:!0,type:{name:"(params: RecordActionType) => void"}},setCacheValue:{defaultValue:null,description:"",name:"setCacheValue",required:!0,type:{name:"BoxAISidebarCacheSetter"}},shouldFeedbackFormIncludeFeedbackText:{defaultValue:null,description:"",name:"shouldFeedbackFormIncludeFeedbackText",required:!1,type:{name:"boolean"}},renderRemoteModule:{defaultValue:null,description:"",name:"renderRemoteModule",required:!1,type:{name:"(elementId: string) => ReactNode"}},shouldPreinitSession:{defaultValue:null,description:"",name:"shouldPreinitSession",required:!1,type:{name:"boolean"}},setHasQuestions:{defaultValue:null,description:"",name:"setHasQuestions",required:!0,type:{name:"(hasQuestions: boolean) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/elements/content-sidebar/BoxAISidebar.tsx#BoxAISidebar"]={docgenInfo:BoxAISidebar_BoxAISidebar.__docgenInfo,name:"BoxAISidebar",path:"src/elements/content-sidebar/BoxAISidebar.tsx#BoxAISidebar"})}catch(__react_docgen_typescript_loader_error){}},"./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[13].use[2]!./src/elements/content-sidebar/BoxAISidebar.scss":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,".bcs-is-wider .bcs-BoxAISidebar{height:100%;max-height:100%}.bcs-is-wider .bcs-BoxAISidebar.with-modal-open{display:none}.bcs-is-wider .bcs-BoxAISidebar .bcs-content-header{padding:0 var(--space-4)}.bcs-is-wider .bcs-BoxAISidebar .bcs-scroll-content{width:auto;height:100%}.bcs-is-wider .bcs-BoxAISidebar .bcs-BoxAISidebar-content{height:100%}.bcs-is-wider .bcs-BoxAISidebar .bcs-BoxAISidebar-title-part{display:flex;align-items:center;justify-content:left;width:100%;margin:0;padding:0;font-weight:normal;font-size:var(--title-medium-font-size)}.bcs-is-wider .bcs-BoxAISidebar .bcs-BoxAISidebar-title-part .bcs-title{margin-right:var(--space-2);white-space:nowrap}.bcs-is-wider .bcs-BoxAISidebar .bcs-BoxAISidebar-agentSelector{max-width:279px}@media(max-width: 767px){.bcs-is-wider .bcs-BoxAISidebar .bcs-BoxAISidebar-agent-selector-container{max-width:none}}.bcs-is-wider .bcs-BoxAISidebar .bcs-BoxAISidebar-chat-actions{display:flex;justify-content:right}.bcs-is-wider .bcs-BoxAISidebar .sidebar-chip{max-width:211px;margin-inline-start:0}.bcs-is-wider .bcs-BoxAISidebar .sidebar-chip button{width:100%}.bcs-is-wider .bcs-BoxAISidebar .bcs-BoxAISidebar-expand{margin-left:var(--space-2)}","",{version:3,sources:["webpack://./src/elements/content-sidebar/BoxAISidebar.scss","webpack://./src/styles/constants/_media-queries.scss"],names:[],mappings:"AAKI,gCACI,WAAA,CACA,eAAA,CAEA,gDACI,YAAA,CAGJ,oDACI,wBAAA,CAGJ,oDACI,UAAA,CACA,WAAA,CAGJ,0DACI,WAAA,CAGJ,6DACI,YAAA,CACA,kBAAA,CACA,oBAAA,CACA,UAAA,CACA,QAAA,CACA,SAAA,CACA,kBAAA,CACA,uCAAA,CAEA,wEACI,2BAAA,CACA,kBAAA,CAKR,gEACI,eAAA,CC7BR,yBDiCQ,2EACI,cAAA,CAAA,CAIR,+DACI,YAAA,CACA,qBAAA,CAGJ,8CACI,eAzDgB,CA0DhB,qBAAA,CAEA,qDACI,UAAA,CAIR,yDACI,0BAAA",sourcesContent:["@import '../common/variables';\n\n$agentSelectorSidebarWidth: 211px;\n\n.bcs-is-wider {\n    .bcs-BoxAISidebar {\n        height: 100%;\n        max-height: 100%;\n\n        &.with-modal-open {\n            display: none;\n        }\n\n        .bcs-content-header {\n            padding: 0 var(--space-4);\n        }\n\n        .bcs-scroll-content {\n            width: auto;\n            height: 100%;\n        }\n\n        .bcs-BoxAISidebar-content {\n            height: 100%;\n        }\n\n        .bcs-BoxAISidebar-title-part {\n            display: flex;\n            align-items: center;\n            justify-content: left;\n            width: 100%;\n            margin: 0;\n            padding: 0;\n            font-weight: normal;\n            font-size: var(--title-medium-font-size);\n\n            .bcs-title {\n                margin-right: var(--space-2);\n                white-space: nowrap;\n            }\n        }\n\n        // Limit the width of Agent Selector to accomodate action buttons\n        .bcs-BoxAISidebar-agentSelector {\n            max-width: 279px;\n        }\n\n        @include breakpoint($medium-screen) {\n            .bcs-BoxAISidebar-agent-selector-container {\n                max-width: none;\n            }\n        }\n\n        .bcs-BoxAISidebar-chat-actions {\n            display: flex;\n            justify-content: right;\n        }\n\n        .sidebar-chip {\n            max-width: $agentSelectorSidebarWidth;\n            margin-inline-start: 0;\n\n            button {\n                width: 100%;\n            }\n        }\n\n        .bcs-BoxAISidebar-expand {\n            margin-left: var(--space-2);\n        }\n    }\n}\n","$size-small-medium-min: 375px;\n$size-medium-min: 461px;\n$size-large-min: 768px;\n$size-small-max: 374px;\n$size-small-medium-max: 460px;\n$size-medium-max: 767px;\n$size-large-max: 1023px;\n$size-xlarge-max: 1219px;\n$small-screen: unquote('(max-width: #{$size-small-max})');\n$small-medium-screen: unquote('(max-width: #{$size-small-medium-max})');\n$medium-screen: unquote('(max-width: #{$size-medium-max})');\n$large-screen: unquote('(max-width: #{$size-large-max})');\n$xlarge-screen: unquote('(max-width: #{$size-xlarge-max})');\n\n@mixin breakpoint($media-query) {\n    @media #{$media-query} {\n        @content;\n    }\n}\n"],sourceRoot:""}]);const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___}}]);