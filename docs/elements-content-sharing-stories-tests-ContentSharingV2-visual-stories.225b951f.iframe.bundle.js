"use strict";(globalThis.webpackChunkbox_ui_elements=globalThis.webpackChunkbox_ui_elements||[]).push([[96786],{"./src/elements/content-sharing/stories/tests/ContentSharingV2-visual.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__,withCollaborators:()=>withCollaborators,withModernization:()=>withModernization,withSharedLink:()=>withSharedLink});var storybook_test__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("storybook/test"),_utils_mocks_ContentSharingV2Mocks__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/elements/content-sharing/utils/__mocks__/ContentSharingV2Mocks.js");const withModernization={args:{api:_utils_mocks_ContentSharingV2Mocks__WEBPACK_IMPORTED_MODULE_1__.wI,enableModernizedComponents:!0},play:async({canvasElement})=>{const canvas=(0,storybook_test__WEBPACK_IMPORTED_MODULE_0__.within)(canvasElement),button=await canvas.findByRole("button",{name:"Open Unified Share Modal"});(0,storybook_test__WEBPACK_IMPORTED_MODULE_0__.expect)(button).toBeInTheDocument(),await storybook_test__WEBPACK_IMPORTED_MODULE_0__.userEvent.click(button),(0,storybook_test__WEBPACK_IMPORTED_MODULE_0__.expect)(storybook_test__WEBPACK_IMPORTED_MODULE_0__.screen.getByRole("heading",{name:"Share ‘Box Development Guide.pdf’"})).toBeVisible(),(0,storybook_test__WEBPACK_IMPORTED_MODULE_0__.expect)(storybook_test__WEBPACK_IMPORTED_MODULE_0__.screen.getByRole("combobox",{name:"Invite People"})).toBeVisible(),(0,storybook_test__WEBPACK_IMPORTED_MODULE_0__.expect)(storybook_test__WEBPACK_IMPORTED_MODULE_0__.screen.getByRole("switch",{name:"Shared link"})).toBeVisible()}},withSharedLink={args:{api:_utils_mocks_ContentSharingV2Mocks__WEBPACK_IMPORTED_MODULE_1__.Ur},play:async context=>{await withModernization.play(context),(0,storybook_test__WEBPACK_IMPORTED_MODULE_0__.expect)(storybook_test__WEBPACK_IMPORTED_MODULE_0__.screen.getByLabelText("Shared link URL")).toBeVisible(),(0,storybook_test__WEBPACK_IMPORTED_MODULE_0__.expect)(storybook_test__WEBPACK_IMPORTED_MODULE_0__.screen.getByRole("button",{name:"Link Settings"})).toBeVisible();const peopleWithTheLinkButton=storybook_test__WEBPACK_IMPORTED_MODULE_0__.screen.getByRole("button",{name:"People with the link"});(0,storybook_test__WEBPACK_IMPORTED_MODULE_0__.expect)(peopleWithTheLinkButton).toBeVisible(),(0,storybook_test__WEBPACK_IMPORTED_MODULE_0__.expect)(storybook_test__WEBPACK_IMPORTED_MODULE_0__.screen.getByRole("button",{name:"Can view and download"})).toBeVisible(),await storybook_test__WEBPACK_IMPORTED_MODULE_0__.userEvent.click(peopleWithTheLinkButton),(0,storybook_test__WEBPACK_IMPORTED_MODULE_0__.expect)(storybook_test__WEBPACK_IMPORTED_MODULE_0__.screen.getByRole("menuitemcheckbox",{name:/Invited people only/})).toHaveAttribute("aria-disabled","true")}},withCollaborators={args:{api:_utils_mocks_ContentSharingV2Mocks__WEBPACK_IMPORTED_MODULE_1__.C3},play:async context=>{await withModernization.play(context),await(0,storybook_test__WEBPACK_IMPORTED_MODULE_0__.waitFor)((async()=>{const sharedWithAvatars=storybook_test__WEBPACK_IMPORTED_MODULE_0__.screen.getByRole("button",{name:"Shared with D R D"});(0,storybook_test__WEBPACK_IMPORTED_MODULE_0__.expect)(sharedWithAvatars).toBeVisible(),await storybook_test__WEBPACK_IMPORTED_MODULE_0__.userEvent.click(sharedWithAvatars),(0,storybook_test__WEBPACK_IMPORTED_MODULE_0__.expect)(storybook_test__WEBPACK_IMPORTED_MODULE_0__.screen.getByRole("link",{name:"Manage All"})).toBeVisible(),(0,storybook_test__WEBPACK_IMPORTED_MODULE_0__.expect)(storybook_test__WEBPACK_IMPORTED_MODULE_0__.screen.getByRole("grid",{name:"Collaborators"})).toBeVisible(),(0,storybook_test__WEBPACK_IMPORTED_MODULE_0__.expect)(storybook_test__WEBPACK_IMPORTED_MODULE_0__.screen.getByRole("row",{name:/Detective Parrot/})).toBeVisible(),(0,storybook_test__WEBPACK_IMPORTED_MODULE_0__.expect)(storybook_test__WEBPACK_IMPORTED_MODULE_0__.screen.getByRole("button",{name:"Done"})).toBeVisible()}))}},__WEBPACK_DEFAULT_EXPORT__={title:"Elements/ContentSharingV2/tests/visual-regression-tests",component:_utils_mocks_ContentSharingV2Mocks__WEBPACK_IMPORTED_MODULE_1__.eS},__namedExportsOrder=["withModernization","withSharedLink","withCollaborators"];withModernization.parameters={...withModernization.parameters,docs:{...withModernization.parameters?.docs,source:{originalSource:"{\n  args: {\n    api: mockApiWithoutSharedLink,\n    enableModernizedComponents: true\n  },\n  play: async ({\n    canvasElement\n  }) => {\n    const canvas = within(canvasElement);\n    const button = await canvas.findByRole('button', {\n      name: 'Open Unified Share Modal'\n    });\n    expect(button).toBeInTheDocument();\n    await userEvent.click(button);\n    expect(screen.getByRole('heading', {\n      name: 'Share ‘Box Development Guide.pdf’'\n    })).toBeVisible();\n    expect(screen.getByRole('combobox', {\n      name: 'Invite People'\n    })).toBeVisible();\n    expect(screen.getByRole('switch', {\n      name: 'Shared link'\n    })).toBeVisible();\n  }\n}",...withModernization.parameters?.docs?.source}}},withSharedLink.parameters={...withSharedLink.parameters,docs:{...withSharedLink.parameters?.docs,source:{originalSource:"{\n  args: {\n    api: mockApiWithSharedLink\n  },\n  play: async context => {\n    await withModernization.play(context);\n    expect(screen.getByLabelText('Shared link URL')).toBeVisible();\n    expect(screen.getByRole('button', {\n      name: 'Link Settings'\n    })).toBeVisible();\n    const peopleWithTheLinkButton = screen.getByRole('button', {\n      name: 'People with the link'\n    });\n    expect(peopleWithTheLinkButton).toBeVisible();\n    expect(screen.getByRole('button', {\n      name: 'Can view and download'\n    })).toBeVisible();\n    await userEvent.click(peopleWithTheLinkButton);\n    expect(screen.getByRole('menuitemcheckbox', {\n      name: /Invited people only/\n    })).toHaveAttribute('aria-disabled', 'true');\n  }\n}",...withSharedLink.parameters?.docs?.source}}},withCollaborators.parameters={...withCollaborators.parameters,docs:{...withCollaborators.parameters?.docs,source:{originalSource:"{\n  args: {\n    api: mockApiWithCollaborators\n  },\n  play: async context => {\n    await withModernization.play(context);\n    await waitFor(async () => {\n      const sharedWithAvatars = screen.getByRole('button', {\n        name: 'Shared with D R D'\n      });\n      expect(sharedWithAvatars).toBeVisible();\n      await userEvent.click(sharedWithAvatars);\n      expect(screen.getByRole('link', {\n        name: 'Manage All'\n      })).toBeVisible();\n      expect(screen.getByRole('grid', {\n        name: 'Collaborators'\n      })).toBeVisible();\n      expect(screen.getByRole('row', {\n        name: /Detective Parrot/\n      })).toBeVisible();\n      expect(screen.getByRole('button', {\n        name: 'Done'\n      })).toBeVisible();\n    });\n  }\n}",...withCollaborators.parameters?.docs?.source}}}},"./src/elements/content-sharing/utils/__mocks__/ContentSharingV2Mocks.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{C3:()=>mockApiWithCollaborators,Ur:()=>mockApiWithSharedLink,eS:()=>ContentSharingV2Template,wI:()=>mockApiWithoutSharedLink});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_box_blueprint_web__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@box/blueprint-web/dist/lib-esm/primitives/notification/index.js"),_box_blueprint_web__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@box/blueprint-web/dist/lib-esm/tooltip/tooltip.js"),_box_blueprint_web__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@box/blueprint-web/dist/lib-esm/button/button.js"),_constants__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/constants.js"),_ContentSharingV2__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/elements/content-sharing/ContentSharingV2.tsx");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}const MOCK_ITEM_id="123456789",MOCK_ITEM_name="Box Development Guide.pdf",MOCK_ITEM_type="file",mockAvatarUrlMap={456:"https://example.com/avatar.jpg"},mockOwner={id:789,login:"aotter@example.com",name:"Astronaut Otter"},MOCK_COLLABORATORS=[{id:456,login:"dparrot@example.com",name:"Detective Parrot",role:"editor"},{id:457,login:"rqueen@external.example.com",name:"Raccoon Queen"},{id:458,login:"dpenguin@example.com",name:"Dancing Penguin"}],MOCK_COLLABORATIONS_RESPONSE={entries:MOCK_COLLABORATORS.map((user=>({id:`record_${user.id}`,accessible_by:user,expires_at:user.expires_at,created_by:{id:789,login:"aotter@example.com",name:"Astronaut Otter",type:"user"},role:789===user.id?"owner":"editor",status:"accepted",type:user.type})))},EMPTY_COLLABORATIONS_RESPONSE={entries:[]},DEFAULT_USER_API_RESPONSE={id:"789",enterprise:{name:"Otter Enterprise"}},DEFAULT_ITEM_API_RESPONSE={allowed_invitee_roles:["editor","viewer"],allowed_shared_link_access_levels:["open","company","collaborators"],allowed_shared_link_access_levels_disabled_reasons:{peopleInThisItem:"access_policy"},classification:null,id:MOCK_ITEM_id,name:MOCK_ITEM_name,owned_by:mockOwner,permissions:{can_download:!0,can_invite_collaborator:!0,can_set_share_access:!0,can_share:!0},shared_link:null,shared_link_features:{password:!0},type:MOCK_ITEM_type},MOCK_ITEM_API_RESPONSE_WITH_SHARED_LINK=_objectSpread(_objectSpread({},DEFAULT_ITEM_API_RESPONSE),{},{shared_link:{access:"open",effective_permission:"can_download",is_password_enabled:!0,unshared_at:17040672e5,url:"https://example.com/shared-link",vanity_name:"vanity-name",vanity_url:"https://example.com/vanity-url"}}),MOCK_ITEM_API_RESPONSE_WITH_COLLABORATORS=_objectSpread(_objectSpread({},DEFAULT_ITEM_API_RESPONSE),{},{collaborators:MOCK_COLLABORATORS}),createMockApi=(_objectSpread(_objectSpread({},DEFAULT_ITEM_API_RESPONSE),{},{classification:{color:"#91c2fd",definition:"Blue classification",name:"Blue"}}),(itemResponse=DEFAULT_ITEM_API_RESPONSE,userResponse=DEFAULT_USER_API_RESPONSE,collaboratorsResponse=MOCK_COLLABORATIONS_RESPONSE)=>{const mockFileApi={getFile:(itemId,successCallback)=>{setTimeout((()=>{successCallback(itemResponse)}),100)}},mockFolderApi={getFolderFields:(itemId,successCallback)=>{setTimeout((()=>{successCallback(itemResponse)}),100)}},mockUsersApi={getUser:(itemId,successCallback)=>{setTimeout((()=>{successCallback(userResponse)}),100)},getAvatarUrlWithAccessToken:userId=>mockAvatarUrlMap[userId]??null};return{getFileAPI:()=>mockFileApi,getFolderAPI:()=>mockFolderApi,getUsersAPI:()=>mockUsersApi,getFileCollaborationsAPI:()=>({getCollaborations:(itemId,successCallback)=>{setTimeout((()=>{successCallback(collaboratorsResponse)}),100)}}),getFolderCollaborationsAPI:()=>({getCollaborations:(itemId,successCallback)=>{setTimeout((()=>{successCallback(collaboratorsResponse)}),100)}})}}),mockApiWithSharedLink=createMockApi(MOCK_ITEM_API_RESPONSE_WITH_SHARED_LINK,DEFAULT_USER_API_RESPONSE,EMPTY_COLLABORATIONS_RESPONSE),mockApiWithoutSharedLink=createMockApi(DEFAULT_ITEM_API_RESPONSE,DEFAULT_USER_API_RESPONSE,EMPTY_COLLABORATIONS_RESPONSE),mockApiWithCollaborators=createMockApi(MOCK_ITEM_API_RESPONSE_WITH_COLLABORATORS,DEFAULT_USER_API_RESPONSE,MOCK_COLLABORATIONS_RESPONSE),ContentSharingV2Template=(props={})=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(_box_blueprint_web__WEBPACK_IMPORTED_MODULE_3__.E.Provider,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_box_blueprint_web__WEBPACK_IMPORTED_MODULE_4__.Bc,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ContentSharingV2__WEBPACK_IMPORTED_MODULE_2__.A,_extends({api:mockApiWithoutSharedLink,itemId:__webpack_require__.g.FILE_ID,itemType:_constants__WEBPACK_IMPORTED_MODULE_1__.I9H},props),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_box_blueprint_web__WEBPACK_IMPORTED_MODULE_5__.$,null,"Open Unified Share Modal"))));ContentSharingV2Template.__docgenInfo={description:"",methods:[],displayName:"ContentSharingV2Template"}},"./src/features/classification/constants.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{DK:()=>DOWNLOAD_CONTROL,Df:()=>DEFAULT_CLASSIFICATION_COLOR_ID,FJ:()=>CLASSIFICATION_COLOR_ID_5,FP:()=>CLASSIFICATION_COLOR_ID_1,Fu:()=>CLASSIFICATION_COLOR_ID_3,M8:()=>CLASSIFICATION_COLOR_ID_2,Ml:()=>CLASSIFICATION_COLOR_ID_4,Mr:()=>CLASSIFICATION_COLOR_ID_0,T5:()=>CLASSIFICATION_COLOR_ID_7,Uv:()=>SECURITY_CONTROLS_FORMAT,lC:()=>MANAGED_USERS_ACCESS_LEVEL,sk:()=>APP_RESTRICTION_MESSAGE_TYPE,t$:()=>ACCESS_POLICY_RESTRICTION,v9:()=>LIST_ACCESS_LEVEL,xP:()=>DEFAULT_MAX_APP_COUNT,y7:()=>CLASSIFICATION_COLOR_ID_6,zv:()=>SHARED_LINK_ACCESS_LEVEL});const DEFAULT_MAX_APP_COUNT=3,SECURITY_CONTROLS_FORMAT={FULL:"full",SHORT:"short",SHORT_WITH_BTN:"shortWithBtn"},ACCESS_POLICY_RESTRICTION={APP:"app",BOX_SIGN_REQUEST:"boxSignRequest",DOWNLOAD:"download",EXTERNAL_COLLAB:"externalCollab",FTP:"ftp",SHARED_LINK:"sharedLink",WATERMARK:"watermark"},DOWNLOAD_CONTROL={DESKTOP:"desktop",FTP:"ftp",MOBILE:"mobile",WEB:"web"},LIST_ACCESS_LEVEL={BLACKLIST:"blacklist",BLOCK:"block",WHITELIST:"whitelist"},MANAGED_USERS_ACCESS_LEVEL={OWNERS_AND_COOWNERS:"ownersCoOwners",OWNERS_COOWNERS_AND_EDITORS:"ownersCoOwnersEditors"},SHARED_LINK_ACCESS_LEVEL={COLLAB_AND_COMPANY_ONLY:"companyAndCollabOnly",COLLAB_ONLY:"collabOnly",PUBLIC:"public"},APP_RESTRICTION_MESSAGE_TYPE={DEFAULT:"default",WITH_APP_LIST:"withAppList",WITH_OVERFLOWN_APP_LIST:"withOverflownAppList"},CLASSIFICATION_COLOR_ID_0=0,CLASSIFICATION_COLOR_ID_1=1,CLASSIFICATION_COLOR_ID_2=2,CLASSIFICATION_COLOR_ID_3=3,CLASSIFICATION_COLOR_ID_4=4,CLASSIFICATION_COLOR_ID_5=5,CLASSIFICATION_COLOR_ID_6=6,CLASSIFICATION_COLOR_ID_7=7,DEFAULT_CLASSIFICATION_COLOR_ID=CLASSIFICATION_COLOR_ID_0},"./src/utils/datetime.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{ND:()=>isCurrentYear,Ne:()=>convertISOStringToUTCDate,PA:()=>isYesterday,cK:()=>isToday,fU:()=>formatTime,rD:()=>convertToMs,tY:()=>addTime,uX:()=>convertDateToUnixMidnightTime,vd:()=>isValidDate,wn:()=>isCurrentMonth,zL:()=>convertToDate});var lodash_isNaN__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/lodash/isNaN.js"),lodash_isNaN__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash_isNaN__WEBPACK_IMPORTED_MODULE_0__);const MILLISECONDS_PER_SECOND=1e3,MILLISECONDS_PER_DAY=86400*MILLISECONDS_PER_SECOND,MILLISECONDS_PER_MINUTE=60*MILLISECONDS_PER_SECOND,RE_ISO8601_DATE=/^(\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d{1,3})?)?((Z$)|(?:[+-](?:([0-2]\d$)|([0-2]\d(?:00|30)$)|([0-2]\d:(?:00|30)$))))$/,ISO8601_DATETIME=1,ISO8601_MILLISECONDS=2,ISO8601_TIMEZONE=3,ISO8601_Z_FMT=4,ISO8601_SHORT_FMT=5,ISO8601_MEDIUM_FMT=6,ISO8601_LONG_FMT=7;function convertToDate(dateValue){return dateValue instanceof Date?dateValue:new Date(dateValue)}function convertToMs(seconds){return seconds*MILLISECONDS_PER_SECOND}function isToday(dateValue){return(new Date).toDateString()===convertToDate(dateValue).toDateString()}function isYesterday(dateValue){return isToday(convertToDate(dateValue).getTime()+MILLISECONDS_PER_DAY)}function isCurrentMonth(dateValue){return(new Date).getMonth()===convertToDate(dateValue).getMonth()}function isCurrentYear(dateValue){return(new Date).getFullYear()===convertToDate(dateValue).getFullYear()}function formatTime(seconds){const h=Math.floor(seconds/3600),m=Math.floor(seconds%3600/60),s=Math.floor(seconds%3600%60),hour=h>0?`${h.toString()}:`:"",sec=s<10?`0${s.toString()}`:s.toString();let min=m.toString();return h>0&&m<10&&(min=`0${min}`),`${hour}${min}:${sec}`}function addTime(dateValue,timeToAdd){return dateValue instanceof Date?new Date(dateValue.getTime()+timeToAdd):dateValue+timeToAdd}function convertDateToUnixMidnightTime(date){return date.getTime()-date.getTimezoneOffset()*MILLISECONDS_PER_MINUTE}function isValidDate(date){return!lodash_isNaN__WEBPACK_IMPORTED_MODULE_0___default()(date.getTime())}function convertISOStringToUTCDate(isoString){const utcDate=new Date(function convertISOStringtoRFC3339String(isoString){if(RE_ISO8601_DATE.test(isoString)){const parseDate=isoString.split(RE_ISO8601_DATE);let dateTime=parseDate[ISO8601_DATETIME];const milliseconds=parseDate[ISO8601_MILLISECONDS],timeZone=parseDate[ISO8601_TIMEZONE];if(milliseconds||(dateTime+=".000"),parseDate[ISO8601_Z_FMT])return isoString;if(parseDate[ISO8601_SHORT_FMT])return`${dateTime+timeZone}:00`;if(parseDate[ISO8601_MEDIUM_FMT])return`${dateTime+timeZone.substr(0,3)}:${timeZone.substr(3)}`;if(parseDate[ISO8601_LONG_FMT])return isoString}return isoString}(isoString)),utcTime=utcDate.getTime(),timezoneOffsetInMins=utcDate.getTimezoneOffset();return new Date(utcTime+timezoneOffsetInMins*MILLISECONDS_PER_MINUTE)}}}]);