"use strict";(globalThis.webpackChunkbox_ui_elements=globalThis.webpackChunkbox_ui_elements||[]).push([[96786],{"./src/elements/content-sharing/stories/tests/ContentSharingV2-visual.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{DesktopVariant:()=>DesktopVariant,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__,withCollaborators:()=>withCollaborators,withModernization:()=>withModernization,withSharedLink:()=>withSharedLink});var storybook_test__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("storybook/test"),_utils_mocks_ContentSharingV2Mocks__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/elements/content-sharing/utils/__mocks__/ContentSharingV2Mocks.js");const withModernization={args:{api:_utils_mocks_ContentSharingV2Mocks__WEBPACK_IMPORTED_MODULE_1__.wI,enableModernizedComponents:!0},play:async({canvasElement})=>{const canvas=(0,storybook_test__WEBPACK_IMPORTED_MODULE_0__.within)(canvasElement),button=await canvas.findByRole("button",{name:"Open Unified Share Modal"});(0,storybook_test__WEBPACK_IMPORTED_MODULE_0__.expect)(button).toBeInTheDocument(),await storybook_test__WEBPACK_IMPORTED_MODULE_0__.userEvent.click(button),(0,storybook_test__WEBPACK_IMPORTED_MODULE_0__.expect)(storybook_test__WEBPACK_IMPORTED_MODULE_0__.screen.getByRole("heading",{name:"Share ‘Box Development Guide.pdf’"})).toBeVisible(),(0,storybook_test__WEBPACK_IMPORTED_MODULE_0__.expect)(storybook_test__WEBPACK_IMPORTED_MODULE_0__.screen.getByRole("combobox",{name:"Invite People"})).toBeVisible(),(0,storybook_test__WEBPACK_IMPORTED_MODULE_0__.expect)(storybook_test__WEBPACK_IMPORTED_MODULE_0__.screen.getByRole("switch",{name:"Shared link"})).toBeVisible()}},withSharedLink={args:{api:_utils_mocks_ContentSharingV2Mocks__WEBPACK_IMPORTED_MODULE_1__.Ur},play:async context=>{await withModernization.play(context),(0,storybook_test__WEBPACK_IMPORTED_MODULE_0__.expect)(storybook_test__WEBPACK_IMPORTED_MODULE_0__.screen.getByLabelText("Shared link URL")).toBeVisible(),(0,storybook_test__WEBPACK_IMPORTED_MODULE_0__.expect)(storybook_test__WEBPACK_IMPORTED_MODULE_0__.screen.getByRole("button",{name:"Link Settings"})).toBeVisible();const peopleWithTheLinkButton=storybook_test__WEBPACK_IMPORTED_MODULE_0__.screen.getByRole("button",{name:"People with the link"});(0,storybook_test__WEBPACK_IMPORTED_MODULE_0__.expect)(peopleWithTheLinkButton).toBeVisible(),(0,storybook_test__WEBPACK_IMPORTED_MODULE_0__.expect)(storybook_test__WEBPACK_IMPORTED_MODULE_0__.screen.getByRole("button",{name:"Can view and download"})).toBeVisible(),await storybook_test__WEBPACK_IMPORTED_MODULE_0__.userEvent.click(peopleWithTheLinkButton),(0,storybook_test__WEBPACK_IMPORTED_MODULE_0__.expect)(storybook_test__WEBPACK_IMPORTED_MODULE_0__.screen.getByRole("menuitemcheckbox",{name:/Invited people only/})).toHaveAttribute("aria-disabled","true")}},DesktopVariant={args:{api:_utils_mocks_ContentSharingV2Mocks__WEBPACK_IMPORTED_MODULE_1__.Ur,variant:"desktop"},play:async context=>{await withModernization.play(context),(0,storybook_test__WEBPACK_IMPORTED_MODULE_0__.expect)(storybook_test__WEBPACK_IMPORTED_MODULE_0__.screen.queryByRole("button",{name:"Close"})).not.toBeInTheDocument()}},withCollaborators={args:{api:_utils_mocks_ContentSharingV2Mocks__WEBPACK_IMPORTED_MODULE_1__.C3},play:async context=>{await withModernization.play(context),await(0,storybook_test__WEBPACK_IMPORTED_MODULE_0__.waitFor)((async()=>{const sharedWithAvatars=storybook_test__WEBPACK_IMPORTED_MODULE_0__.screen.getByRole("button",{name:"Shared with D R D"});(0,storybook_test__WEBPACK_IMPORTED_MODULE_0__.expect)(sharedWithAvatars).toBeVisible(),await storybook_test__WEBPACK_IMPORTED_MODULE_0__.userEvent.click(sharedWithAvatars),(0,storybook_test__WEBPACK_IMPORTED_MODULE_0__.expect)(storybook_test__WEBPACK_IMPORTED_MODULE_0__.screen.getByRole("link",{name:"Manage All"})).toBeVisible(),(0,storybook_test__WEBPACK_IMPORTED_MODULE_0__.expect)(storybook_test__WEBPACK_IMPORTED_MODULE_0__.screen.getByRole("grid",{name:"Collaborators"})).toBeVisible(),(0,storybook_test__WEBPACK_IMPORTED_MODULE_0__.expect)(storybook_test__WEBPACK_IMPORTED_MODULE_0__.screen.getByRole("row",{name:/Detective Parrot/})).toBeVisible(),(0,storybook_test__WEBPACK_IMPORTED_MODULE_0__.expect)(storybook_test__WEBPACK_IMPORTED_MODULE_0__.screen.getByRole("button",{name:"Done"})).toBeVisible()}))}},__WEBPACK_DEFAULT_EXPORT__={title:"Elements/ContentSharingV2/tests/visual-regression-tests",component:_utils_mocks_ContentSharingV2Mocks__WEBPACK_IMPORTED_MODULE_1__.eS},__namedExportsOrder=["withModernization","withSharedLink","DesktopVariant","withCollaborators"];withModernization.parameters={...withModernization.parameters,docs:{...withModernization.parameters?.docs,source:{originalSource:"{\n  args: {\n    api: mockApiWithoutSharedLink,\n    enableModernizedComponents: true\n  },\n  play: async ({\n    canvasElement\n  }) => {\n    const canvas = within(canvasElement);\n    const button = await canvas.findByRole('button', {\n      name: 'Open Unified Share Modal'\n    });\n    expect(button).toBeInTheDocument();\n    await userEvent.click(button);\n    expect(screen.getByRole('heading', {\n      name: 'Share ‘Box Development Guide.pdf’'\n    })).toBeVisible();\n    expect(screen.getByRole('combobox', {\n      name: 'Invite People'\n    })).toBeVisible();\n    expect(screen.getByRole('switch', {\n      name: 'Shared link'\n    })).toBeVisible();\n  }\n}",...withModernization.parameters?.docs?.source}}},withSharedLink.parameters={...withSharedLink.parameters,docs:{...withSharedLink.parameters?.docs,source:{originalSource:"{\n  args: {\n    api: mockApiWithSharedLink\n  },\n  play: async context => {\n    await withModernization.play(context);\n    expect(screen.getByLabelText('Shared link URL')).toBeVisible();\n    expect(screen.getByRole('button', {\n      name: 'Link Settings'\n    })).toBeVisible();\n    const peopleWithTheLinkButton = screen.getByRole('button', {\n      name: 'People with the link'\n    });\n    expect(peopleWithTheLinkButton).toBeVisible();\n    expect(screen.getByRole('button', {\n      name: 'Can view and download'\n    })).toBeVisible();\n    await userEvent.click(peopleWithTheLinkButton);\n    expect(screen.getByRole('menuitemcheckbox', {\n      name: /Invited people only/\n    })).toHaveAttribute('aria-disabled', 'true');\n  }\n}",...withSharedLink.parameters?.docs?.source}}},DesktopVariant.parameters={...DesktopVariant.parameters,docs:{...DesktopVariant.parameters?.docs,source:{originalSource:"{\n  args: {\n    api: mockApiWithSharedLink,\n    variant: 'desktop'\n  },\n  play: async context => {\n    await withModernization.play(context);\n    expect(screen.queryByRole('button', {\n      name: 'Close'\n    })).not.toBeInTheDocument();\n  }\n}",...DesktopVariant.parameters?.docs?.source}}},withCollaborators.parameters={...withCollaborators.parameters,docs:{...withCollaborators.parameters?.docs,source:{originalSource:"{\n  args: {\n    api: mockApiWithCollaborators\n  },\n  play: async context => {\n    await withModernization.play(context);\n    await waitFor(async () => {\n      const sharedWithAvatars = screen.getByRole('button', {\n        name: 'Shared with D R D'\n      });\n      expect(sharedWithAvatars).toBeVisible();\n      await userEvent.click(sharedWithAvatars);\n      expect(screen.getByRole('link', {\n        name: 'Manage All'\n      })).toBeVisible();\n      expect(screen.getByRole('grid', {\n        name: 'Collaborators'\n      })).toBeVisible();\n      expect(screen.getByRole('row', {\n        name: /Detective Parrot/\n      })).toBeVisible();\n      expect(screen.getByRole('button', {\n        name: 'Done'\n      })).toBeVisible();\n    });\n  }\n}",...withCollaborators.parameters?.docs?.source}}}}}]);