{"version":3,"file":"comparator.js","names":["TYPE_FILE","TYPE_FOLDER","SORT_DESC","FIELD_MODIFIED_AT","FIELD_INTERACTED_AT","FIELD_NAME","FIELD_SIZE","comparator","sortBy","sortDirection","cache","invert","a","b","itemA","get","itemB","itemAType","type","itemBType","itemAName","name","itemBName","itemADate","Date","parse","modified_at","itemBDate","itemAInteractedDate","interacted_at","itemBInteractedDate","itemASize","size","itemBSize","toLowerCase","Error"],"sources":["../../src/utils/comparator.js"],"sourcesContent":["/**\n * @flow\n * @file Function to sort item list\n * @author Box\n */\n\nimport {\n    TYPE_FILE,\n    TYPE_FOLDER,\n    SORT_DESC,\n    FIELD_MODIFIED_AT,\n    FIELD_INTERACTED_AT,\n    FIELD_NAME,\n    FIELD_SIZE,\n} from '../constants';\nimport type { SortBy, SortDirection, ItemType, BoxItem } from '../common/types/core';\nimport type APICache from './Cache';\n\n/**\n * Comparator function for sorting files and folders\n *\n * @param {string} sortBy field to sort by\n * @param {string} sortDirection desc or asc\n * @return {Function} comparator function\n */\nexport default function comparator(sortBy: SortBy, sortDirection: SortDirection, cache: APICache): Function {\n    const invert: number = sortDirection === SORT_DESC ? 1 : -1;\n    return (a: string, b: string): number => {\n        const itemA: BoxItem = cache.get(a);\n        const itemB: BoxItem = cache.get(b);\n\n        const itemAType: ItemType = itemA.type || TYPE_FILE;\n        const itemBType: ItemType = itemB.type || TYPE_FILE;\n        const itemAName: string = itemA.name || '';\n        const itemBName: string = itemB.name || '';\n        const itemADate: number = Date.parse(itemA.modified_at || '0');\n        const itemBDate: number = Date.parse(itemB.modified_at || '0');\n        const itemAInteractedDate: number = Date.parse(itemA.interacted_at || itemA.modified_at || '0');\n        const itemBInteractedDate: number = Date.parse(itemB.interacted_at || itemB.modified_at || '0');\n        const itemASize: number = itemA.size || 0;\n        const itemBSize: number = itemB.size || 0;\n\n        // If a and b are of the same type, then use sortBy\n        if (itemAType === itemBType) {\n            if (sortBy === FIELD_NAME) {\n                if (itemAName.toLowerCase() > itemBName.toLowerCase()) return -1 * invert;\n                if (itemAName.toLowerCase() < itemBName.toLowerCase()) return 1 * invert;\n            } else if (sortBy === FIELD_MODIFIED_AT) {\n                if (itemADate > itemBDate) return -1 * invert;\n                if (itemADate < itemBDate) return 1 * invert;\n            } else if (sortBy === FIELD_INTERACTED_AT) {\n                if (itemAInteractedDate > itemBInteractedDate) return -1 * invert;\n                if (itemAInteractedDate < itemBInteractedDate) return 1 * invert;\n            } else if (sortBy === FIELD_SIZE) {\n                if (itemASize > itemBSize) return -1 * invert;\n                if (itemASize < itemBSize) return 1 * invert;\n            } else {\n                // Should never reach here\n                throw new Error('Unsupported sort field!');\n            }\n\n            return 0;\n        }\n\n        // If a and b are of different types, then use type to sort\n        // Folder > File > WebLink\n        if (itemAType === TYPE_FOLDER) return -1;\n        if (itemBType === TYPE_FOLDER) return 1;\n        if (itemAType === TYPE_FILE) return -1;\n        if (itemBType === TYPE_FILE) return 1;\n\n        // Should never reach here\n        throw new Error('Error in sort comparator!');\n    };\n}\n"],"mappings":"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","ignoreList":[]}