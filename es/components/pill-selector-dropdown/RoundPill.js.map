{"version":3,"file":"RoundPill.js","names":["React","noop","classNames","X","LabelPill","Avatar","RemoveButton","_ref","onClick","rest","_objectWithoutProperties","_excluded","createElement","_extends","RoundPill","PureComponent","constructor","args","_defineProperty","avatarUrl","undefined","className","isSelected","isDisabled","hasWarning","isValid","props","onRemove","isMounted","setState","getAvatarUrl","getPillImageUrl","id","type","Promise","resolve","then","getAvatarUrlHandler","catch","componentDidMount","componentWillUnmount","render","isExternal","showAvatar","text","state","Pill","size","getStyles","Icon","Component","name","shouldShowExternal","Text","handleClickRemove"],"sources":["../../../src/components/pill-selector-dropdown/RoundPill.js"],"sourcesContent":["// @flow\nimport * as React from 'react';\nimport noop from 'lodash/noop';\nimport classNames from 'classnames';\nimport X from '../../icon/fill/X16';\n// $FlowFixMe this imports from a typescript file\nimport LabelPill from '../label-pill';\nimport Avatar from '../avatar';\n\nimport './RoundPill.scss';\n\ntype Props = {\n    className?: string,\n    /** Function to retrieve the image URL associated with a pill */\n    getPillImageUrl?: (data: { id: string | number, [key: string]: any }) => string | Promise<?string>,\n    hasWarning?: boolean,\n    id?: string | number,\n    isDisabled?: boolean,\n    isExternal?: boolean,\n    isSelected?: boolean,\n    isValid?: boolean,\n    onRemove: () => any,\n    showAvatar?: boolean,\n    text: string,\n    type?: string | null,\n};\n\ntype State = {\n    avatarUrl: ?string,\n};\n\nconst RemoveButton = ({ onClick, ...rest }: { onClick: () => any }) => (\n    <X {...rest} aria-hidden=\"true\" onClick={onClick} />\n);\n\nclass RoundPill extends React.PureComponent<Props, State> {\n    static defaultProps = {\n        isDisabled: false,\n        isSelected: false,\n        isValid: true,\n        hasWarning: false,\n        showAvatar: false,\n    };\n\n    state = {\n        avatarUrl: undefined,\n    };\n\n    isMounted: boolean = false;\n\n    getStyles = (): string => {\n        const { className, isSelected, isDisabled, hasWarning, isValid } = this.props;\n\n        return classNames('bdl-RoundPill', className, {\n            'bdl-RoundPill--selected': isSelected && !isDisabled,\n            'bdl-RoundPill--disabled': isDisabled,\n            'bdl-RoundPill--warning': hasWarning,\n            'bdl-RoundPill--error': !isValid,\n        });\n    };\n\n    handleClickRemove = () => {\n        const { isDisabled, onRemove } = this.props;\n        return isDisabled ? noop : onRemove();\n    };\n\n    /**\n     * Success handler for getting avatar url\n     *\n     * @param {string} [avatarUrl] the user avatar url\n     */\n    getAvatarUrlHandler = (avatarUrl: ?string) => {\n        if (this.isMounted) {\n            this.setState({\n                avatarUrl,\n            });\n        }\n    };\n\n    /**\n     * Gets the avatar URL for the user from the getPillImageUrl prop\n     *\n     * @return {void}\n     */\n    getAvatarUrl() {\n        const { getPillImageUrl, id, type } = this.props;\n        Promise.resolve(getPillImageUrl && id ? getPillImageUrl({ id, type }) : undefined)\n            .then(this.getAvatarUrlHandler)\n            .catch(() => {\n                // noop\n            });\n    }\n\n    componentDidMount() {\n        this.isMounted = true;\n        this.getAvatarUrl();\n    }\n\n    componentWillUnmount() {\n        this.isMounted = false;\n    }\n\n    render() {\n        const { id, isExternal, showAvatar, text } = this.props;\n        const { avatarUrl } = this.state;\n\n        return (\n            <LabelPill.Pill size=\"large\" className={this.getStyles()}>\n                {showAvatar ? (\n                    <LabelPill.Icon\n                        Component={Avatar}\n                        className=\"bdl-RoundPill-avatar\"\n                        avatarUrl={avatarUrl}\n                        id={id}\n                        isExternal={isExternal}\n                        name={text}\n                        size=\"small\"\n                        shouldShowExternal\n                    />\n                ) : null}\n                <LabelPill.Text className=\"bdl-RoundPill-text\">{text}</LabelPill.Text>\n                <LabelPill.Icon\n                    className=\"bdl-RoundPill-closeBtn\"\n                    Component={RemoveButton}\n                    onClick={this.handleClickRemove}\n                />\n            </LabelPill.Pill>\n        );\n    }\n}\n\nexport default RoundPill;\n"],"mappings":"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","ignoreList":[]}