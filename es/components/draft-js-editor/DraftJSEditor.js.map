{"version":3,"file":"DraftJSEditor.js","names":["React","FormattedMessage","classNames","uniqueId","Editor","Tooltip","commonMessages","OptionalFormattedMessage","createElement","className","optional","DraftJSEditor","Component","constructor","args","_defineProperty","editorState","onChange","props","onBlur","event","onReturn","inputProps","render","error","hideLabel","isDisabled","isRequired","label","description","onFocus","placeholder","handleBlur","handleChange","classes","a11yProps","role","ariaActiveDescendantID","ariaAutoComplete","ariaExpanded","ariaOwneeID","ariaMultiline","id","labelID","descriptionID","targetWrapperClassName","isShown","position","text","message","theme","_extends","ariaLabelledBy","ariaDescribedBy","handleReturn","readOnly","stripPastedStyles","isFocused"],"sources":["../../../src/components/draft-js-editor/DraftJSEditor.js"],"sourcesContent":["// @flow\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport classNames from 'classnames';\nimport uniqueId from 'lodash/uniqueId';\n\nimport { Editor } from 'draft-js';\nimport type { EditorState } from 'draft-js';\nimport 'draft-js/dist/Draft.css';\n\nimport Tooltip from '../tooltip';\n\nimport commonMessages from '../../common/messages';\nimport './DraftJSEditor.scss';\n\nconst OptionalFormattedMessage = () => (\n    <span className=\"bdl-Label-optional\">\n        (<FormattedMessage {...commonMessages.optional} />)\n    </span>\n);\ntype Props = {\n    description?: React.Node,\n    editorState: EditorState,\n    error?: ?Object,\n    hideLabel?: boolean,\n    inputProps: Object,\n    isDisabled?: boolean,\n    isRequired?: boolean,\n    label: React.Node,\n    onBlur: Function,\n    onChange: Function,\n    onFocus: Function,\n    onReturn?: Function,\n    placeholder?: string,\n};\n\nclass DraftJSEditor extends React.Component<Props> {\n    static defaultProps = {\n        inputProps: {},\n        isRequired: false,\n        isFocused: false,\n    };\n\n    /**\n     * Calls onChange handler passed in\n     * @param {EditorState} editorState The new/updated editor state\n     * @returns {void}\n     */\n    handleChange = (editorState: EditorState) => {\n        const { onChange } = this.props;\n\n        onChange(editorState);\n    };\n\n    handleBlur = (editorState: EditorState) => {\n        const { onBlur } = this.props;\n\n        onBlur(editorState);\n    };\n\n    /**\n     * Event handler which being passed to 'handleReturn' prop of DraftJSEditor\n     * This gives consumer the ability to handle return key event before DraftJSEditor handles it.\n     * @param {SyntheticKeyboardEvent} event\n     * @returns {string}\n     */\n    handleReturn = (event: SyntheticKeyboardEvent<>) => {\n        const { onReturn, inputProps } = this.props;\n\n        if (onReturn && !inputProps['aria-activedescendant']) {\n            // Return 'handled' tells DraftJS Editor to not handle return key event,\n            // return 'not-handled' tells DraftJS Editor to continue handle the return key event.\n            // We encapsulate this DraftJS Editor specific contract here, and use true/fase\n            // to indicate whether to let DraftJS Editor handle return event or not in the upper level.\n            return onReturn(event) ? 'handled' : 'not-handled';\n        }\n\n        return 'not-handled';\n    };\n\n    labelID = uniqueId('label');\n\n    descriptionID = uniqueId('description');\n\n    render() {\n        const {\n            editorState,\n            error,\n            hideLabel,\n            inputProps,\n            isDisabled,\n            isRequired,\n            label,\n            description,\n            onFocus,\n            placeholder,\n        } = this.props;\n\n        const { handleBlur, handleChange } = this;\n\n        const classes = classNames({\n            'draft-js-editor': true,\n            'is-disabled bdl-is-disabled': isDisabled,\n            'show-error': !!error,\n        });\n\n        let a11yProps = {};\n        if (inputProps.role) {\n            a11yProps = {\n                ariaActiveDescendantID: inputProps['aria-activedescendant'],\n                ariaAutoComplete: inputProps['aria-autocomplete'],\n                ariaExpanded: inputProps['aria-expanded'],\n                ariaOwneeID: inputProps['aria-owns'],\n                ariaMultiline: true,\n                role: 'textbox',\n            };\n        }\n\n        return (\n            <div className={classes}>\n                <span className={classNames('bdl-Label', { 'accessibility-hidden': hideLabel })} id={this.labelID}>\n                    {label}\n                    {!isRequired && <OptionalFormattedMessage />}\n                </span>\n                <span className=\"accessibility-hidden screenreader-description\" id={this.descriptionID}>\n                    {description}\n                </span>\n\n                <Tooltip\n                    targetWrapperClassName=\"bdl-DraftJSEditor-target\"\n                    isShown={!!error}\n                    position=\"bottom-left\"\n                    text={error ? error.message : ''}\n                    theme=\"error\"\n                >\n                    {/* need div so tooltip can set aria-describedby */}\n                    <div>\n                        <Editor\n                            {...a11yProps}\n                            ariaLabelledBy={this.labelID}\n                            ariaDescribedBy={this.descriptionID}\n                            editorState={editorState}\n                            handleReturn={this.handleReturn}\n                            onBlur={handleBlur}\n                            onChange={handleChange}\n                            onFocus={onFocus}\n                            placeholder={placeholder}\n                            readOnly={isDisabled}\n                            stripPastedStyles\n                        />\n                    </div>\n                </Tooltip>\n            </div>\n        );\n    }\n}\n\nexport default DraftJSEditor;\n"],"mappings":"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","ignoreList":[]}