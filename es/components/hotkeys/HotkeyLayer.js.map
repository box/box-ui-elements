{"version":3,"file":"HotkeyLayer.js","names":["React","Component","PropTypes","HotkeyRecord","HotkeyPropType","HotkeyService","Hotkeys","HotkeyHelpModal","HotkeyLayer","constructor","props","_defineProperty","isHelpModalOpen","setState","hotkeyService","getChildContext","hotkeyLayer","componentWillUnmount","destroyLayer","getHotkeyConfigs","configs","helpModalShortcut","enableHelpModal","key","handler","openHelpModal","render","children","className","createElement","isOpen","state","onRequestClose","closeHelpModal","node","string","arrayOf","bool","object"],"sources":["../../../src/components/hotkeys/HotkeyLayer.js"],"sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport HotkeyRecord, { HotkeyPropType } from './HotkeyRecord';\nimport HotkeyService from './HotkeyService';\n\nimport Hotkeys from './Hotkeys';\nimport HotkeyHelpModal from './HotkeyHelpModal'; // eslint-disable-line import/no-cycle\n\nimport './HotkeyLayer.scss';\n\nclass HotkeyLayer extends Component {\n    static propTypes = {\n        children: PropTypes.node,\n        className: PropTypes.string,\n        /** Array of hotkey configs, either in the specified shape, or instances of HotkeyRecord */\n        configs: PropTypes.arrayOf(HotkeyPropType),\n        /** Shortcut to trigger the help modal, if it's enabled */\n        helpModalShortcut: PropTypes.string,\n        enableHelpModal: PropTypes.bool,\n    };\n\n    static defaultProps = {\n        helpModalShortcut: '?',\n        enableHelpModal: false,\n    };\n\n    static contextTypes = {\n        hotkeyLayer: PropTypes.object,\n    };\n\n    static childContextTypes = {\n        hotkeyLayer: PropTypes.object,\n    };\n\n    constructor(props) {\n        super(props);\n\n        this.hotkeyService = new HotkeyService();\n    }\n\n    state = {\n        isHelpModalOpen: false,\n    };\n\n    getChildContext() {\n        return {\n            hotkeyLayer: this.hotkeyService,\n        };\n    }\n\n    componentWillUnmount() {\n        this.hotkeyService.destroyLayer();\n    }\n\n    getHotkeyConfigs() {\n        const { configs = [], helpModalShortcut, enableHelpModal } = this.props;\n\n        if (!enableHelpModal) {\n            return configs;\n        }\n\n        return [\n            new HotkeyRecord({\n                key: helpModalShortcut,\n                handler: () => this.openHelpModal(),\n            }),\n            ...configs,\n        ];\n    }\n\n    openHelpModal = () => {\n        this.setState({\n            isHelpModalOpen: true,\n        });\n    };\n\n    closeHelpModal = () => {\n        this.setState({\n            isHelpModalOpen: false,\n        });\n    };\n\n    render() {\n        const { children, className = '', enableHelpModal } = this.props;\n\n        return (\n            <Hotkeys configs={this.getHotkeyConfigs()}>\n                {enableHelpModal ? (\n                    <span className={`hotkey-layer ${className}`}>\n                        <HotkeyHelpModal isOpen={this.state.isHelpModalOpen} onRequestClose={this.closeHelpModal} />\n                        {children}\n                    </span>\n                ) : (\n                    children\n                )}\n            </Hotkeys>\n        );\n    }\n}\n\nexport default HotkeyLayer;\n"],"mappings":";;;AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC,OAAOC,SAAS,MAAM,YAAY;AAElC,OAAOC,YAAY,IAAIC,cAAc,QAAQ,gBAAgB;AAC7D,OAAOC,aAAa,MAAM,iBAAiB;AAE3C,OAAOC,OAAO,MAAM,WAAW;AAC/B,OAAOC,eAAe,MAAM,mBAAmB,CAAC,CAAC;;AAEjD,OAAO,oBAAoB;AAE3B,MAAMC,WAAW,SAASP,SAAS,CAAC;EAwBhCQ,WAAWA,CAACC,KAAK,EAAE;IACf,KAAK,CAACA,KAAK,CAAC;IAACC,eAAA,gBAKT;MACJC,eAAe,EAAE;IACrB,CAAC;IAAAD,eAAA,wBA4Be,MAAM;MAClB,IAAI,CAACE,QAAQ,CAAC;QACVD,eAAe,EAAE;MACrB,CAAC,CAAC;IACN,CAAC;IAAAD,eAAA,yBAEgB,MAAM;MACnB,IAAI,CAACE,QAAQ,CAAC;QACVD,eAAe,EAAE;MACrB,CAAC,CAAC;IACN,CAAC;IA3CG,IAAI,CAACE,aAAa,GAAG,IAAIT,aAAa,CAAC,CAAC;EAC5C;EAMAU,eAAeA,CAAA,EAAG;IACd,OAAO;MACHC,WAAW,EAAE,IAAI,CAACF;IACtB,CAAC;EACL;EAEAG,oBAAoBA,CAAA,EAAG;IACnB,IAAI,CAACH,aAAa,CAACI,YAAY,CAAC,CAAC;EACrC;EAEAC,gBAAgBA,CAAA,EAAG;IACf,MAAM;MAAEC,OAAO,GAAG,EAAE;MAAEC,iBAAiB;MAAEC;IAAgB,CAAC,GAAG,IAAI,CAACZ,KAAK;IAEvE,IAAI,CAACY,eAAe,EAAE;MAClB,OAAOF,OAAO;IAClB;IAEA,OAAO,CACH,IAAIjB,YAAY,CAAC;MACboB,GAAG,EAAEF,iBAAiB;MACtBG,OAAO,EAAEA,CAAA,KAAM,IAAI,CAACC,aAAa,CAAC;IACtC,CAAC,CAAC,EACF,GAAGL,OAAO,CACb;EACL;EAcAM,MAAMA,CAAA,EAAG;IACL,MAAM;MAAEC,QAAQ;MAAEC,SAAS,GAAG,EAAE;MAAEN;IAAgB,CAAC,GAAG,IAAI,CAACZ,KAAK;IAEhE,oBACIV,KAAA,CAAA6B,aAAA,CAACvB,OAAO;MAACc,OAAO,EAAE,IAAI,CAACD,gBAAgB,CAAC;IAAE,GACrCG,eAAe,gBACZtB,KAAA,CAAA6B,aAAA;MAAMD,SAAS,EAAE,gBAAgBA,SAAS;IAAG,gBACzC5B,KAAA,CAAA6B,aAAA,CAACtB,eAAe;MAACuB,MAAM,EAAE,IAAI,CAACC,KAAK,CAACnB,eAAgB;MAACoB,cAAc,EAAE,IAAI,CAACC;IAAe,CAAE,CAAC,EAC3FN,QACC,CAAC,GAEPA,QAEC,CAAC;EAElB;AACJ;AAAChB,eAAA,CAxFKH,WAAW,eACM;EACfmB,QAAQ,EAAEzB,SAAS,CAACgC,IAAI;EACxBN,SAAS,EAAE1B,SAAS,CAACiC,MAAM;EAC3B;EACAf,OAAO,EAAElB,SAAS,CAACkC,OAAO,CAAChC,cAAc,CAAC;EAC1C;EACAiB,iBAAiB,EAAEnB,SAAS,CAACiC,MAAM;EACnCb,eAAe,EAAEpB,SAAS,CAACmC;AAC/B,CAAC;AAAA1B,eAAA,CATCH,WAAW,kBAWS;EAClBa,iBAAiB,EAAE,GAAG;EACtBC,eAAe,EAAE;AACrB,CAAC;AAAAX,eAAA,CAdCH,WAAW,kBAgBS;EAClBQ,WAAW,EAAEd,SAAS,CAACoC;AAC3B,CAAC;AAAA3B,eAAA,CAlBCH,WAAW,uBAoBc;EACvBQ,WAAW,EAAEd,SAAS,CAACoC;AAC3B,CAAC;AAoEL,eAAe9B,WAAW","ignoreList":[]}