{"version":3,"file":"TabView.js","names":["React","classNames","TabViewPrimitive","TAB_KEY","TAB_PANEL_ROLE","TabView","Component","constructor","props","_defineProperty","document","activeElement","setState","focusedIndex","defaultSelectedIndex","selectedIndex","state","onTabSelect","index","event","getActiveDocElement","isTabPanelFocused","getAttribute","isTabPanelFocusedWithTabKey","key","showOutline","componentDidUpdate","prevProps","resetActiveTab","render","children","className","isDynamic","createElement","onKeyUp","handleKeyUp","onTabFocus","handleOnTabFocus","handleOnTabSelect","resetFocusedTab"],"sources":["../../../src/components/tab-view/TabView.js"],"sourcesContent":["// @flow\nimport * as React from 'react';\nimport classNames from 'classnames';\n\nimport TabViewPrimitive, { TAB_KEY, TAB_PANEL_ROLE } from './TabViewPrimitive';\n\ntype Props = {\n    children: React.Node,\n    className?: string,\n    defaultSelectedIndex: number,\n    isDynamic?: boolean,\n    onTabSelect?: (selectedIndex: number) => void,\n};\n\ntype State = {\n    focusedIndex: number,\n    selectedIndex: number,\n    showOutline: boolean,\n};\n\nclass TabView extends React.Component<Props, State> {\n    static defaultProps = {\n        defaultSelectedIndex: 0,\n        isDynamic: false,\n    };\n\n    constructor(props: Props) {\n        super(props);\n\n        this.state = {\n            focusedIndex: props.defaultSelectedIndex,\n            showOutline: false,\n            selectedIndex: props.defaultSelectedIndex,\n        };\n    }\n\n    componentDidUpdate(prevProps: Props) {\n        const { defaultSelectedIndex } = this.props;\n        if (prevProps.defaultSelectedIndex !== defaultSelectedIndex) {\n            this.resetActiveTab();\n        }\n    }\n\n    getActiveDocElement = () => document.activeElement;\n\n    resetActiveTab = () => {\n        this.setState({\n            focusedIndex: this.props.defaultSelectedIndex,\n            selectedIndex: this.props.defaultSelectedIndex,\n        });\n    };\n\n    resetFocusedTab = () => {\n        this.setState({ focusedIndex: this.state.selectedIndex });\n    };\n\n    handleOnTabSelect = (selectedIndex: number): void =>\n        this.setState({ selectedIndex }, () => {\n            const { onTabSelect } = this.props;\n\n            if (onTabSelect) {\n                onTabSelect(this.state.selectedIndex);\n            }\n        });\n\n    handleOnTabFocus = (index: number) => this.setState({ focusedIndex: index });\n\n    // By default the outline is set to none when tabpanel is focused. This is so that\n    // when clicking into it, it doesn't outline it.\n    // However, for accessibility, when tabbing into and out of the tabpanel, the focus\n    // is pretty important to show the user what is being focused. By adding this class,\n    // we can specify an outline for the focus pseudo state.\n    handleKeyUp = (event: SyntheticKeyboardEvent<>) => {\n        const activeElement = this.getActiveDocElement();\n        const isTabPanelFocused = activeElement && activeElement.getAttribute('role') === TAB_PANEL_ROLE;\n        const isTabPanelFocusedWithTabKey = isTabPanelFocused && event.key === TAB_KEY;\n\n        if (isTabPanelFocusedWithTabKey) {\n            this.setState({ showOutline: true });\n        } else if (!isTabPanelFocused && this.state.showOutline) {\n            this.setState({ showOutline: false });\n        }\n    };\n\n    render() {\n        const { children, className, isDynamic } = this.props;\n        const { focusedIndex, selectedIndex, showOutline } = this.state;\n\n        return (\n            <TabViewPrimitive\n                className={classNames(className, {\n                    'show-outline': showOutline,\n                })}\n                focusedIndex={focusedIndex}\n                isDynamic={isDynamic}\n                onKeyUp={this.handleKeyUp}\n                onTabFocus={this.handleOnTabFocus}\n                onTabSelect={this.handleOnTabSelect}\n                resetActiveTab={this.resetActiveTab}\n                resetFocusedTab={this.resetFocusedTab}\n                selectedIndex={selectedIndex}\n            >\n                {children}\n            </TabViewPrimitive>\n        );\n    }\n}\n\nexport default TabView;\n"],"mappings":";;;AACA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAC9B,OAAOC,UAAU,MAAM,YAAY;AAEnC,OAAOC,gBAAgB,IAAIC,OAAO,EAAEC,cAAc,QAAQ,oBAAoB;AAgB9E,MAAMC,OAAO,SAASL,KAAK,CAACM,SAAS,CAAe;EAMhDC,WAAWA,CAACC,KAAY,EAAE;IACtB,KAAK,CAACA,KAAK,CAAC;IAACC,eAAA,8BAgBK,MAAMC,QAAQ,CAACC,aAAa;IAAAF,eAAA,yBAEjC,MAAM;MACnB,IAAI,CAACG,QAAQ,CAAC;QACVC,YAAY,EAAE,IAAI,CAACL,KAAK,CAACM,oBAAoB;QAC7CC,aAAa,EAAE,IAAI,CAACP,KAAK,CAACM;MAC9B,CAAC,CAAC;IACN,CAAC;IAAAL,eAAA,0BAEiB,MAAM;MACpB,IAAI,CAACG,QAAQ,CAAC;QAAEC,YAAY,EAAE,IAAI,CAACG,KAAK,CAACD;MAAc,CAAC,CAAC;IAC7D,CAAC;IAAAN,eAAA,4BAEoBM,aAAqB,IACtC,IAAI,CAACH,QAAQ,CAAC;MAAEG;IAAc,CAAC,EAAE,MAAM;MACnC,MAAM;QAAEE;MAAY,CAAC,GAAG,IAAI,CAACT,KAAK;MAElC,IAAIS,WAAW,EAAE;QACbA,WAAW,CAAC,IAAI,CAACD,KAAK,CAACD,aAAa,CAAC;MACzC;IACJ,CAAC,CAAC;IAAAN,eAAA,2BAEcS,KAAa,IAAK,IAAI,CAACN,QAAQ,CAAC;MAAEC,YAAY,EAAEK;IAAM,CAAC,CAAC;IAE5E;IACA;IACA;IACA;IACA;IAAAT,eAAA,sBACeU,KAA+B,IAAK;MAC/C,MAAMR,aAAa,GAAG,IAAI,CAACS,mBAAmB,CAAC,CAAC;MAChD,MAAMC,iBAAiB,GAAGV,aAAa,IAAIA,aAAa,CAACW,YAAY,CAAC,MAAM,CAAC,KAAKlB,cAAc;MAChG,MAAMmB,2BAA2B,GAAGF,iBAAiB,IAAIF,KAAK,CAACK,GAAG,KAAKrB,OAAO;MAE9E,IAAIoB,2BAA2B,EAAE;QAC7B,IAAI,CAACX,QAAQ,CAAC;UAAEa,WAAW,EAAE;QAAK,CAAC,CAAC;MACxC,CAAC,MAAM,IAAI,CAACJ,iBAAiB,IAAI,IAAI,CAACL,KAAK,CAACS,WAAW,EAAE;QACrD,IAAI,CAACb,QAAQ,CAAC;UAAEa,WAAW,EAAE;QAAM,CAAC,CAAC;MACzC;IACJ,CAAC;IArDG,IAAI,CAACT,KAAK,GAAG;MACTH,YAAY,EAAEL,KAAK,CAACM,oBAAoB;MACxCW,WAAW,EAAE,KAAK;MAClBV,aAAa,EAAEP,KAAK,CAACM;IACzB,CAAC;EACL;EAEAY,kBAAkBA,CAACC,SAAgB,EAAE;IACjC,MAAM;MAAEb;IAAqB,CAAC,GAAG,IAAI,CAACN,KAAK;IAC3C,IAAImB,SAAS,CAACb,oBAAoB,KAAKA,oBAAoB,EAAE;MACzD,IAAI,CAACc,cAAc,CAAC,CAAC;IACzB;EACJ;EA2CAC,MAAMA,CAAA,EAAG;IACL,MAAM;MAAEC,QAAQ;MAAEC,SAAS;MAAEC;IAAU,CAAC,GAAG,IAAI,CAACxB,KAAK;IACrD,MAAM;MAAEK,YAAY;MAAEE,aAAa;MAAEU;IAAY,CAAC,GAAG,IAAI,CAACT,KAAK;IAE/D,oBACIhB,KAAA,CAAAiC,aAAA,CAAC/B,gBAAgB;MACb6B,SAAS,EAAE9B,UAAU,CAAC8B,SAAS,EAAE;QAC7B,cAAc,EAAEN;MACpB,CAAC,CAAE;MACHZ,YAAY,EAAEA,YAAa;MAC3BmB,SAAS,EAAEA,SAAU;MACrBE,OAAO,EAAE,IAAI,CAACC,WAAY;MAC1BC,UAAU,EAAE,IAAI,CAACC,gBAAiB;MAClCpB,WAAW,EAAE,IAAI,CAACqB,iBAAkB;MACpCV,cAAc,EAAE,IAAI,CAACA,cAAe;MACpCW,eAAe,EAAE,IAAI,CAACA,eAAgB;MACtCxB,aAAa,EAAEA;IAAc,GAE5Be,QACa,CAAC;EAE3B;AACJ;AAACrB,eAAA,CAtFKJ,OAAO,kBACa;EAClBS,oBAAoB,EAAE,CAAC;EACvBkB,SAAS,EAAE;AACf,CAAC;AAoFL,eAAe3B,OAAO","ignoreList":[]}