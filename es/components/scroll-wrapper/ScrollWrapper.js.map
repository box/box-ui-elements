{"version":3,"file":"ScrollWrapper.js","names":["React","classNames","noop","throttle","ScrollWrapper","Component","constructor","props","_defineProperty","shouldShowTopScrollShadow","shouldShowBottomScrollShadow","newState","getScrollShadowState","setState","scrollRef","addEventListener","throttledOnContentScroll","observer","observe","attributes","childlist","subtree","scrollTop","scrollHeight","clientHeight","onContentScroll","MutationObserver","componentWillUnmount","disconnect","removeEventListener","render","_this$props","children","className","scrollRefFn","shadowSize","rest","_objectWithoutProperties","_excluded","state","classes","createElement","_extends","onScroll","ref","el"],"sources":["../../../src/components/scroll-wrapper/ScrollWrapper.js"],"sourcesContent":["// @flow\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport noop from 'lodash/noop';\nimport throttle from 'lodash/throttle';\n\nimport './ScrollWrapper.scss';\n\ntype Props = {\n    /** Contents for this element */\n    children: React.Node,\n    /** Optional class name(s) to pass thru to the component */\n    className?: string,\n    /** Optional function to get the scrollRef in parent components */\n    scrollRefFn: (?HTMLElement) => void,\n    /** Optional prop to set the shadow size, like background-size ('cover' or 'contain') */\n    shadowSize: 'cover' | 'contain',\n};\n\ntype State = {\n    shouldShowBottomScrollShadow: boolean,\n    shouldShowTopScrollShadow: boolean,\n};\n\nclass ScrollWrapper extends React.Component<Props, State> {\n    static defaultProps = {\n        scrollRefFn: noop,\n        shadowSize: 'cover',\n    };\n\n    state = {\n        shouldShowTopScrollShadow: false,\n        shouldShowBottomScrollShadow: false,\n    };\n\n    constructor(props: Props) {\n        super(props);\n\n        this.observer = new MutationObserver(this.throttledOnContentScroll);\n    }\n\n    componentDidMount = () => {\n        const newState = this.getScrollShadowState();\n        this.setState(newState);\n\n        if (this.scrollRef) {\n            this.scrollRef.addEventListener('transitionend', this.throttledOnContentScroll);\n\n            // Apparently, flow only allows for one truthy check per command, so I have to either:\n            // 1) duplicate this check per call, or\n            // 2) nest if checks (_slightly more performant_)\n            if (this.scrollRef) {\n                this.observer.observe(this.scrollRef, {\n                    attributes: true,\n                    childlist: true,\n                    subtree: true,\n                });\n            }\n        }\n    };\n\n    componentWillUnmount() {\n        this.observer.disconnect();\n\n        if (this.scrollRef) {\n            this.scrollRef.removeEventListener('transitionend', this.throttledOnContentScroll);\n        }\n    }\n\n    onContentScroll = (): void => {\n        const newState = this.getScrollShadowState();\n        this.setState(newState);\n    };\n\n    getScrollShadowState = () => {\n        const { scrollTop, scrollHeight, clientHeight } = this.scrollRef || {};\n        const newState = {};\n\n        if (scrollTop > 0 && scrollTop < scrollHeight - clientHeight) {\n            newState.shouldShowTopScrollShadow = true;\n            newState.shouldShowBottomScrollShadow = true;\n        }\n\n        if (scrollTop === 0) {\n            newState.shouldShowTopScrollShadow = false;\n        }\n\n        if (scrollTop < scrollHeight - clientHeight) {\n            newState.shouldShowBottomScrollShadow = true;\n        }\n\n        if (scrollTop === scrollHeight - clientHeight) {\n            newState.shouldShowBottomScrollShadow = false;\n        }\n\n        return newState;\n    };\n\n    observer: MutationObserver;\n\n    scrollRef: ?HTMLDivElement = null;\n\n    // Throttle to 10 fps\n    throttledOnContentScroll = throttle(this.onContentScroll, 100);\n\n    render() {\n        const { children, className = '', scrollRefFn, shadowSize, ...rest } = this.props;\n        const { shouldShowTopScrollShadow, shouldShowBottomScrollShadow } = this.state;\n\n        const classes = classNames(`scroll-container`, className, {\n            'is-showing-top-shadow': shouldShowTopScrollShadow,\n            'is-showing-bottom-shadow': shouldShowBottomScrollShadow,\n        });\n\n        return (\n            <div className={classes} {...rest}>\n                <div\n                    className={classNames('scroll-wrap-container', `style--${shadowSize}`)}\n                    onScroll={this.throttledOnContentScroll}\n                    ref={el => {\n                        this.scrollRef = el;\n                        scrollRefFn(el);\n                    }}\n                >\n                    {children}\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default ScrollWrapper;\n"],"mappings":"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","ignoreList":[]}