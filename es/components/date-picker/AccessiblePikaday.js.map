{"version":3,"file":"AccessiblePikaday.js","names":["Pikaday","AccessiblePikaday","constructor","options","_defineProperty","hide","event","isVisible","datePickerButtonEl","contains","target","el","currentFocusEl","document","activeElement","accessibleFieldEl","tabIndex","focus","classList","add","body","appendChild","addEventListener","handleBlur","show","handleClickOutside","adjustPosition","removeEventListener","destroy"],"sources":["../../../src/components/date-picker/AccessiblePikaday.ts"],"sourcesContent":["import Pikaday, { PikadayOptions } from 'pikaday';\n\nexport interface AccessiblePikadayOptions extends PikadayOptions {\n    accessibleFieldEl?: HTMLElement | null | undefined;\n    datePickerButtonEl?: HTMLElement | null | undefined;\n}\n\n// An extended version of Pikaday to work when `isAccessible` prop is `true`\nclass AccessiblePikaday extends Pikaday {\n    accessibleFieldEl: HTMLElement | null | undefined;\n\n    datePickerButtonEl: HTMLElement | null | undefined;\n\n    constructor(options: AccessiblePikadayOptions) {\n        super(options);\n        this.accessibleFieldEl = options.accessibleFieldEl;\n        this.datePickerButtonEl = options.datePickerButtonEl;\n\n        // Override behavior as if `options.field` and `options.bound` were set.\n        // See https://github.com/Pikaday/Pikaday/blob/master/pikaday.js#L671\n        //     https://github.com/Pikaday/Pikaday/blob/master/pikaday.js#L695-L703\n        if (this.accessibleFieldEl) {\n            this.el.classList.add('is-bound');\n            document.body.appendChild(this.el);\n\n            this.accessibleFieldEl.addEventListener('blur', this.handleBlur);\n\n            this.hide();\n        }\n    }\n\n    handleBlur = () => {\n        this.hide();\n    };\n\n    handleClickOutside = (event: MouseEvent) => {\n        if (\n            this.isVisible() &&\n            this.datePickerButtonEl &&\n            this.datePickerButtonEl.contains(event.target as HTMLElement)\n        ) {\n            return;\n        }\n\n        if (this.isVisible() && !this.el.contains(event.target as HTMLElement)) {\n            this.hide();\n\n            const currentFocusEl = document.activeElement as HTMLElement;\n            if (this.accessibleFieldEl && currentFocusEl && currentFocusEl.tabIndex < 0) {\n                this.accessibleFieldEl.focus();\n            }\n        }\n    };\n\n    show() {\n        super.show();\n        if (this.accessibleFieldEl) {\n            document.addEventListener('click', this.handleClickOutside, true);\n            this.adjustPosition();\n        }\n    }\n\n    hide() {\n        super.hide();\n        if (this.accessibleFieldEl) {\n            document.removeEventListener('click', this.handleClickOutside);\n        }\n    }\n\n    destroy() {\n        super.destroy();\n        if (this.accessibleFieldEl) {\n            this.accessibleFieldEl.removeEventListener('blur', this.handleBlur);\n            document.removeEventListener('click', this.handleClickOutside);\n        }\n    }\n}\n\nexport default AccessiblePikaday;\n"],"mappings":";;;AAAA,OAAOA,OAAO,MAA0B,SAAS;AAOjD;AACA,MAAMC,iBAAiB,SAASD,OAAO,CAAC;EAKpCE,WAAWA,CAACC,OAAiC,EAAE;IAC3C,KAAK,CAACA,OAAO,CAAC;IAACC,eAAA,qBAiBN,MAAM;MACf,IAAI,CAACC,IAAI,CAAC,CAAC;IACf,CAAC;IAAAD,eAAA,6BAEqBE,KAAiB,IAAK;MACxC,IACI,IAAI,CAACC,SAAS,CAAC,CAAC,IAChB,IAAI,CAACC,kBAAkB,IACvB,IAAI,CAACA,kBAAkB,CAACC,QAAQ,CAACH,KAAK,CAACI,MAAqB,CAAC,EAC/D;QACE;MACJ;MAEA,IAAI,IAAI,CAACH,SAAS,CAAC,CAAC,IAAI,CAAC,IAAI,CAACI,EAAE,CAACF,QAAQ,CAACH,KAAK,CAACI,MAAqB,CAAC,EAAE;QACpE,IAAI,CAACL,IAAI,CAAC,CAAC;QAEX,MAAMO,cAAc,GAAGC,QAAQ,CAACC,aAA4B;QAC5D,IAAI,IAAI,CAACC,iBAAiB,IAAIH,cAAc,IAAIA,cAAc,CAACI,QAAQ,GAAG,CAAC,EAAE;UACzE,IAAI,CAACD,iBAAiB,CAACE,KAAK,CAAC,CAAC;QAClC;MACJ;IACJ,CAAC;IArCG,IAAI,CAACF,iBAAiB,GAAGZ,OAAO,CAACY,iBAAiB;IAClD,IAAI,CAACP,kBAAkB,GAAGL,OAAO,CAACK,kBAAkB;;IAEpD;IACA;IACA;IACA,IAAI,IAAI,CAACO,iBAAiB,EAAE;MACxB,IAAI,CAACJ,EAAE,CAACO,SAAS,CAACC,GAAG,CAAC,UAAU,CAAC;MACjCN,QAAQ,CAACO,IAAI,CAACC,WAAW,CAAC,IAAI,CAACV,EAAE,CAAC;MAElC,IAAI,CAACI,iBAAiB,CAACO,gBAAgB,CAAC,MAAM,EAAE,IAAI,CAACC,UAAU,CAAC;MAEhE,IAAI,CAAClB,IAAI,CAAC,CAAC;IACf;EACJ;EAyBAmB,IAAIA,CAAA,EAAG;IACH,KAAK,CAACA,IAAI,CAAC,CAAC;IACZ,IAAI,IAAI,CAACT,iBAAiB,EAAE;MACxBF,QAAQ,CAACS,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAACG,kBAAkB,EAAE,IAAI,CAAC;MACjE,IAAI,CAACC,cAAc,CAAC,CAAC;IACzB;EACJ;EAEArB,IAAIA,CAAA,EAAG;IACH,KAAK,CAACA,IAAI,CAAC,CAAC;IACZ,IAAI,IAAI,CAACU,iBAAiB,EAAE;MACxBF,QAAQ,CAACc,mBAAmB,CAAC,OAAO,EAAE,IAAI,CAACF,kBAAkB,CAAC;IAClE;EACJ;EAEAG,OAAOA,CAAA,EAAG;IACN,KAAK,CAACA,OAAO,CAAC,CAAC;IACf,IAAI,IAAI,CAACb,iBAAiB,EAAE;MACxB,IAAI,CAACA,iBAAiB,CAACY,mBAAmB,CAAC,MAAM,EAAE,IAAI,CAACJ,UAAU,CAAC;MACnEV,QAAQ,CAACc,mBAAmB,CAAC,OAAO,EAAE,IAAI,CAACF,kBAAkB,CAAC;IAClE;EACJ;AACJ;AAEA,eAAexB,iBAAiB","ignoreList":[]}