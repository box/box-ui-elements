{"version":3,"file":"useShowOne.js","names":["React","makeUseShowOne","targetingApis","shown","useShowOne","useTargetingApi","index","canShow","onShow","onClose","onComplete","useCallback","map","targetingApi"],"sources":["../../../src/features/targeting/useShowOne.js"],"sourcesContent":["// @flow\nimport * as React from 'react';\nimport { type UseTargetingApi, type TargetingApi } from './types';\n\nfunction makeUseShowOne(targetingApis: Array<UseTargetingApi>): Array<UseTargetingApi> {\n    let shown: number | null = null;\n\n    function useShowOne(useTargetingApi: UseTargetingApi, index: number): TargetingApi {\n        const { canShow, onShow, onClose, onComplete } = useTargetingApi();\n\n        return {\n            canShow: (shown === null || shown === index) && canShow,\n            onShow: React.useCallback(() => {\n                if (shown === null && canShow) {\n                    shown = index;\n                    onShow();\n                }\n            }, [canShow, index, onShow]),\n            onClose,\n            onComplete,\n        };\n    }\n\n    return targetingApis.map((targetingApi, index) => {\n        return () => useShowOne(targetingApi, index);\n    });\n}\n\nexport default makeUseShowOne;\n"],"mappings":"AACA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAG9B,SAASC,cAAcA,CAACC,aAAqC,EAA0B;EACnF,IAAIC,KAAoB,GAAG,IAAI;EAE/B,SAASC,UAAUA,CAACC,eAAgC,EAAEC,KAAa,EAAgB;IAC/E,MAAM;MAAEC,OAAO;MAAEC,MAAM;MAAEC,OAAO;MAAEC;IAAW,CAAC,GAAGL,eAAe,CAAC,CAAC;IAElE,OAAO;MACHE,OAAO,EAAE,CAACJ,KAAK,KAAK,IAAI,IAAIA,KAAK,KAAKG,KAAK,KAAKC,OAAO;MACvDC,MAAM,EAAER,KAAK,CAACW,WAAW,CAAC,MAAM;QAC5B,IAAIR,KAAK,KAAK,IAAI,IAAII,OAAO,EAAE;UAC3BJ,KAAK,GAAGG,KAAK;UACbE,MAAM,CAAC,CAAC;QACZ;MACJ,CAAC,EAAE,CAACD,OAAO,EAAED,KAAK,EAAEE,MAAM,CAAC,CAAC;MAC5BC,OAAO;MACPC;IACJ,CAAC;EACL;EAEA,OAAOR,aAAa,CAACU,GAAG,CAAC,CAACC,YAAY,EAAEP,KAAK,KAAK;IAC9C,OAAO,MAAMF,UAAU,CAACS,YAAY,EAAEP,KAAK,CAAC;EAChD,CAAC,CAAC;AACN;AAEA,eAAeL,cAAc","ignoreList":[]}