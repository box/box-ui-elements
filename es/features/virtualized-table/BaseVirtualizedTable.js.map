{"version":3,"file":"BaseVirtualizedTable.js","names":["React","noop","classNames","Table","DEFAULT_PAGE_SIZE","VIRTUALIZED_TABLE_DEFAULTS","loadingRowRenderer","HEADER_HEIGHT","ROW_HEIGHT","TAB_INDEX","handleSort","sortParams","sort","event","currentTarget","type","blur","BaseVirtualizedTable","PureComponent","render","_this$props","props","children","className","isLoading","loadingRowCount","rowData","rowGetter","rowRenderer","tableRef","rest","_objectWithoutProperties","_excluded","displayRowData","Array","fill","tableRowRenderer","getRow","index","createElement","_extends","ref","headerHeight","rowCount","length","rowHeight","tabIndex","_defineProperty"],"sources":["../../../src/features/virtualized-table/BaseVirtualizedTable.js"],"sourcesContent":["// @flow\nimport * as React from 'react';\nimport noop from 'lodash/noop';\nimport classNames from 'classnames';\nimport { Table } from '@box/react-virtualized/dist/es/Table/index';\nimport { DEFAULT_PAGE_SIZE } from '../../constants';\nimport { VIRTUALIZED_TABLE_DEFAULTS } from './constants';\nimport loadingRowRenderer from '../virtualized-table-renderers/loadingRowRenderer';\nimport type { SortParams } from './flowTypes';\nimport type { RowRendererParams } from '../virtualized-table-renderers';\n\nconst { HEADER_HEIGHT, ROW_HEIGHT, TAB_INDEX } = VIRTUALIZED_TABLE_DEFAULTS;\n\ntype SortHandler = SortParams => void;\n\ntype Props = {\n    children: React.Node,\n    className?: string,\n    height: number,\n    isLoading?: boolean,\n    loadingRowCount?: number,\n    rowData: Array<Object>,\n    rowGetter?: ({ index: number }) => any,\n    rowRenderer?: RowRendererParams,\n    sort?: SortHandler,\n    tableRef?: (ref: ?React.Ref<typeof Table>) => void,\n    width: number,\n};\n\nconst handleSort = (sortParams: SortParams, sort?: SortHandler = noop) => {\n    const { event } = sortParams;\n    const { currentTarget, type }: any = event || {};\n\n    // Prevent header from remaining focused when triggered with mouse\n    if (type === 'click' && currentTarget && currentTarget.blur) {\n        currentTarget.blur();\n    }\n    sort(sortParams);\n};\n\nclass BaseVirtualizedTable extends React.PureComponent<Props> {\n    static defaultProps = {\n        isLoading: false,\n        loadingRowCount: DEFAULT_PAGE_SIZE,\n    };\n\n    render() {\n        const {\n            children,\n            className,\n            isLoading,\n            loadingRowCount,\n            rowData,\n            rowGetter,\n            rowRenderer,\n            sort,\n            tableRef,\n            ...rest\n        } = this.props;\n\n        const displayRowData = isLoading ? Array(loadingRowCount).fill({}) : rowData;\n        const tableRowRenderer = isLoading ? loadingRowRenderer : rowRenderer;\n\n        const getRow = rowGetter || (({ index }) => displayRowData[index]);\n\n        return (\n            <Table\n                ref={tableRef}\n                className={classNames('bdl-VirtualizedTable', className)}\n                headerHeight={HEADER_HEIGHT}\n                rowCount={displayRowData.length}\n                rowGetter={getRow}\n                rowHeight={ROW_HEIGHT}\n                rowRenderer={tableRowRenderer}\n                sort={(sortParams: SortParams) => handleSort(sortParams, sort)}\n                tabIndex={TAB_INDEX}\n                {...rest}\n            >\n                {children}\n            </Table>\n        );\n    }\n}\n\nexport default BaseVirtualizedTable;\n"],"mappings":";;;;;;;AACA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAC9B,OAAOC,IAAI,MAAM,aAAa;AAC9B,OAAOC,UAAU,MAAM,YAAY;AACnC,SAASC,KAAK,QAAQ,4CAA4C;AAClE,SAASC,iBAAiB,QAAQ,iBAAiB;AACnD,SAASC,0BAA0B,QAAQ,aAAa;AACxD,OAAOC,kBAAkB,MAAM,mDAAmD;AAIlF,MAAM;EAAEC,aAAa;EAAEC,UAAU;EAAEC;AAAU,CAAC,GAAGJ,0BAA0B;AAkB3E,MAAMK,UAAU,GAAGA,CAACC,UAAsB,EAAEC,IAAkB,GAAGX,IAAI,KAAK;EACtE,MAAM;IAAEY;EAAM,CAAC,GAAGF,UAAU;EAC5B,MAAM;IAAEG,aAAa;IAAEC;EAAU,CAAC,GAAGF,KAAK,IAAI,CAAC,CAAC;;EAEhD;EACA,IAAIE,IAAI,KAAK,OAAO,IAAID,aAAa,IAAIA,aAAa,CAACE,IAAI,EAAE;IACzDF,aAAa,CAACE,IAAI,CAAC,CAAC;EACxB;EACAJ,IAAI,CAACD,UAAU,CAAC;AACpB,CAAC;AAED,MAAMM,oBAAoB,SAASjB,KAAK,CAACkB,aAAa,CAAQ;EAM1DC,MAAMA,CAAA,EAAG;IACL,MAAAC,WAAA,GAWI,IAAI,CAACC,KAAK;MAXR;QACFC,QAAQ;QACRC,SAAS;QACTC,SAAS;QACTC,eAAe;QACfC,OAAO;QACPC,SAAS;QACTC,WAAW;QACXhB,IAAI;QACJiB;MAEJ,CAAC,GAAAT,WAAA;MADMU,IAAI,GAAAC,wBAAA,CAAAX,WAAA,EAAAY,SAAA;IAGX,MAAMC,cAAc,GAAGT,SAAS,GAAGU,KAAK,CAACT,eAAe,CAAC,CAACU,IAAI,CAAC,CAAC,CAAC,CAAC,GAAGT,OAAO;IAC5E,MAAMU,gBAAgB,GAAGZ,SAAS,GAAGlB,kBAAkB,GAAGsB,WAAW;IAErE,MAAMS,MAAM,GAAGV,SAAS,KAAK,CAAC;MAAEW;IAAM,CAAC,KAAKL,cAAc,CAACK,KAAK,CAAC,CAAC;IAElE,oBACItC,KAAA,CAAAuC,aAAA,CAACpC,KAAK,EAAAqC,QAAA;MACFC,GAAG,EAAEZ,QAAS;MACdN,SAAS,EAAErB,UAAU,CAAC,sBAAsB,EAAEqB,SAAS,CAAE;MACzDmB,YAAY,EAAEnC,aAAc;MAC5BoC,QAAQ,EAAEV,cAAc,CAACW,MAAO;MAChCjB,SAAS,EAAEU,MAAO;MAClBQ,SAAS,EAAErC,UAAW;MACtBoB,WAAW,EAAEQ,gBAAiB;MAC9BxB,IAAI,EAAGD,UAAsB,IAAKD,UAAU,CAACC,UAAU,EAAEC,IAAI,CAAE;MAC/DkC,QAAQ,EAAErC;IAAU,GAChBqB,IAAI,GAEPR,QACE,CAAC;EAEhB;AACJ;AAACyB,eAAA,CA1CK9B,oBAAoB,kBACA;EAClBO,SAAS,EAAE,KAAK;EAChBC,eAAe,EAAErB;AACrB,CAAC;AAwCL,eAAea,oBAAoB","ignoreList":[]}