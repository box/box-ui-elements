{"version":3,"file":"DraggableVirtualizedTable.js","names":["React","noop","classNames","Column","DragDropContext","Droppable","bdlGray","IconDrag","draggableRowRenderer","VIRTUALIZED_TABLE_DEFAULTS","VirtualizedTable","HEADER_HEIGHT","ROW_HEIGHT","ICON_SIZE","DraggableVirtualizedTable","_ref","children","className","onDragEnd","rowData","shouldShowDragHandle","tableId","rest","_objectWithoutProperties","_excluded","tableClassName","draggableCellRenderer","createElement","color","height","width","tableHeight","length","handleDragEnd","destination","source","destinationIndex","index","droppableId","droppableProvided","ref","innerRef","_extends","rowRenderer","cellRenderer","dataKey","disableSort","flexGrow","headerClassName","placeholder","displayName","defaultProps"],"sources":["../../../src/features/virtualized-table/DraggableVirtualizedTable.js"],"sourcesContent":["// @flow\nimport * as React from 'react';\nimport noop from 'lodash/noop';\nimport classNames from 'classnames';\nimport { Column } from '@box/react-virtualized/dist/es/Table/index';\nimport { DragDropContext, Droppable } from 'react-beautiful-dnd';\n\nimport type { DroppableProvided } from 'react-beautiful-dnd';\nimport type { VirtualizedTableProps } from './VirtualizedTable';\n\nimport { bdlGray } from '../../styles/variables';\nimport IconDrag from '../../icons/general/IconDrag';\nimport { draggableRowRenderer } from '../virtualized-table-renderers';\n\nimport { VIRTUALIZED_TABLE_DEFAULTS } from './constants';\nimport VirtualizedTable from './VirtualizedTable';\n\nimport './DraggableVirtualizedTable.scss';\n\nconst { HEADER_HEIGHT, ROW_HEIGHT } = VIRTUALIZED_TABLE_DEFAULTS;\nconst ICON_SIZE = 24;\n\ntype Props = VirtualizedTableProps & {\n    onDragEnd: (sourceIndex: number, destinationIndex: number) => void,\n    shouldShowDragHandle?: boolean,\n    tableId: string,\n};\n\nconst DraggableVirtualizedTable = ({\n    children,\n    className,\n    onDragEnd,\n    rowData,\n    shouldShowDragHandle,\n    tableId,\n    ...rest\n}: Props) => {\n    const tableClassName = classNames('bdl-DraggableVirtualizedTable', className);\n    const draggableCellRenderer = () => <IconDrag color={bdlGray} height={ICON_SIZE} width={ICON_SIZE} />;\n    // Virtualized table's performance optimizations can not be used here since\n    // all rows need to be rendered in order for drag and drop to work properly.\n    // From a UX perspective, it also doesn't make sense to have drag and drop on\n    // very large tables that actually require optimizations, so this component\n    // always forces the table to be tall enough to fit all rows\n    const tableHeight = rowData.length * ROW_HEIGHT + HEADER_HEIGHT;\n\n    const handleDragEnd = ({ destination, source }) => {\n        const destinationIndex = destination ? destination.index : source.index;\n        return onDragEnd(source.index, destinationIndex);\n    };\n\n    return (\n        <DragDropContext onDragEnd={handleDragEnd}>\n            <Droppable droppableId={tableId}>\n                {(droppableProvided: DroppableProvided) => (\n                    <div ref={droppableProvided.innerRef}>\n                        <VirtualizedTable\n                            {...rest}\n                            className={tableClassName}\n                            rowRenderer={draggableRowRenderer}\n                            height={tableHeight}\n                            rowData={rowData}\n                        >\n                            {shouldShowDragHandle && (\n                                <Column\n                                    cellRenderer={draggableCellRenderer}\n                                    className=\"bdl-DraggableVirtualizedTable-dragHandleColumn\"\n                                    dataKey=\"dragHandle\"\n                                    disableSort\n                                    flexGrow={0}\n                                    headerClassName=\"bdl-DraggableVirtualizedTable-dragHandleColumn\"\n                                    width={ICON_SIZE}\n                                />\n                            )}\n                            {children}\n                        </VirtualizedTable>\n                        {droppableProvided.placeholder}\n                    </div>\n                )}\n            </Droppable>\n        </DragDropContext>\n    );\n};\n\nDraggableVirtualizedTable.displayName = 'DraggableVirtualizedTable';\n\nDraggableVirtualizedTable.defaultProps = {\n    onDragEnd: noop,\n    shouldShowDragHandle: true,\n};\n\nexport default DraggableVirtualizedTable;\n"],"mappings":";;;;AACA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAC9B,OAAOC,IAAI,MAAM,aAAa;AAC9B,OAAOC,UAAU,MAAM,YAAY;AACnC,SAASC,MAAM,QAAQ,4CAA4C;AACnE,SAASC,eAAe,EAAEC,SAAS,QAAQ,qBAAqB;AAKhE,SAASC,OAAO,QAAQ,wBAAwB;AAChD,OAAOC,QAAQ,MAAM,8BAA8B;AACnD,SAASC,oBAAoB,QAAQ,gCAAgC;AAErE,SAASC,0BAA0B,QAAQ,aAAa;AACxD,OAAOC,gBAAgB,MAAM,oBAAoB;AAEjD,OAAO,kCAAkC;AAEzC,MAAM;EAAEC,aAAa;EAAEC;AAAW,CAAC,GAAGH,0BAA0B;AAChE,MAAMI,SAAS,GAAG,EAAE;AAQpB,MAAMC,yBAAyB,GAAGC,IAAA,IAQrB;EAAA,IARsB;MAC/BC,QAAQ;MACRC,SAAS;MACTC,SAAS;MACTC,OAAO;MACPC,oBAAoB;MACpBC;IAEG,CAAC,GAAAN,IAAA;IADDO,IAAI,GAAAC,wBAAA,CAAAR,IAAA,EAAAS,SAAA;EAEP,MAAMC,cAAc,GAAGvB,UAAU,CAAC,+BAA+B,EAAEe,SAAS,CAAC;EAC7E,MAAMS,qBAAqB,GAAGA,CAAA,kBAAM1B,KAAA,CAAA2B,aAAA,CAACpB,QAAQ;IAACqB,KAAK,EAAEtB,OAAQ;IAACuB,MAAM,EAAEhB,SAAU;IAACiB,KAAK,EAAEjB;EAAU,CAAE,CAAC;EACrG;EACA;EACA;EACA;EACA;EACA,MAAMkB,WAAW,GAAGZ,OAAO,CAACa,MAAM,GAAGpB,UAAU,GAAGD,aAAa;EAE/D,MAAMsB,aAAa,GAAGA,CAAC;IAAEC,WAAW;IAAEC;EAAO,CAAC,KAAK;IAC/C,MAAMC,gBAAgB,GAAGF,WAAW,GAAGA,WAAW,CAACG,KAAK,GAAGF,MAAM,CAACE,KAAK;IACvE,OAAOnB,SAAS,CAACiB,MAAM,CAACE,KAAK,EAAED,gBAAgB,CAAC;EACpD,CAAC;EAED,oBACIpC,KAAA,CAAA2B,aAAA,CAACvB,eAAe;IAACc,SAAS,EAAEe;EAAc,gBACtCjC,KAAA,CAAA2B,aAAA,CAACtB,SAAS;IAACiC,WAAW,EAAEjB;EAAQ,GAC1BkB,iBAAoC,iBAClCvC,KAAA,CAAA2B,aAAA;IAAKa,GAAG,EAAED,iBAAiB,CAACE;EAAS,gBACjCzC,KAAA,CAAA2B,aAAA,CAACjB,gBAAgB,EAAAgC,QAAA,KACTpB,IAAI;IACRL,SAAS,EAAEQ,cAAe;IAC1BkB,WAAW,EAAEnC,oBAAqB;IAClCqB,MAAM,EAAEE,WAAY;IACpBZ,OAAO,EAAEA;EAAQ,IAEhBC,oBAAoB,iBACjBpB,KAAA,CAAA2B,aAAA,CAACxB,MAAM;IACHyC,YAAY,EAAElB,qBAAsB;IACpCT,SAAS,EAAC,gDAAgD;IAC1D4B,OAAO,EAAC,YAAY;IACpBC,WAAW;IACXC,QAAQ,EAAE,CAAE;IACZC,eAAe,EAAC,gDAAgD;IAChElB,KAAK,EAAEjB;EAAU,CACpB,CACJ,EACAG,QACa,CAAC,EAClBuB,iBAAiB,CAACU,WAClB,CAEF,CACE,CAAC;AAE1B,CAAC;AAEDnC,yBAAyB,CAACoC,WAAW,GAAG,2BAA2B;AAEnEpC,yBAAyB,CAACqC,YAAY,GAAG;EACrCjC,SAAS,EAAEjB,IAAI;EACfmB,oBAAoB,EAAE;AAC1B,CAAC;AAED,eAAeN,yBAAyB","ignoreList":[]}