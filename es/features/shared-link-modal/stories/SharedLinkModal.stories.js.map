{"version":3,"file":"SharedLinkModal.stories.js","names":["React","Button","SharedLinkModal","notes","basic","contacts","id","name","email","type","isOpen","setIsOpen","useState","accessLevel","setAccessLevel","permissionLevel","setPermissionLevel","selectorOptions","setSelectorOptions","submitting","setSubmitting","closeModal","fakeRequest","Promise","resolve","setTimeout","isSubstring","value","searchString","toLowerCase","indexOf","getContacts","filteredContacts","filter","createElement","accessMenuButtonProps","allowedAccessLevels","peopleWithTheLink","peopleInYourCompany","peopleInThisItem","canRemoveLink","changeAccessLevel","newLevel","then","changePermissionLevel","copyButtonProps","defaultEmailMessage","emailMessageProps","expiration","itemName","itemType","isEditAllowed","isPreviewAllowed","onRequestClose","onSettingsClick","removeLink","removeLinkButtonProps","sendEmail","sharedLink","onClick","title","component","parameters"],"sources":["../../../../src/features/shared-link-modal/stories/SharedLinkModal.stories.js"],"sourcesContent":["// @flow\n/* eslint-disable react-hooks/rules-of-hooks */\nimport * as React from 'react';\n\nimport Button from '../../../components/button/Button';\n\nimport SharedLinkModal from '../SharedLinkModal';\nimport notes from './SharedLinkModal.stories.md';\n\nexport const basic = () => {\n    const contacts = [\n        { id: 0, name: 'Jackie', email: 'j@example.com', type: 'user' },\n        { id: 1, name: 'Jeff', email: 'jt@example.com', type: 'user' },\n        { id: 2, name: 'David', email: 'dt@example.com', type: 'user' },\n        { id: 3, name: 'Yang', email: 'yz@example.com', type: 'user' },\n        { id: 4, name: 'Yong', email: 'ysu@example.com', type: 'user' },\n        { id: 5, name: 'Will', email: 'wy@example.com', type: 'user' },\n        { id: 6, name: 'Dave', email: 'd@example.com', type: 'user' },\n        { id: 7, name: 'Ke', email: 'k@example.com', type: 'user' },\n        { id: 8, name: 'Wenbo', email: 'w@example.com', type: 'user' },\n        {\n            id: 11,\n            name: 'Supersupersupersuperreallyreallyreallylongfirstname incrediblyspectacularlylonglastname',\n            email: 'Supersupersupersuperreallyreallyreallyincrediblyspectacularlylongemail@example.com',\n            type: 'user',\n        },\n    ];\n\n    const [isOpen, setIsOpen] = React.useState(false);\n    const [accessLevel, setAccessLevel] = React.useState('peopleInYourCompany');\n    const [permissionLevel, setPermissionLevel] = React.useState('canView');\n    const [selectorOptions, setSelectorOptions] = React.useState([]);\n    const [submitting, setSubmitting] = React.useState(false);\n\n    const closeModal = () => {\n        setIsOpen(false);\n    };\n\n    const fakeRequest = () => {\n        setSubmitting(true);\n        return new Promise(resolve => {\n            setTimeout(() => {\n                setSubmitting(false);\n                resolve();\n            }, 500);\n        });\n    };\n\n    const isSubstring = (value, searchString) => {\n        return value && value.toLowerCase().indexOf(searchString.toLowerCase()) !== -1;\n    };\n\n    const getContacts = searchString => {\n        const filteredContacts = contacts.filter(\n            ({ name, email }) => isSubstring(name, searchString) || isSubstring(email, searchString),\n        );\n\n        setSelectorOptions(filteredContacts);\n    };\n\n    return (\n        <div>\n            {isOpen && (\n                <SharedLinkModal\n                    accessLevel={accessLevel}\n                    accessMenuButtonProps={{ 'data-resin-target': 'changepermissions' }}\n                    allowedAccessLevels={{\n                        peopleWithTheLink: true,\n                        peopleInYourCompany: true,\n                        peopleInThisItem: true,\n                    }}\n                    canRemoveLink\n                    changeAccessLevel={newLevel => fakeRequest().then(() => setAccessLevel(newLevel))}\n                    changePermissionLevel={newLevel => fakeRequest().then(() => setPermissionLevel(newLevel))}\n                    contacts={selectorOptions}\n                    copyButtonProps={{ 'data-resin-target': 'copy' }}\n                    defaultEmailMessage=\"I want to share this file with you.\\n\\n-me\"\n                    emailMessageProps={{ 'data-resin-target': 'message' }}\n                    expiration={1509173940}\n                    getContacts={getContacts}\n                    isOpen={isOpen}\n                    itemName=\"somefile.gif\"\n                    itemType=\"file\"\n                    isEditAllowed={permissionLevel === 'canEdit'}\n                    isPreviewAllowed={permissionLevel === 'canView'}\n                    onRequestClose={closeModal}\n                    onSettingsClick={() => null}\n                    permissionLevel={permissionLevel}\n                    removeLink={() => fakeRequest().then(closeModal)}\n                    removeLinkButtonProps={{ 'data-resin-target': 'remove' }}\n                    sendEmail={() =>\n                        fakeRequest().then(() => {\n                            closeModal();\n                        })\n                    }\n                    sharedLink=\"http://box.com/s/abcdefg\"\n                    submitting={submitting}\n                />\n            )}\n            <Button onClick={() => setIsOpen(true)}>Shared Link Modal</Button>\n        </div>\n    );\n};\n\nexport default {\n    title: 'Features/SharedLinkModal',\n    component: SharedLinkModal,\n    parameters: {\n        notes,\n    },\n};\n"],"mappings":"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","ignoreList":[]}