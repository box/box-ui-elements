{"version":3,"file":"mergeContacts.js","names":["mergeContacts","existingContacts","fetchedContacts","contactsMap","Object","keys","reduce","map","email","contact","toLowerCase","_objectSpread","text","name","value","id","String","isExternalUser","type"],"sources":["../../../../src/features/unified-share-modal/utils/mergeContacts.js"],"sourcesContent":["// @flow\n\nimport type { contactType as Contact } from '../flowTypes';\n\nconst mergeContacts = (existingContacts: Array<Contact>, fetchedContacts: Object): Array<Contact> => {\n    const contactsMap = Object.keys(fetchedContacts).reduce((map, email) => {\n        const contact = fetchedContacts[email];\n        // Since objects are case-sensitive, normalize the key to lowercase.\n        map[email.toLowerCase()] = { ...contact, text: contact.name, value: contact.email || contact.id };\n        return map;\n    }, {});\n\n    return existingContacts.map(contact => {\n        if (contact.id) {\n            return contact;\n        }\n        return (\n            // Normalize the getter in contactsMap so that matching existing contacts will be case-insensitive\n            (contact.value && contactsMap[contact.value.toLowerCase()]) || {\n                email: String(contact.value),\n                id: String(contact.value),\n                isExternalUser: true,\n                text: String(contact.value),\n                type: 'user',\n                value: contact.value,\n            }\n        );\n    });\n};\n\nexport default mergeContacts;\n"],"mappings":";;;;;AAIA,MAAMA,aAAa,GAAGA,CAACC,gBAAgC,EAAEC,eAAuB,KAAqB;EACjG,MAAMC,WAAW,GAAGC,MAAM,CAACC,IAAI,CAACH,eAAe,CAAC,CAACI,MAAM,CAAC,CAACC,GAAG,EAAEC,KAAK,KAAK;IACpE,MAAMC,OAAO,GAAGP,eAAe,CAACM,KAAK,CAAC;IACtC;IACAD,GAAG,CAACC,KAAK,CAACE,WAAW,CAAC,CAAC,CAAC,GAAAC,aAAA,CAAAA,aAAA,KAAQF,OAAO;MAAEG,IAAI,EAAEH,OAAO,CAACI,IAAI;MAAEC,KAAK,EAAEL,OAAO,CAACD,KAAK,IAAIC,OAAO,CAACM;IAAE,EAAE;IACjG,OAAOR,GAAG;EACd,CAAC,EAAE,CAAC,CAAC,CAAC;EAEN,OAAON,gBAAgB,CAACM,GAAG,CAACE,OAAO,IAAI;IACnC,IAAIA,OAAO,CAACM,EAAE,EAAE;MACZ,OAAON,OAAO;IAClB;IACA;MACI;MACCA,OAAO,CAACK,KAAK,IAAIX,WAAW,CAACM,OAAO,CAACK,KAAK,CAACJ,WAAW,CAAC,CAAC,CAAC,IAAK;QAC3DF,KAAK,EAAEQ,MAAM,CAACP,OAAO,CAACK,KAAK,CAAC;QAC5BC,EAAE,EAAEC,MAAM,CAACP,OAAO,CAACK,KAAK,CAAC;QACzBG,cAAc,EAAE,IAAI;QACpBL,IAAI,EAAEI,MAAM,CAACP,OAAO,CAACK,KAAK,CAAC;QAC3BI,IAAI,EAAE,MAAM;QACZJ,KAAK,EAAEL,OAAO,CAACK;MACnB;IAAC;EAET,CAAC,CAAC;AACN,CAAC;AAED,eAAed,aAAa","ignoreList":[]}