{"version":3,"file":"InviteePermissionsMenu.js","names":["React","Component","FormattedMessage","classNames","PlainButton","DropdownMenu","MenuToggle","Menu","SelectMenuItem","Tooltip","ITEM_TYPE_WEBLINK","getDefaultPermissionLevel","InviteePermissionsLabel","messages","InviteePermissionsMenu","constructor","args","_defineProperty","newInviteePermissionLevel","inviteePermissionLevel","changeInviteePermissionLevel","props","renderMenu","inviteePermissions","itemType","defaultPermissionLevel","selectedPermissionLevel","createElement","className","map","level","value","key","isDisabled","disabled","isSelected","onClick","onChangeInviteePermissionsLevel","hasDescription","inviteePermissionDescription","description","render","inviteePermissionsButtonProps","disabledTooltip","inviteDisabledWeblinkTooltip","inviteDisabledTooltip","plainButton","_extends","type","plainButtonWrap","position","text"],"sources":["../../../src/features/unified-share-modal/InviteePermissionsMenu.js"],"sourcesContent":["// @flow\nimport React, { Component } from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport classNames from 'classnames';\n\nimport PlainButton from '../../components/plain-button';\nimport DropdownMenu, { MenuToggle } from '../../components/dropdown-menu';\nimport { Menu, SelectMenuItem } from '../../components/menu';\nimport Tooltip from '../../components/tooltip';\nimport { ITEM_TYPE_WEBLINK } from '../../common/constants';\nimport type { ItemType } from '../../common/types/core';\n\nimport getDefaultPermissionLevel from './utils/defaultPermissionLevel';\nimport InviteePermissionsLabel from './InviteePermissionsLabel';\nimport messages from './messages';\n\nimport type { inviteePermissionType } from './flowTypes';\n\ntype Props = {\n    changeInviteePermissionLevel: Function,\n    disabled: boolean,\n    inviteePermissionLevel: string,\n    inviteePermissions: Array<inviteePermissionType>,\n    inviteePermissionsButtonProps?: Object,\n    itemType: ItemType,\n};\n\nclass InviteePermissionsMenu extends Component<Props> {\n    static defaultProps = {\n        disabled: false,\n        inviteePermissions: [],\n        inviteePermissionsButtonProps: {},\n    };\n\n    onChangeInviteePermissionsLevel = (newInviteePermissionLevel: string) => {\n        const { inviteePermissionLevel, changeInviteePermissionLevel } = this.props;\n\n        if (inviteePermissionLevel !== newInviteePermissionLevel) {\n            changeInviteePermissionLevel(newInviteePermissionLevel);\n        }\n    };\n\n    renderMenu() {\n        const { inviteePermissionLevel, inviteePermissions, itemType } = this.props;\n\n        const defaultPermissionLevel = getDefaultPermissionLevel(inviteePermissions);\n        const selectedPermissionLevel = inviteePermissionLevel || defaultPermissionLevel;\n\n        return (\n            <Menu className=\"usm-share-access-menu\">\n                {inviteePermissions.map(level =>\n                    level.value ? (\n                        <SelectMenuItem\n                            key={level.value}\n                            isDisabled={level.disabled}\n                            isSelected={level.value === selectedPermissionLevel}\n                            onClick={() => this.onChangeInviteePermissionsLevel(level.value)}\n                        >\n                            <InviteePermissionsLabel\n                                hasDescription\n                                inviteePermissionDescription={level.description}\n                                inviteePermissionLevel={level.value}\n                                inviteePermissions\n                                itemType={itemType}\n                            />\n                        </SelectMenuItem>\n                    ) : null,\n                )}\n            </Menu>\n        );\n    }\n\n    render() {\n        const { inviteePermissions, inviteePermissionsButtonProps, inviteePermissionLevel, disabled, itemType } =\n            this.props;\n        const defaultPermissionLevel = getDefaultPermissionLevel(inviteePermissions);\n        const selectedPermissionLevel = inviteePermissionLevel || defaultPermissionLevel;\n        const disabledTooltip =\n            itemType === ITEM_TYPE_WEBLINK ? (\n                <FormattedMessage {...messages.inviteDisabledWeblinkTooltip} />\n            ) : (\n                <FormattedMessage {...messages.inviteDisabledTooltip} />\n            );\n\n        const plainButton = (\n            <PlainButton\n                className={classNames('lnk', {\n                    'is-disabled': disabled,\n                    'bdl-is-disabled': disabled,\n                })}\n                data-target-id=\"PlainButton-InviteePermissionsMenuToggle\"\n                disabled={disabled}\n                type=\"button\"\n                {...inviteePermissionsButtonProps}\n            >\n                <MenuToggle>\n                    {selectedPermissionLevel && (\n                        <InviteePermissionsLabel\n                            hasDescription={false}\n                            inviteePermissionLevel={selectedPermissionLevel}\n                            itemType={itemType}\n                        />\n                    )}\n                </MenuToggle>\n            </PlainButton>\n        );\n\n        const plainButtonWrap = disabled ? (\n            <Tooltip position=\"bottom-center\" text={disabledTooltip}>\n                <div className=\"tooltip-target\">{plainButton}</div>\n            </Tooltip>\n        ) : (\n            plainButton\n        );\n\n        // TODO: `DropdownMenu` doesn't currently handle a scenario where the menu is taller than\n        // the available vertical space. cannot use the constraint props here in short windows.\n        return (\n            <div className=\"be invitee-menu-wrap\">\n                <DropdownMenu>\n                    {plainButtonWrap}\n                    {this.renderMenu()}\n                </DropdownMenu>\n            </div>\n        );\n    }\n}\n\nexport default InviteePermissionsMenu;\n"],"mappings":"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","ignoreList":[]}