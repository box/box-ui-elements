{"version":3,"file":"EnumMetadataField.js","names":["React","useIntl","Label","SingleSelectField","messages","EnumMetadataField","blurExceptionClassNames","dataKey","dataValue","displayName","description","isDisabled","onChange","onRemove","options","selectOptions","map","option","displayText","key","value","isSelectable","formatMessage","defaultValue","metadataFieldSelectValue","unshift","createElement","className","text","isEscapedWithReference","isScrollable","selectedValue","Array","isArray","join"],"sources":["../../../src/features/metadata-instance-fields/EnumMetadataField.js"],"sourcesContent":["// @flow\nimport * as React from 'react';\nimport { useIntl } from 'react-intl';\n\nimport Label from '../../components/label/Label';\nimport SingleSelectField from '../../components/select-field/SingleSelectField';\nimport messages from './messages';\nimport type { MetadataFieldValue, MetadataTemplateFieldOption } from '../../common/types/metadata';\nimport './EnumMetadataField.scss';\n\ntype Option = {\n    displayText: string,\n    isSelectable: boolean,\n    value: string,\n};\n\ntype Props = {\n    blurExceptionClassNames?: Array<string>,\n    dataKey: string,\n    dataValue?: MetadataFieldValue,\n    description?: string,\n    displayName: string,\n    isDisabled?: boolean,\n    onChange: (key: string, value: MetadataFieldValue) => void,\n    onRemove: (key: string) => void,\n    options?: Array<MetadataTemplateFieldOption>,\n};\n\nconst EnumMetadataField = ({\n    blurExceptionClassNames,\n    dataKey,\n    dataValue,\n    displayName,\n    description,\n    isDisabled,\n    onChange,\n    onRemove,\n    options = [],\n}: Props) => {\n    const selectOptions = options.map(option => ({\n        displayText: option.key,\n        value: option.key,\n        isSelectable: true,\n    }));\n\n    const { formatMessage } = useIntl();\n\n    const defaultValue = formatMessage(messages.metadataFieldSelectValue);\n\n    selectOptions.unshift({\n        displayText: defaultValue,\n        value: defaultValue,\n        isSelectable: false,\n    });\n\n    return (\n        <div className=\"bdl-EnumMetadataField\">\n            <Label text={displayName}>\n                {!!description && <i className=\"bdl-EnumMetadataField-desc\">{description}</i>}\n                <SingleSelectField\n                    blurExceptionClassNames={blurExceptionClassNames}\n                    isEscapedWithReference\n                    isDisabled={isDisabled}\n                    isScrollable\n                    onChange={(option: Option) => {\n                        if (option.isSelectable) {\n                            onChange(dataKey, option.value);\n                        } else if (onRemove) {\n                            onRemove(dataKey);\n                        }\n                    }}\n                    options={selectOptions}\n                    selectedValue={\n                        // Conditional to make flow happy, dataValue should never be an array\n                        Array.isArray(dataValue) ? dataValue.join(', ') : dataValue || defaultValue\n                    }\n                />\n            </Label>\n        </div>\n    );\n};\n\nexport default EnumMetadataField;\n"],"mappings":"AACA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAC9B,SAASC,OAAO,QAAQ,YAAY;AAEpC,OAAOC,KAAK,MAAM,8BAA8B;AAChD,OAAOC,iBAAiB,MAAM,iDAAiD;AAC/E,OAAOC,QAAQ,MAAM,YAAY;AAEjC,OAAO,0BAA0B;AAoBjC,MAAMC,iBAAiB,GAAGA,CAAC;EACvBC,uBAAuB;EACvBC,OAAO;EACPC,SAAS;EACTC,WAAW;EACXC,WAAW;EACXC,UAAU;EACVC,QAAQ;EACRC,QAAQ;EACRC,OAAO,GAAG;AACP,CAAC,KAAK;EACT,MAAMC,aAAa,GAAGD,OAAO,CAACE,GAAG,CAACC,MAAM,KAAK;IACzCC,WAAW,EAAED,MAAM,CAACE,GAAG;IACvBC,KAAK,EAAEH,MAAM,CAACE,GAAG;IACjBE,YAAY,EAAE;EAClB,CAAC,CAAC,CAAC;EAEH,MAAM;IAAEC;EAAc,CAAC,GAAGrB,OAAO,CAAC,CAAC;EAEnC,MAAMsB,YAAY,GAAGD,aAAa,CAAClB,QAAQ,CAACoB,wBAAwB,CAAC;EAErET,aAAa,CAACU,OAAO,CAAC;IAClBP,WAAW,EAAEK,YAAY;IACzBH,KAAK,EAAEG,YAAY;IACnBF,YAAY,EAAE;EAClB,CAAC,CAAC;EAEF,oBACIrB,KAAA,CAAA0B,aAAA;IAAKC,SAAS,EAAC;EAAuB,gBAClC3B,KAAA,CAAA0B,aAAA,CAACxB,KAAK;IAAC0B,IAAI,EAAEnB;EAAY,GACpB,CAAC,CAACC,WAAW,iBAAIV,KAAA,CAAA0B,aAAA;IAAGC,SAAS,EAAC;EAA4B,GAAEjB,WAAe,CAAC,eAC7EV,KAAA,CAAA0B,aAAA,CAACvB,iBAAiB;IACdG,uBAAuB,EAAEA,uBAAwB;IACjDuB,sBAAsB;IACtBlB,UAAU,EAAEA,UAAW;IACvBmB,YAAY;IACZlB,QAAQ,EAAGK,MAAc,IAAK;MAC1B,IAAIA,MAAM,CAACI,YAAY,EAAE;QACrBT,QAAQ,CAACL,OAAO,EAAEU,MAAM,CAACG,KAAK,CAAC;MACnC,CAAC,MAAM,IAAIP,QAAQ,EAAE;QACjBA,QAAQ,CAACN,OAAO,CAAC;MACrB;IACJ,CAAE;IACFO,OAAO,EAAEC,aAAc;IACvBgB,aAAa;IACT;IACAC,KAAK,CAACC,OAAO,CAACzB,SAAS,CAAC,GAAGA,SAAS,CAAC0B,IAAI,CAAC,IAAI,CAAC,GAAG1B,SAAS,IAAIe;EAClE,CACJ,CACE,CACN,CAAC;AAEd,CAAC;AAED,eAAelB,iBAAiB","ignoreList":[]}