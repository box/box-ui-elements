{"version":3,"file":"BarChart.js","names":["React","classNames","noop","Bar","isFunction","valueAccessor","BarChart","className","data","direction","hasAxisLabel","label","labelAccessor","onBarMouseEnter","onBarMouseLeave","isHorizontal","isInteractive","max","map","datum","reduce","previousValue","currentValue","Math","getSize","handleBarMouseEnter","handleBarMouseLeave","createElement","role","key","onMouseEnter","position","onMouseLeave","size"],"sources":["../../../../../src/features/content-insights/charts/bar/BarChart.tsx"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport noop from 'lodash/noop';\nimport Bar from './Bar';\nimport { AccessorFunction, Direction } from '../types';\n\nimport './BarChart.scss';\n\ntype ValueAccessor = string | AccessorFunction;\n\ninterface OffsetPosition {\n    left: number;\n    top: number;\n}\ninterface Props {\n    className?: string;\n    data: Array<any>;\n    direction?: Direction;\n    hasAxisLabel?: boolean;\n    label: string;\n    labelAccessor: string;\n    onBarMouseEnter?: (arg1: { datum: any }, arg2: OffsetPosition) => void;\n    onBarMouseLeave?: (arg1: { datum: any }) => void;\n    valueAccessor: ValueAccessor;\n}\n\nfunction isFunction(valueAccessor: ValueAccessor): valueAccessor is AccessorFunction {\n    return typeof valueAccessor === 'function';\n}\n\nfunction BarChart({\n    className,\n    data = [],\n    direction = 'vertical',\n    hasAxisLabel = false,\n    label,\n    labelAccessor,\n    onBarMouseEnter,\n    onBarMouseLeave,\n    valueAccessor,\n}: Props) {\n    const isHorizontal = direction === 'horizontal';\n    const isInteractive = !!onBarMouseEnter || !!onBarMouseLeave;\n    const max = data\n        .map(datum => (isFunction(valueAccessor) ? valueAccessor(datum) : datum[valueAccessor]))\n        .reduce((previousValue, currentValue) => Math.max(previousValue, currentValue), 0);\n\n    const getSize = (datum: any) => {\n        // If max is 0 then all other values in the data array are 0 so return 0\n        // instead of allowing the following calculation to return Infinity\n        if (max === 0) {\n            return 0;\n        }\n\n        return ((isFunction(valueAccessor) ? valueAccessor(datum) : datum[valueAccessor]) / max) * 100;\n    };\n\n    const handleBarMouseEnter = onBarMouseEnter || noop;\n    const handleBarMouseLeave = onBarMouseLeave || noop;\n\n    return (\n        <div\n            aria-label={label}\n            className={classNames('ca-BarChart', className, {\n                'is-horizontal': isHorizontal,\n                'is-interactive': isInteractive,\n            })}\n            role=\"img\"\n        >\n            {data.map(datum => (\n                <Bar\n                    key={datum[labelAccessor]}\n                    direction={direction}\n                    label={hasAxisLabel ? datum[labelAccessor] : ''}\n                    onMouseEnter={(position: OffsetPosition) => handleBarMouseEnter({ datum }, position)}\n                    onMouseLeave={() => handleBarMouseLeave({ datum })}\n                    size={getSize(datum)}\n                />\n            ))}\n        </div>\n    );\n}\n\nexport default BarChart;\n"],"mappings":"AAAA;AACA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAC9B,OAAOC,UAAU,MAAM,YAAY;AACnC,OAAOC,IAAI,MAAM,aAAa;AAC9B,OAAOC,GAAG,MAAM,OAAO;AAGvB,OAAO,iBAAiB;AAoBxB,SAASC,UAAUA,CAACC,aAA4B,EAAqC;EACjF,OAAO,OAAOA,aAAa,KAAK,UAAU;AAC9C;AAEA,SAASC,QAAQA,CAAC;EACdC,SAAS;EACTC,IAAI,GAAG,EAAE;EACTC,SAAS,GAAG,UAAU;EACtBC,YAAY,GAAG,KAAK;EACpBC,KAAK;EACLC,aAAa;EACbC,eAAe;EACfC,eAAe;EACfT;AACG,CAAC,EAAE;EACN,MAAMU,YAAY,GAAGN,SAAS,KAAK,YAAY;EAC/C,MAAMO,aAAa,GAAG,CAAC,CAACH,eAAe,IAAI,CAAC,CAACC,eAAe;EAC5D,MAAMG,GAAG,GAAGT,IAAI,CACXU,GAAG,CAACC,KAAK,IAAKf,UAAU,CAACC,aAAa,CAAC,GAAGA,aAAa,CAACc,KAAK,CAAC,GAAGA,KAAK,CAACd,aAAa,CAAE,CAAC,CACvFe,MAAM,CAAC,CAACC,aAAa,EAAEC,YAAY,KAAKC,IAAI,CAACN,GAAG,CAACI,aAAa,EAAEC,YAAY,CAAC,EAAE,CAAC,CAAC;EAEtF,MAAME,OAAO,GAAIL,KAAU,IAAK;IAC5B;IACA;IACA,IAAIF,GAAG,KAAK,CAAC,EAAE;MACX,OAAO,CAAC;IACZ;IAEA,OAAQ,CAACb,UAAU,CAACC,aAAa,CAAC,GAAGA,aAAa,CAACc,KAAK,CAAC,GAAGA,KAAK,CAACd,aAAa,CAAC,IAAIY,GAAG,GAAI,GAAG;EAClG,CAAC;EAED,MAAMQ,mBAAmB,GAAGZ,eAAe,IAAIX,IAAI;EACnD,MAAMwB,mBAAmB,GAAGZ,eAAe,IAAIZ,IAAI;EAEnD,oBACIF,KAAA,CAAA2B,aAAA;IACI,cAAYhB,KAAM;IAClBJ,SAAS,EAAEN,UAAU,CAAC,aAAa,EAAEM,SAAS,EAAE;MAC5C,eAAe,EAAEQ,YAAY;MAC7B,gBAAgB,EAAEC;IACtB,CAAC,CAAE;IACHY,IAAI,EAAC;EAAK,GAETpB,IAAI,CAACU,GAAG,CAACC,KAAK,iBACXnB,KAAA,CAAA2B,aAAA,CAACxB,GAAG;IACA0B,GAAG,EAAEV,KAAK,CAACP,aAAa,CAAE;IAC1BH,SAAS,EAAEA,SAAU;IACrBE,KAAK,EAAED,YAAY,GAAGS,KAAK,CAACP,aAAa,CAAC,GAAG,EAAG;IAChDkB,YAAY,EAAGC,QAAwB,IAAKN,mBAAmB,CAAC;MAAEN;IAAM,CAAC,EAAEY,QAAQ,CAAE;IACrFC,YAAY,EAAEA,CAAA,KAAMN,mBAAmB,CAAC;MAAEP;IAAM,CAAC,CAAE;IACnDc,IAAI,EAAET,OAAO,CAACL,KAAK;EAAE,CACxB,CACJ,CACA,CAAC;AAEd;AAEA,eAAeb,QAAQ","ignoreList":[]}