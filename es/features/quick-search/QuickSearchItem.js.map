{"version":3,"file":"QuickSearchItem.js","names":["React","classNames","injectIntl","FormattedMessage","RecordOf","convertToMs","isToday","isYesterday","DatalistItem","Folder16","ItemIcon","Link","TYPE_FILE","TYPE_FOLDER","TYPE_WEBLINK","messages","QUERY_SEPARATOR","QuickSearchItem","_ref","className","closeDropdown","intl","itemData","parentFolderRenderer","shouldNavigateOnItemClick","rest","_objectWithoutProperties","_excluded","formatMessage","extension","iconType","id","name","nameWithMarkedQuery","parentName","sharedLink","type","updatedBy","updatedDate","updatedDateInMs","markedQueryMatches","split","forEach","element","index","push","createElement","key","itemIconTitle","bookmark","file","collaboratedFolder","externalFolder","personalFolder","updatedText","updatedTextToday","user","updatedTextYesterday","date","href","targetProps","isBoxNote","target","itemName","_extends","onClick","e","stopPropagation","title","Fragment","parentFolder","height","width"],"sources":["../../../src/features/quick-search/QuickSearchItem.js"],"sourcesContent":["// @flow\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport { injectIntl, FormattedMessage } from 'react-intl';\nimport { RecordOf } from 'immutable';\n\nimport type { ItemType } from '../../common/types/core';\nimport { convertToMs, isToday, isYesterday } from '../../utils/datetime';\nimport DatalistItem from '../../components/datalist-item';\nimport Folder16 from '../../icon/fill/Folder16';\nimport ItemIcon from '../../icons/item-icon';\nimport { Link } from '../../components/link';\n\nimport { TYPE_FILE, TYPE_FOLDER, TYPE_WEBLINK } from '../../constants';\nimport messages from './messages';\n\nimport './QuickSearchItem.scss';\n\nconst QUERY_SEPARATOR = '<mark>';\n\ntype QuickSearchItemData = {\n    extension?: string,\n    iconType: string,\n    id: string,\n    name: string,\n    nameWithMarkedQuery: string,\n    parentName?: string,\n    sharedLink?: string,\n    type: ItemType,\n    updatedBy: string,\n    updatedDate: number,\n};\n\ntype Props = {\n    className?: string,\n    closeDropdown?: Function,\n    intl: any,\n    itemData: QuickSearchItemData | RecordOf<QuickSearchItemData>,\n    parentFolderRenderer?: Function,\n    shouldNavigateOnItemClick?: boolean,\n};\n\nconst QuickSearchItem = ({\n    className,\n    closeDropdown,\n    intl,\n    itemData,\n    parentFolderRenderer,\n    shouldNavigateOnItemClick,\n    ...rest\n}: Props) => {\n    const { formatMessage } = intl;\n    const {\n        extension,\n        iconType,\n        id,\n        name,\n        nameWithMarkedQuery,\n        parentName,\n        sharedLink,\n        type,\n        updatedBy,\n        updatedDate,\n    } = itemData;\n    const updatedDateInMs = convertToMs(updatedDate);\n    const markedQueryMatches = [];\n    nameWithMarkedQuery.split(QUERY_SEPARATOR).forEach((element, index) =>\n        index % 2 === 0\n            ? markedQueryMatches.push(element)\n            : markedQueryMatches.push(\n                  <mark key={index} className=\"search-term\">\n                      {element}\n                  </mark>,\n              ),\n    );\n\n    let itemIconTitle;\n    switch (type) {\n        case TYPE_WEBLINK:\n            itemIconTitle = <FormattedMessage {...messages.bookmark} />;\n            break;\n        case TYPE_FILE:\n            itemIconTitle = <FormattedMessage {...messages.file} />;\n            break;\n        case TYPE_FOLDER:\n            if (iconType === 'folder-collab') {\n                itemIconTitle = <FormattedMessage {...messages.collaboratedFolder} />;\n            } else if (iconType === 'folder-external') {\n                itemIconTitle = <FormattedMessage {...messages.externalFolder} />;\n            } else {\n                itemIconTitle = <FormattedMessage {...messages.personalFolder} />;\n            }\n            break;\n        default:\n    }\n\n    let updatedText;\n    if (isToday(updatedDateInMs)) {\n        updatedText = formatMessage(messages.updatedTextToday, {\n            user: updatedBy,\n        });\n    } else if (isYesterday(updatedDateInMs)) {\n        updatedText = formatMessage(messages.updatedTextYesterday, {\n            user: updatedBy,\n        });\n    } else {\n        updatedText = formatMessage(messages.updatedText, {\n            date: updatedDateInMs,\n            user: updatedBy,\n        });\n    }\n\n    let href;\n    let targetProps = {};\n    const isBoxNote = extension === 'boxnote';\n\n    switch (type) {\n        case 'folder':\n            href = `/folder/${id}`;\n            break;\n        case 'web_link':\n            href = `/web_link/${id}`;\n            targetProps = { target: '_blank' };\n            break;\n        case 'file':\n            // shared link should take precedence over other link types\n            if (sharedLink) {\n                href = sharedLink;\n            } else if (isBoxNote) {\n                href = `/notes/${id}`;\n            } else {\n                href = `/file/${id}`;\n            }\n\n            if (isBoxNote) targetProps = { target: '_blank' };\n            break;\n        default:\n    }\n\n    const itemName =\n        href && shouldNavigateOnItemClick ? (\n            <Link onClick={e => e.stopPropagation()} className=\"item-name\" href={href} title={name} {...targetProps}>\n                {markedQueryMatches}\n            </Link>\n        ) : (\n            <span className=\"item-name\" title={name}>\n                {markedQueryMatches}\n            </span>\n        );\n\n    return (\n        <DatalistItem className={classNames('quick-search-item', className)} {...rest}>\n            <ItemIcon iconType={iconType} title={itemIconTitle} />\n\n            <span className=\"item-info\">\n                {itemName}\n\n                <span className=\"item-subtext\">\n                    {(parentName || parentFolderRenderer) && (\n                        <>\n                            <Folder16 title={<FormattedMessage {...messages.parentFolder} />} height={12} width={12} />\n\n                            {parentFolderRenderer ? (\n                                parentFolderRenderer(itemData, closeDropdown)\n                            ) : (\n                                <span className=\"parent-folder\">{parentName}</span>\n                            )}\n\n                            <span className=\"separator\">â€¢</span>\n                        </>\n                    )}\n\n                    <span className=\"txt-ellipsis\" title={updatedText}>\n                        {updatedText}\n                    </span>\n                </span>\n            </span>\n        </DatalistItem>\n    );\n};\n\nexport default injectIntl(QuickSearchItem);\n"],"mappings":"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","ignoreList":[]}