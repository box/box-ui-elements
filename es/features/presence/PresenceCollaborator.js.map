{"version":3,"file":"PresenceCollaborator.js","names":["React","isEmpty","PropTypes","FormattedMessage","injectIntl","Avatar","Link","messages","PresenceAvatar","determineInteractionMessage","timeFromNow","renderTimestampMessage","interactedAt","interactionType","intl","lastActionMessage","value","unit","timeAgo","formatRelativeTime","createElement","_extends","values","PresenceCollaborator","_ref","collaborator","isAnonymous","props","_objectWithoutProperties","_excluded","avatarUrl","id","isActive","name","profileUrl","className","isDropDownAvatar","title","href","target","activeNowText","propTypes","shape","string","oneOfType","number","bool","isRequired","any","PresenceCollaboratorComponent"],"sources":["../../../src/features/presence/PresenceCollaborator.js"],"sourcesContent":["import * as React from 'react';\nimport isEmpty from 'lodash/isEmpty';\nimport PropTypes from 'prop-types';\nimport { FormattedMessage, injectIntl } from 'react-intl';\n\nimport Avatar from '../../components/avatar';\nimport Link from '../../components/link/LinkBase';\nimport messages from './messages';\nimport PresenceAvatar from './PresenceAvatar';\nimport { determineInteractionMessage } from './utils/presenceUtils';\nimport timeFromNow from '../../utils/relativeTime';\n\nimport './PresenceCollaborator.scss';\n\nexport const renderTimestampMessage = (interactedAt, interactionType, intl) => {\n    const lastActionMessage = determineInteractionMessage(interactionType, interactedAt);\n    const { value, unit } = timeFromNow(interactedAt);\n    const timeAgo = intl.formatRelativeTime(value, unit);\n\n    if (lastActionMessage) {\n        return (\n            <FormattedMessage\n                {...lastActionMessage}\n                values={{\n                    timeAgo,\n                }}\n            />\n        );\n    }\n    return null;\n};\n\nconst PresenceCollaborator = ({ collaborator, isAnonymous = false, intl, ...props }) => {\n    const { avatarUrl, id, interactedAt, interactionType, isActive, name, profileUrl } = collaborator;\n\n    return (\n        <div className=\"bdl-PresenceCollaborator\" {...props}>\n            {isAnonymous ? (\n                <Avatar />\n            ) : (\n                <PresenceAvatar avatarUrl={avatarUrl} id={id} isActive={isActive} isDropDownAvatar name={name} />\n            )}\n            <div className=\"bdl-PresenceCollaborator-info-container\">\n                <div className=\"bdl-PresenceCollaborator-info-name\" title={name}>\n                    {isEmpty(profileUrl) ? (\n                        <span>{name}</span>\n                    ) : (\n                        <Link href={profileUrl} target=\"_blank\">\n                            {name}\n                        </Link>\n                    )}\n                </div>\n                <div className=\"bdl-PresenceCollaborator-info-time\">\n                    {isActive ? (\n                        <FormattedMessage {...messages.activeNowText} />\n                    ) : (\n                        renderTimestampMessage(interactedAt, interactionType, intl)\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n};\n\nPresenceCollaborator.propTypes = {\n    collaborator: PropTypes.shape({\n        /** Url to avatar image. If passed in, component will render the avatar image instead of the initials */\n        avatarUrl: PropTypes.string,\n        /** Users id */\n        id: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n        isActive: PropTypes.bool,\n        /** Unix timestamp of when the user last interacted with the document */\n        interactedAt: PropTypes.number,\n        /** The type of interaction by the user */\n        interactionType: PropTypes.string,\n        /** User's full name */\n        name: PropTypes.string.isRequired,\n        /** Custom Profile URL */\n        profileUrl: PropTypes.string,\n    }).isRequired,\n    isAnonymous: PropTypes.bool,\n    /* Intl object */\n    intl: PropTypes.any,\n};\n\nexport { PresenceCollaborator as PresenceCollaboratorComponent };\nexport default injectIntl(PresenceCollaborator);\n"],"mappings":"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","ignoreList":[]}