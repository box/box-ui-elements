{"version":3,"file":"presenceUtils.js","names":["messages","MS_IN_A_MINUTE","MS_IN_A_DAY","INTERACTION_TYPE_MODIFY","INTERACTION_TYPE_UPLOAD","INTERACTION_TYPE_PREVIEW","INTERACTION_TYPE_OPEN","INTERACTION_TYPE_COMMENT","getLastActionTimeMS","lastAccessTimeMS","lastModifiedTimeMS","sessionLengthMS","sortByActivity","a","b","isActive","determineInteractionMessage","interactionType","interactedAt","message","lessThanAMinuteAgo","Date","now","modifiedIntheLastMinuteText","timeSinceLastModifiedText","previewedIntheLastMinuteText","timeSinceLastPreviewedText","accessedInTheLastMinuteText","timeSinceLastAccessedText","commentedIntheLastMinuteText","timeSinceLastCommentedText"],"sources":["../../../../src/features/presence/utils/presenceUtils.js"],"sourcesContent":["import messages from '../messages';\n\nconst MS_IN_A_MINUTE = 60000; // number of milliseconds in one minute\nconst MS_IN_A_DAY = 86400000; // number of milliseconds in one day\nconst INTERACTION_TYPE_MODIFY = 'user.item_modify';\nconst INTERACTION_TYPE_UPLOAD = 'user.item_upload';\nconst INTERACTION_TYPE_PREVIEW = 'user.item_preview';\nconst INTERACTION_TYPE_OPEN = 'user.item_open';\nconst INTERACTION_TYPE_COMMENT = 'user.comment_create';\n\nfunction getLastActionTimeMS(lastAccessTimeMS, lastModifiedTimeMS, sessionLengthMS = MS_IN_A_DAY) {\n    if (!lastModifiedTimeMS) {\n        return lastAccessTimeMS;\n    }\n\n    return lastAccessTimeMS - lastModifiedTimeMS < sessionLengthMS ? lastModifiedTimeMS : lastAccessTimeMS;\n}\n\nfunction sortByActivity(a, b) {\n    if (a.isActive && b.isActive) {\n        // if both users are active,  do not modify sort order\n        return 0;\n    }\n    if (a.isActive && !b.isActive) {\n        // if a is active and b is inactive, a comes first\n        return -1;\n    }\n    if (!a.isActive && b.isActive) {\n        // vice versa as above\n        return 1;\n    }\n\n    // otherwise, neither collaborator is active and we sort on the last \"action\" time\n    return 0;\n}\n\nfunction determineInteractionMessage(interactionType, interactedAt) {\n    let message;\n    const lessThanAMinuteAgo = Date.now() - interactedAt < MS_IN_A_MINUTE;\n    switch (interactionType) {\n        // For Box Notes only\n        case INTERACTION_TYPE_MODIFY:\n        case INTERACTION_TYPE_UPLOAD:\n            message = lessThanAMinuteAgo ? messages.modifiedIntheLastMinuteText : messages.timeSinceLastModifiedText;\n            break;\n        case INTERACTION_TYPE_PREVIEW:\n            message = lessThanAMinuteAgo ? messages.previewedIntheLastMinuteText : messages.timeSinceLastPreviewedText;\n            break;\n        // For Box Notes only\n        case INTERACTION_TYPE_OPEN:\n            message = lessThanAMinuteAgo ? messages.accessedInTheLastMinuteText : messages.timeSinceLastAccessedText;\n            break;\n        case INTERACTION_TYPE_COMMENT:\n            message = lessThanAMinuteAgo ? messages.commentedIntheLastMinuteText : messages.timeSinceLastCommentedText;\n            break;\n        default:\n            message = null;\n            break;\n    }\n    return message;\n}\n\nexport { sortByActivity, getLastActionTimeMS, determineInteractionMessage };\n"],"mappings":"AAAA,OAAOA,QAAQ,MAAM,aAAa;AAElC,MAAMC,cAAc,GAAG,KAAK,CAAC,CAAC;AAC9B,MAAMC,WAAW,GAAG,QAAQ,CAAC,CAAC;AAC9B,MAAMC,uBAAuB,GAAG,kBAAkB;AAClD,MAAMC,uBAAuB,GAAG,kBAAkB;AAClD,MAAMC,wBAAwB,GAAG,mBAAmB;AACpD,MAAMC,qBAAqB,GAAG,gBAAgB;AAC9C,MAAMC,wBAAwB,GAAG,qBAAqB;AAEtD,SAASC,mBAAmBA,CAACC,gBAAgB,EAAEC,kBAAkB,EAAEC,eAAe,GAAGT,WAAW,EAAE;EAC9F,IAAI,CAACQ,kBAAkB,EAAE;IACrB,OAAOD,gBAAgB;EAC3B;EAEA,OAAOA,gBAAgB,GAAGC,kBAAkB,GAAGC,eAAe,GAAGD,kBAAkB,GAAGD,gBAAgB;AAC1G;AAEA,SAASG,cAAcA,CAACC,CAAC,EAAEC,CAAC,EAAE;EAC1B,IAAID,CAAC,CAACE,QAAQ,IAAID,CAAC,CAACC,QAAQ,EAAE;IAC1B;IACA,OAAO,CAAC;EACZ;EACA,IAAIF,CAAC,CAACE,QAAQ,IAAI,CAACD,CAAC,CAACC,QAAQ,EAAE;IAC3B;IACA,OAAO,CAAC,CAAC;EACb;EACA,IAAI,CAACF,CAAC,CAACE,QAAQ,IAAID,CAAC,CAACC,QAAQ,EAAE;IAC3B;IACA,OAAO,CAAC;EACZ;;EAEA;EACA,OAAO,CAAC;AACZ;AAEA,SAASC,2BAA2BA,CAACC,eAAe,EAAEC,YAAY,EAAE;EAChE,IAAIC,OAAO;EACX,MAAMC,kBAAkB,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,GAAGJ,YAAY,GAAGjB,cAAc;EACrE,QAAQgB,eAAe;IACnB;IACA,KAAKd,uBAAuB;IAC5B,KAAKC,uBAAuB;MACxBe,OAAO,GAAGC,kBAAkB,GAAGpB,QAAQ,CAACuB,2BAA2B,GAAGvB,QAAQ,CAACwB,yBAAyB;MACxG;IACJ,KAAKnB,wBAAwB;MACzBc,OAAO,GAAGC,kBAAkB,GAAGpB,QAAQ,CAACyB,4BAA4B,GAAGzB,QAAQ,CAAC0B,0BAA0B;MAC1G;IACJ;IACA,KAAKpB,qBAAqB;MACtBa,OAAO,GAAGC,kBAAkB,GAAGpB,QAAQ,CAAC2B,2BAA2B,GAAG3B,QAAQ,CAAC4B,yBAAyB;MACxG;IACJ,KAAKrB,wBAAwB;MACzBY,OAAO,GAAGC,kBAAkB,GAAGpB,QAAQ,CAAC6B,4BAA4B,GAAG7B,QAAQ,CAAC8B,0BAA0B;MAC1G;IACJ;MACIX,OAAO,GAAG,IAAI;MACd;EACR;EACA,OAAOA,OAAO;AAClB;AAEA,SAASP,cAAc,EAAEJ,mBAAmB,EAAEQ,2BAA2B","ignoreList":[]}