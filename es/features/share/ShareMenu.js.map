{"version":3,"file":"ShareMenu.js","names":["React","PropTypes","FormattedMessage","Tooltip","Menu","MenuItem","IconSharedLink","IconInviteCollaborators","IconCollaboratorsRestricted","IconSharedLinkRestricted","messages","OWNER_COOWNER_ONLY","INSUFFICIENT_PERMISSIONS","ShareMenu","_ref","canInvite","canShare","className","getSharedLinkProps","inviteCollabsProps","inviteRestrictionCode","isDownloadAllowed","isPreviewAllowed","onGetSharedLinkSelect","onInviteCollabSelect","rest","_objectWithoutProperties","_excluded","inviteCollabsOption","createElement","_extends","isDisabled","onClick","inviteCollabs","editAndComment","inviteCollabTooltip","ownerCoownerOnlyTooltip","insufficientPermissionsTooltip","sharedLinkPermissions","viewAndDownload","viewOnly","downloadOnly","shortcutOnly","position","text","getSharedLink","propTypes","bool","isRequired","string","object","oneOf","func"],"sources":["../../../src/features/share/ShareMenu.js"],"sourcesContent":["import * as React from 'react';\nimport PropTypes from 'prop-types';\nimport { FormattedMessage } from 'react-intl';\n\nimport Tooltip from '../../components/tooltip';\nimport { Menu, MenuItem } from '../../components/menu';\nimport IconSharedLink from '../../icons/general/IconSharedLink';\nimport IconInviteCollaborators from '../../icons/general/IconInviteCollaborators';\nimport IconCollaboratorsRestricted from '../../icons/general/IconCollaboratorsRestricted';\nimport IconSharedLinkRestricted from '../../icons/general/IconSharedLinkRestricted';\n\nimport messages from './messages';\n\nimport './ShareMenu.scss';\n\nconst OWNER_COOWNER_ONLY = 'owner_coowner_only';\nconst INSUFFICIENT_PERMISSIONS = 'insufficient_permissions';\n\nconst ShareMenu = ({\n    canInvite,\n    canShare,\n    className = '',\n    getSharedLinkProps = {},\n    inviteCollabsProps = {},\n    inviteRestrictionCode,\n    isDownloadAllowed,\n    isPreviewAllowed,\n    onGetSharedLinkSelect,\n    onInviteCollabSelect,\n    ...rest\n}) => {\n    const inviteCollabsOption = (\n        <MenuItem\n            className=\"invite-collaborators\"\n            isDisabled={!canInvite}\n            onClick={onInviteCollabSelect}\n            {...inviteCollabsProps}\n        >\n            {canInvite ? <IconInviteCollaborators /> : <IconCollaboratorsRestricted />}\n            <div>\n                <div>\n                    <FormattedMessage {...messages.inviteCollabs} />\n                </div>\n                <div className=\"share-option-description\">\n                    <FormattedMessage {...messages.editAndComment} />\n                </div>\n            </div>\n        </MenuItem>\n    );\n\n    const inviteCollabTooltip =\n        inviteRestrictionCode === OWNER_COOWNER_ONLY ? (\n            <FormattedMessage {...messages.ownerCoownerOnlyTooltip} />\n        ) : (\n            <FormattedMessage {...messages.insufficientPermissionsTooltip} />\n        );\n\n    let sharedLinkPermissions;\n\n    if (isDownloadAllowed && isPreviewAllowed) {\n        sharedLinkPermissions = <FormattedMessage {...messages.viewAndDownload} />;\n    } else if (isPreviewAllowed) {\n        sharedLinkPermissions = <FormattedMessage {...messages.viewOnly} />;\n    } else if (isDownloadAllowed) {\n        sharedLinkPermissions = <FormattedMessage {...messages.downloadOnly} />;\n    } else {\n        sharedLinkPermissions = <FormattedMessage {...messages.shortcutOnly} />;\n    }\n\n    return (\n        <Menu className={`share-menu ${className}`} {...rest}>\n            {canInvite ? (\n                inviteCollabsOption\n            ) : (\n                <Tooltip position=\"middle-left\" text={inviteCollabTooltip}>\n                    {inviteCollabsOption}\n                </Tooltip>\n            )}\n            <MenuItem\n                className=\"get-shared-link\"\n                isDisabled={!canShare}\n                onClick={onGetSharedLinkSelect}\n                {...getSharedLinkProps}\n            >\n                {canShare ? <IconSharedLink /> : <IconSharedLinkRestricted />}\n                <div>\n                    <div>\n                        <FormattedMessage {...messages.getSharedLink} />\n                    </div>\n                    <div className=\"share-option-description\">{sharedLinkPermissions}</div>\n                </div>\n            </MenuItem>\n        </Menu>\n    );\n};\n\nShareMenu.propTypes = {\n    canInvite: PropTypes.bool.isRequired,\n    canShare: PropTypes.bool.isRequired,\n    className: PropTypes.string,\n    getSharedLinkProps: PropTypes.object,\n    inviteCollabsProps: PropTypes.object,\n    inviteRestrictionCode: PropTypes.oneOf([INSUFFICIENT_PERMISSIONS, OWNER_COOWNER_ONLY]),\n    isDownloadAllowed: PropTypes.bool.isRequired,\n    isPreviewAllowed: PropTypes.bool.isRequired,\n    onGetSharedLinkSelect: PropTypes.func.isRequired,\n    onInviteCollabSelect: PropTypes.func.isRequired,\n};\n\nexport { OWNER_COOWNER_ONLY, INSUFFICIENT_PERMISSIONS };\nexport default ShareMenu;\n"],"mappings":"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","ignoreList":[]}