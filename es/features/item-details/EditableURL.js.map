{"version":3,"file":"EditableURL.js","names":["React","FormattedMessage","injectIntl","TextInput","commonMessages","messages","VALUE_MISSING","TYPE_MISMATCH","errorMap","createElement","requiredFieldError","invalidURLError","EditableURL","Component","constructor","args","_defineProperty","error","value","props","inputEl","valid","valueMissing","validity","setState","onValidURLChange","state","event","currentTarget","componentDidUpdate","prevValue","render","intl","formatMessage","className","undefined","hideLabel","inputRef","ref","isRequired","label","url","onBlur","handleBlur","onChange","handleChange","onFocus","handleFocus","placeholder","urlPlaceholder","type","EditableURLBase"],"sources":["../../../src/features/item-details/EditableURL.js"],"sourcesContent":["// @flow\nimport * as React from 'react';\nimport { FormattedMessage, injectIntl } from 'react-intl';\n\nimport TextInput from '../../components/text-input/TextInput';\nimport commonMessages from '../../common/messages';\n\nimport messages from './messages';\n\nconst VALUE_MISSING = 'valueMissing';\nconst TYPE_MISMATCH = 'typeMismatch';\n\nconst errorMap = {\n    [VALUE_MISSING]: <FormattedMessage {...commonMessages.requiredFieldError} />,\n    [TYPE_MISMATCH]: <FormattedMessage {...commonMessages.invalidURLError} />,\n};\n\ntype Props = {\n    intl: Object,\n    onValidURLChange: Function,\n    value: string,\n};\n\ntype State = {\n    error: '' | $Keys<typeof errorMap>,\n    value: string,\n};\n\nclass EditableURL extends React.Component<Props, State> {\n    state = {\n        error: '',\n        value: this.props.value,\n    };\n\n    componentDidUpdate({ value: prevValue }: Props) {\n        const { value } = this.props;\n        if (prevValue !== value) {\n            this.setState({ value });\n        }\n    }\n\n    inputEl: ?HTMLInputElement;\n\n    handleBlur = (): void => {\n        if (!this.inputEl) {\n            return;\n        }\n\n        const { valid, valueMissing } = this.inputEl.validity;\n        if (!valid) {\n            this.setState({\n                error: valueMissing ? VALUE_MISSING : TYPE_MISMATCH,\n            });\n            return;\n        }\n\n        this.props.onValidURLChange(this.state.value);\n    };\n\n    handleChange = (event: SyntheticEvent<HTMLInputElement>): void => {\n        this.setState({ value: event.currentTarget.value });\n    };\n\n    handleFocus = (): void => {\n        this.setState({ error: '' });\n    };\n\n    render() {\n        const {\n            intl: { formatMessage },\n        } = this.props;\n        const { error, value } = this.state;\n\n        return (\n            <TextInput\n                className=\"url-input\"\n                error={error ? errorMap[error] : undefined}\n                hideLabel\n                inputRef={ref => {\n                    this.inputEl = ref;\n                }}\n                isRequired\n                label={formatMessage(messages.url)}\n                onBlur={this.handleBlur}\n                onChange={this.handleChange}\n                onFocus={this.handleFocus}\n                placeholder={formatMessage(messages.urlPlaceholder)}\n                type=\"url\"\n                value={value}\n            />\n        );\n    }\n}\n\nexport { EditableURL as EditableURLBase, VALUE_MISSING, TYPE_MISMATCH };\nexport default injectIntl(EditableURL);\n"],"mappings":"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","ignoreList":[]}