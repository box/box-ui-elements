{"version":3,"file":"CollapsibleSidebar.js","names":["React","classNames","styled","tabbable","KEYS","StyledNav","nav","withConfig","displayName","componentId","props","theme","primary","background","border","foreground","CollapsibleSidebar","Component","constructor","args","_defineProperty","createRef","direction","navRef","current","tabbableEls","currentElIndex","findIndex","el","document","activeElement","index","length","focus","event","contains","key","arrowDown","stopPropagation","preventDefault","focusEl","arrowUp","render","children","className","expanded","isHidden","htmlAttributes","wrapperClassName","navClasses","ariaAttributes","undefined","createElement","_extends","ref","onKeyDown","handleKeyDown"],"sources":["../../../src/features/collapsible-sidebar/CollapsibleSidebar.js"],"sourcesContent":["/**\n * @flow\n * @file Sidebar component that supports rendering different elements based on expand/collapse state\n * @author Box\n *\n * A sidebar component that supports collapsed/expanded state and responsive sizing.\n */\n\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport styled from 'styled-components';\nimport tabbable from 'tabbable';\nimport { KEYS } from '../../constants';\n\nimport './CollapsibleSidebar.scss';\n\nconst StyledNav = styled.nav`\n    background-color: ${props => props.theme.primary.background};\n    border-right: 1px solid ${props => props.theme.primary.border};\n    color: ${props => props.theme.primary.foreground};\n\n    .crawler > div {\n        background-color: ${props => props.theme.primary.foreground};\n    }\n`;\n\ntype Props = {\n    /** Primary content */\n    children?: React.Node,\n\n    /** Additional classes */\n    className?: string,\n\n    /** Controls whether or not the sidebar is expanded on the page */\n    expanded?: boolean,\n\n    /** Optional HTML attributes to append to menu item */\n    htmlAttributes?: Object,\n\n    /** Optionally apply \"aria-hidden\": \"true\" to CollapsibleSidebar wrapper */\n    isHidden?: boolean,\n\n    /** Optionally apply CSS to the CollapsibleSidebar wrapper */\n    wrapperClassName?: string,\n};\n\nclass CollapsibleSidebar extends React.Component<Props> {\n    navRef: { current: null | HTMLElement } = React.createRef();\n\n    static defaultProps = {\n        expanded: false,\n    };\n\n    focusEl = (direction: 'down' | 'up') => {\n        if (this.navRef.current) {\n            const tabbableEls = tabbable(this.navRef.current);\n            const currentElIndex = tabbableEls.findIndex(el => el === document.activeElement);\n            let index;\n            if (direction === 'down') {\n                index = currentElIndex === tabbableEls.length - 1 ? 0 : currentElIndex + 1;\n            } else {\n                index = currentElIndex === 0 ? tabbableEls.length - 1 : currentElIndex - 1;\n            }\n            tabbableEls[index].focus();\n        }\n    };\n\n    handleKeyDown = (event: SyntheticKeyboardEvent<>) => {\n        if (this.navRef.current && this.navRef.current.contains(document.activeElement)) {\n            switch (event.key) {\n                case KEYS.arrowDown:\n                    event.stopPropagation();\n                    event.preventDefault();\n                    this.focusEl('down');\n                    break;\n\n                case KEYS.arrowUp:\n                    event.stopPropagation();\n                    event.preventDefault();\n                    this.focusEl('up');\n                    break;\n\n                default:\n                    break;\n            }\n        }\n    };\n\n    render() {\n        const { children, className, expanded, isHidden, htmlAttributes, wrapperClassName } = this.props;\n        const navClasses = classNames(\n            {\n                'is-expanded': expanded,\n            },\n            'bdl-CollapsibleSidebar',\n            className,\n        );\n        const ariaAttributes = { 'aria-hidden': isHidden ? 'true' : undefined };\n        return (\n            <div\n                className={classNames('bdl-CollapsibleSidebar-wrapper', wrapperClassName)}\n                {...htmlAttributes}\n                {...ariaAttributes}\n                data-testid=\"CollapsibleSidebar-wrapper\"\n            >\n                <StyledNav ref={this.navRef} className={navClasses} onKeyDown={this.handleKeyDown}>\n                    {children}\n                </StyledNav>\n            </div>\n        );\n    }\n}\n\nexport default CollapsibleSidebar;\n"],"mappings":"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","ignoreList":[]}