{"version":3,"file":"CollapsibleSidebarNav.js","names":["React","classNames","debounce","throttle","Scrollbar","styled","CollapsibleSidebarContext","getScrollShadowClassName","StyledScrollThumb","div","withConfig","displayName","componentId","props","theme","primary","foreground","StyledScrollContainer","scrollShadowRgba","CollapsibleSidebarNav","Component","constructor","_defineProperty","createRef","setState","isScrolling","turnOffScrollingState","scrollRef","current","scrollHeight","clientHeight","scrollTop","scrollShadowClassName","debouncedTurnOffScrollingState","scrollValues","prevScrollValues","contentScrollHeight","prevClientHeight","prevContentScrollHeight","setScrollShadowState","state","newScrollShadowClassName","onScrollHandler","onUpdateHandler","componentDidMount","render","className","children","customScrollBarProps","classes","createElement","Provider","value","_extends","ref","noScrollX","onScroll","throtteldOnScrollHandler","onUpdate","throttleOnUpdateHandler","renderer","elementRef","restProps","_objectWithoutProperties","_excluded","style","height","width","flexGrow","thumbYProps","renderProps","_excluded2","background","trackYProps","top","marginRight"],"sources":["../../../src/features/collapsible-sidebar/CollapsibleSidebarNav.js"],"sourcesContent":["/**\n * @flow\n * @file Scroll container for lists to be used within CollapsibleSidebar component.\n * @author Box\n *\n * A Scroll container for lists to be used within CollapsibleSidebar component.\n * Applies scroll shadow in the container based on scroll position.\n */\n\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport debounce from 'lodash/debounce';\nimport throttle from 'lodash/throttle';\nimport Scrollbar from 'react-scrollbars-custom';\nimport styled from 'styled-components';\n\nimport type { ScrollState } from 'react-scrollbars-custom';\nimport CollapsibleSidebarContext from './CollapsibleSidebarContext';\nimport { getScrollShadowClassName } from './utils/scrollShadow';\n\nconst StyledScrollThumb = styled.div`\n    background: ${props => props.theme.primary.foreground};\n    opacity: 0;\n    transition: opacity 0.15s;\n\n    .scroll-shadow-container:hover &,\n    &.dragging {\n        opacity: 0.5;\n    }\n`;\n\n// The following values match the derived values from scrollShadow.scss\nconst StyledScrollContainer = styled.div`\n    &::before {\n        box-shadow: 0 6px 6px -2px ${props => props.theme.primary.scrollShadowRgba};\n    }\n\n    &::after {\n        box-shadow: 0 -6px 6px -2px ${props => props.theme.primary.scrollShadowRgba};\n    }\n`;\n\ntype Props = {\n    /** Primary content */\n    children?: React.Node,\n\n    /** Additional classes */\n    className?: string,\n    /** Props for react-scrollbars-custom Scrollbar component */\n    customScrollBarProps?: {},\n};\n\ntype State = {\n    isScrolling: boolean,\n    scrollShadowClassName?: string,\n};\n\nclass CollapsibleSidebarNav extends React.Component<Props, State> {\n    scrollRef: {\n        current: null | { clientHeight: number, scrollHeight: number, scrollTop: number },\n    } = React.createRef();\n\n    constructor(props: Props) {\n        super(props);\n\n        this.state = {\n            isScrolling: false,\n        };\n    }\n\n    componentDidMount() {\n        this.setScrollShadowState();\n    }\n\n    turnOffScrollingState = () => {\n        this.setState({\n            isScrolling: false,\n        });\n    };\n\n    // If there hasn't been an update to isScrolling in 100ms, it'll be set to false.\n    // eslint-disable-next-line react/sort-comp\n    debouncedTurnOffScrollingState = debounce(this.turnOffScrollingState, 100);\n\n    onScrollHandler = () => {\n        if (!this.scrollRef.current) {\n            return;\n        }\n\n        const { scrollHeight, clientHeight, scrollTop } = this.scrollRef.current;\n        const scrollShadowClassName = getScrollShadowClassName(scrollTop, scrollHeight, clientHeight);\n\n        this.setState({\n            isScrolling: true,\n            scrollShadowClassName,\n        });\n\n        this.debouncedTurnOffScrollingState();\n    };\n\n    onUpdateHandler = (scrollValues: ScrollState, prevScrollValues: ScrollState) => {\n        const { clientHeight, contentScrollHeight } = scrollValues;\n        const { clientHeight: prevClientHeight, contentScrollHeight: prevContentScrollHeight } = prevScrollValues;\n        if (clientHeight !== prevClientHeight || contentScrollHeight !== prevContentScrollHeight) {\n            this.setScrollShadowState();\n        }\n    };\n\n    setScrollShadowState = () => {\n        if (!this.scrollRef.current) {\n            return;\n        }\n\n        const { scrollShadowClassName } = this.state;\n\n        const { scrollHeight, clientHeight, scrollTop } = this.scrollRef.current;\n\n        const newScrollShadowClassName = getScrollShadowClassName(scrollTop, scrollHeight, clientHeight);\n\n        if (scrollShadowClassName !== newScrollShadowClassName) {\n            this.setState({ scrollShadowClassName: newScrollShadowClassName });\n        }\n    };\n\n    // sets onScrollHandler to true for a maximum of once every 50ms.\n    throtteldOnScrollHandler = throttle(this.onScrollHandler, 50);\n\n    throttleOnUpdateHandler = throttle(this.onUpdateHandler, 50);\n\n    render() {\n        const { className, children, customScrollBarProps = {} } = this.props;\n        const { isScrolling, scrollShadowClassName } = this.state;\n\n        const classes = classNames('bdl-CollapsibleSidebar-nav', className, {\n            'is-scrolling': isScrolling,\n        });\n\n        return (\n            <CollapsibleSidebarContext.Provider value={{ isScrolling }}>\n                <Scrollbar\n                    ref={this.scrollRef}\n                    className={scrollShadowClassName}\n                    noScrollX\n                    onScroll={this.throtteldOnScrollHandler}\n                    onUpdate={this.throttleOnUpdateHandler}\n                    renderer={props => {\n                        const { elementRef, ...restProps } = props;\n                        return <StyledScrollContainer {...restProps} ref={elementRef} />;\n                    }}\n                    style={{ height: 'auto', width: '100%', flexGrow: 1 }}\n                    thumbYProps={{\n                        renderer: renderProps => {\n                            const { elementRef, style, ...restProps } = renderProps;\n                            if (style && style.background) {\n                                delete style.background; // remove the hardcoded valued so that the theme value can be assigned\n                            }\n                            return <StyledScrollThumb style={style} {...restProps} ref={elementRef} />;\n                        },\n                    }}\n                    trackYProps={{\n                        style: { background: 'none', top: '0', height: '100%', width: '8px', marginRight: '1px' },\n                    }}\n                    {...customScrollBarProps}\n                >\n                    <div className={classes}>{children}</div>\n                </Scrollbar>\n            </CollapsibleSidebarContext.Provider>\n        );\n    }\n}\n\nexport default CollapsibleSidebarNav;\n"],"mappings":";;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAC9B,OAAOC,UAAU,MAAM,YAAY;AACnC,OAAOC,QAAQ,MAAM,iBAAiB;AACtC,OAAOC,QAAQ,MAAM,iBAAiB;AACtC,OAAOC,SAAS,MAAM,yBAAyB;AAC/C,OAAOC,MAAM,MAAM,mBAAmB;AAGtC,OAAOC,yBAAyB,MAAM,6BAA6B;AACnE,SAASC,wBAAwB,QAAQ,sBAAsB;AAE/D,MAAMC,iBAAiB,GAAGH,MAAM,CAACI,GAAG,CAAAC,UAAA;EAAAC,WAAA;EAAAC,WAAA;AAAA,qHAClBC,KAAK,IAAIA,KAAK,CAACC,KAAK,CAACC,OAAO,CAACC,UAAU,CAQxD;;AAED;AACA,MAAMC,qBAAqB,GAAGZ,MAAM,CAACI,GAAG,CAAAC,UAAA;EAAAC,WAAA;EAAAC,WAAA;AAAA,6FAEHC,KAAK,IAAIA,KAAK,CAACC,KAAK,CAACC,OAAO,CAACG,gBAAgB,EAI5CL,KAAK,IAAIA,KAAK,CAACC,KAAK,CAACC,OAAO,CAACG,gBAAgB,CAElF;AAiBD,MAAMC,qBAAqB,SAASnB,KAAK,CAACoB,SAAS,CAAe;EAK9DC,WAAWA,CAACR,KAAY,EAAE;IACtB,KAAK,CAACA,KAAK,CAAC;IAACS,eAAA,iCAHbtB,KAAK,CAACuB,SAAS,CAAC,CAAC;IAAAD,eAAA,gCAcG,MAAM;MAC1B,IAAI,CAACE,QAAQ,CAAC;QACVC,WAAW,EAAE;MACjB,CAAC,CAAC;IACN,CAAC;IAED;IACA;IAAAH,eAAA,yCACiCpB,QAAQ,CAAC,IAAI,CAACwB,qBAAqB,EAAE,GAAG,CAAC;IAAAJ,eAAA,0BAExD,MAAM;MACpB,IAAI,CAAC,IAAI,CAACK,SAAS,CAACC,OAAO,EAAE;QACzB;MACJ;MAEA,MAAM;QAAEC,YAAY;QAAEC,YAAY;QAAEC;MAAU,CAAC,GAAG,IAAI,CAACJ,SAAS,CAACC,OAAO;MACxE,MAAMI,qBAAqB,GAAGzB,wBAAwB,CAACwB,SAAS,EAAEF,YAAY,EAAEC,YAAY,CAAC;MAE7F,IAAI,CAACN,QAAQ,CAAC;QACVC,WAAW,EAAE,IAAI;QACjBO;MACJ,CAAC,CAAC;MAEF,IAAI,CAACC,8BAA8B,CAAC,CAAC;IACzC,CAAC;IAAAX,eAAA,0BAEiB,CAACY,YAAyB,EAAEC,gBAA6B,KAAK;MAC5E,MAAM;QAAEL,YAAY;QAAEM;MAAoB,CAAC,GAAGF,YAAY;MAC1D,MAAM;QAAEJ,YAAY,EAAEO,gBAAgB;QAAED,mBAAmB,EAAEE;MAAwB,CAAC,GAAGH,gBAAgB;MACzG,IAAIL,YAAY,KAAKO,gBAAgB,IAAID,mBAAmB,KAAKE,uBAAuB,EAAE;QACtF,IAAI,CAACC,oBAAoB,CAAC,CAAC;MAC/B;IACJ,CAAC;IAAAjB,eAAA,+BAEsB,MAAM;MACzB,IAAI,CAAC,IAAI,CAACK,SAAS,CAACC,OAAO,EAAE;QACzB;MACJ;MAEA,MAAM;QAAEI;MAAsB,CAAC,GAAG,IAAI,CAACQ,KAAK;MAE5C,MAAM;QAAEX,YAAY;QAAEC,YAAY;QAAEC;MAAU,CAAC,GAAG,IAAI,CAACJ,SAAS,CAACC,OAAO;MAExE,MAAMa,wBAAwB,GAAGlC,wBAAwB,CAACwB,SAAS,EAAEF,YAAY,EAAEC,YAAY,CAAC;MAEhG,IAAIE,qBAAqB,KAAKS,wBAAwB,EAAE;QACpD,IAAI,CAACjB,QAAQ,CAAC;UAAEQ,qBAAqB,EAAES;QAAyB,CAAC,CAAC;MACtE;IACJ,CAAC;IAED;IAAAnB,eAAA,mCAC2BnB,QAAQ,CAAC,IAAI,CAACuC,eAAe,EAAE,EAAE,CAAC;IAAApB,eAAA,kCAEnCnB,QAAQ,CAAC,IAAI,CAACwC,eAAe,EAAE,EAAE,CAAC;IA9DxD,IAAI,CAACH,KAAK,GAAG;MACTf,WAAW,EAAE;IACjB,CAAC;EACL;EAEAmB,iBAAiBA,CAAA,EAAG;IAChB,IAAI,CAACL,oBAAoB,CAAC,CAAC;EAC/B;EAyDAM,MAAMA,CAAA,EAAG;IACL,MAAM;MAAEC,SAAS;MAAEC,QAAQ;MAAEC,oBAAoB,GAAG,CAAC;IAAE,CAAC,GAAG,IAAI,CAACnC,KAAK;IACrE,MAAM;MAAEY,WAAW;MAAEO;IAAsB,CAAC,GAAG,IAAI,CAACQ,KAAK;IAEzD,MAAMS,OAAO,GAAGhD,UAAU,CAAC,4BAA4B,EAAE6C,SAAS,EAAE;MAChE,cAAc,EAAErB;IACpB,CAAC,CAAC;IAEF,oBACIzB,KAAA,CAAAkD,aAAA,CAAC5C,yBAAyB,CAAC6C,QAAQ;MAACC,KAAK,EAAE;QAAE3B;MAAY;IAAE,gBACvDzB,KAAA,CAAAkD,aAAA,CAAC9C,SAAS,EAAAiD,QAAA;MACNC,GAAG,EAAE,IAAI,CAAC3B,SAAU;MACpBmB,SAAS,EAAEd,qBAAsB;MACjCuB,SAAS;MACTC,QAAQ,EAAE,IAAI,CAACC,wBAAyB;MACxCC,QAAQ,EAAE,IAAI,CAACC,uBAAwB;MACvCC,QAAQ,EAAE/C,KAAK,IAAI;QACf,MAAM;YAAEgD;UAAyB,CAAC,GAAGhD,KAAK;UAAnBiD,SAAS,GAAAC,wBAAA,CAAKlD,KAAK,EAAAmD,SAAA;QAC1C,oBAAOhE,KAAA,CAAAkD,aAAA,CAACjC,qBAAqB,EAAAoC,QAAA,KAAKS,SAAS;UAAER,GAAG,EAAEO;QAAW,EAAE,CAAC;MACpE,CAAE;MACFI,KAAK,EAAE;QAAEC,MAAM,EAAE,MAAM;QAAEC,KAAK,EAAE,MAAM;QAAEC,QAAQ,EAAE;MAAE,CAAE;MACtDC,WAAW,EAAE;QACTT,QAAQ,EAAEU,WAAW,IAAI;UACrB,MAAM;cAAET,UAAU;cAAEI;YAAoB,CAAC,GAAGK,WAAW;YAAzBR,SAAS,GAAAC,wBAAA,CAAKO,WAAW,EAAAC,UAAA;UACvD,IAAIN,KAAK,IAAIA,KAAK,CAACO,UAAU,EAAE;YAC3B,OAAOP,KAAK,CAACO,UAAU,CAAC,CAAC;UAC7B;UACA,oBAAOxE,KAAA,CAAAkD,aAAA,CAAC1C,iBAAiB,EAAA6C,QAAA;YAACY,KAAK,EAAEA;UAAM,GAAKH,SAAS;YAAER,GAAG,EAAEO;UAAW,EAAE,CAAC;QAC9E;MACJ,CAAE;MACFY,WAAW,EAAE;QACTR,KAAK,EAAE;UAAEO,UAAU,EAAE,MAAM;UAAEE,GAAG,EAAE,GAAG;UAAER,MAAM,EAAE,MAAM;UAAEC,KAAK,EAAE,KAAK;UAAEQ,WAAW,EAAE;QAAM;MAC5F;IAAE,GACE3B,oBAAoB,gBAExBhD,KAAA,CAAAkD,aAAA;MAAKJ,SAAS,EAAEG;IAAQ,GAAEF,QAAc,CACjC,CACqB,CAAC;EAE7C;AACJ;AAEA,eAAe5B,qBAAqB","ignoreList":[]}