{"version":3,"file":"CollapsibleScrollbar.js","names":["React","classNames","debounce","throttle","Scrollbar","styled","getScrollShadowClassName","StyledScrollThumb","div","withConfig","displayName","componentId","StyledScrollContainer","props","theme","primary","scrollShadowRgba","CollapsibleScrollbar","_ref","ref","children","className","onScroll","style","thumbYStyles","trackYStyles","rest","_objectWithoutProperties","_excluded","scrollRef","useRef","isScrolling","setIsScrolling","useState","scrollShadowClassName","setScrollShadowClassName","turnOffScrollingState","debouncedTurnOffScrollingState","useCallback","onScrollHandler","scrollValues","prevScrollValues","current","scrollHeight","clientHeight","scrollTop","scrollShadowClassNameValue","setScrollShadowState","newScrollShadowClassName","onUpdateHandler","contentScrollHeight","prevClientHeight","prevContentScrollHeight","throttledOnScrollHandler","throttledOnUpdateHandler","classes","useEffect","useImperativeHandle","scrollbarRef","createElement","_extends","onUpdate","renderer","elementRef","restProps","_excluded2","thumbYProps","renderProps","renderPropStyle","_excluded3","_objectSpread","trackYProps","background","top","height","width","marginRight","forwardRef"],"sources":["../../../../../src/features/message-center/components/collapsibile-scrollbar/CollapsibleScrollbar.js"],"sourcesContent":["// @flow\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport debounce from 'lodash/debounce';\nimport throttle from 'lodash/throttle';\nimport Scrollbar from 'react-scrollbars-custom';\nimport styled from 'styled-components';\n\nimport type { ScrollState } from 'react-scrollbars-custom';\nimport { getScrollShadowClassName } from '../../../collapsible-sidebar/utils/scrollShadow';\n\nconst StyledScrollThumb = styled.div`\n    opacity: 0;\n    transition: opacity 0.15s;\n\n    .scroll-shadow-container:hover &,\n    &.dragging {\n        opacity: 0.5;\n    }\n`;\n\n// The following values match the derived values from scrollShadow.scss\nconst StyledScrollContainer = styled.div`\n    &::before {\n        box-shadow: 0 6px 6px -2px ${props => props.theme.primary.scrollShadowRgba};\n    }\n\n    &::after {\n        box-shadow: 0 -6px 6px -2px ${props => props.theme.primary.scrollShadowRgba};\n    }\n`;\n\ntype Props = {\n    /** Primary content */\n    children?: React.Node,\n    /** Additional classes */\n    className?: string,\n    onScroll?: (\n        { clientHeight: number, scrollLeft: number, scrollTop: number },\n        { clientHeight: number, scrollLeft: number, scrollTop: number },\n    ) => void,\n    style: { height: number | string, width: number | string },\n    thumbYStyles?: Object,\n    trackYStyles?: Object,\n};\n\ntype ScrollbarRef = {\n    clientHeight: number,\n    scrollHeight: number,\n    scrollLeft: number,\n    scrollTop: number,\n};\n\ntype Ref = {\n    scrollbarRef: { current: React.Ref<typeof Scrollbar> | null } | null,\n};\n\nfunction CollapsibleScrollbar(\n    { children, className, onScroll, style, thumbYStyles, trackYStyles, ...rest }: Props,\n    ref,\n) {\n    const scrollRef = React.useRef<ScrollbarRef | null>(null);\n    const [isScrolling, setIsScrolling] = React.useState(false);\n    const [scrollShadowClassName, setScrollShadowClassName] = React.useState();\n\n    const turnOffScrollingState = () => {\n        setIsScrolling(false);\n    };\n\n    // If there hasn't been an update to isScrolling in 100ms, it'll be set to false.\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    const debouncedTurnOffScrollingState = React.useCallback(debounce(turnOffScrollingState, 100), []);\n\n    const onScrollHandler = (scrollValues, prevScrollValues) => {\n        if (!scrollRef.current) {\n            return;\n        }\n\n        const { scrollHeight, clientHeight, scrollTop } = scrollValues;\n        const scrollShadowClassNameValue = getScrollShadowClassName(scrollTop, scrollHeight, clientHeight);\n\n        setIsScrolling(true);\n        setScrollShadowClassName(scrollShadowClassNameValue);\n\n        debouncedTurnOffScrollingState();\n        if (onScroll) {\n            onScroll(scrollValues, prevScrollValues);\n        }\n    };\n\n    const setScrollShadowState = React.useCallback(() => {\n        if (!scrollRef.current) {\n            return;\n        }\n\n        const { scrollHeight, clientHeight, scrollTop } = scrollRef.current;\n\n        const newScrollShadowClassName = getScrollShadowClassName(scrollTop, scrollHeight, clientHeight);\n\n        if (scrollShadowClassName !== newScrollShadowClassName) {\n            setScrollShadowClassName(newScrollShadowClassName);\n        }\n    }, [scrollShadowClassName]);\n\n    const onUpdateHandler = (scrollValues: ScrollState, prevScrollValues: ScrollState) => {\n        const { clientHeight, contentScrollHeight } = scrollValues;\n        const { clientHeight: prevClientHeight, contentScrollHeight: prevContentScrollHeight } = prevScrollValues;\n        if (clientHeight !== prevClientHeight || contentScrollHeight !== prevContentScrollHeight) {\n            setScrollShadowState();\n        }\n    };\n\n    // sets onScrollHandler to true for a maximum of once every 50ms.\n    const throttledOnScrollHandler = throttle(onScrollHandler, 50);\n\n    const throttledOnUpdateHandler = throttle(onUpdateHandler, 50);\n\n    const classes = classNames('bdl-CollapsibleScrollbar', className, {\n        'is-scrolling': isScrolling,\n    });\n\n    React.useEffect(() => {\n        setScrollShadowState();\n    }, [setScrollShadowState]);\n\n    // $FlowFixMe\n    React.useImperativeHandle(ref, () => ({\n        scrollbarRef: scrollRef,\n    }));\n\n    return (\n        <Scrollbar\n            ref={scrollRef}\n            className={scrollShadowClassName}\n            onScroll={throttledOnScrollHandler}\n            onUpdate={throttledOnUpdateHandler}\n            renderer={(props: Object) => {\n                const { elementRef, ...restProps } = props;\n                return <StyledScrollContainer {...restProps} ref={elementRef} />;\n            }}\n            style={style}\n            thumbYProps={{\n                renderer: renderProps => {\n                    const { elementRef, style: renderPropStyle, ...restProps } = renderProps;\n                    return (\n                        <StyledScrollThumb\n                            style={{ ...renderPropStyle, ...thumbYStyles }}\n                            {...restProps}\n                            ref={elementRef}\n                        />\n                    );\n                },\n            }}\n            trackYProps={{\n                style: {\n                    background: 'none',\n                    top: '0',\n                    height: '100%',\n                    width: '8px',\n                    marginRight: '1px',\n                    ...trackYStyles,\n                },\n            }}\n            {...rest}\n        >\n            <div className={classes} data-testid=\"content-wrapper\">\n                {children}\n            </div>\n        </Scrollbar>\n    );\n}\n\nexport default React.forwardRef<Props, Ref>(CollapsibleScrollbar);\n"],"mappings":"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","ignoreList":[]}