{"version":3,"file":"OpenWithButton.js","names":["React","FormattedMessage","noop","Button","IconOpenWith","Tooltip","messages","OpenWithButtonContents","utils","CLASS_INTEGRATION_ICON","OPEN_WITH_BUTTON_ICON_SIZE","getIcon","getTooltip","displayDescription","isLoading","error","disabledReasons","message","createElement","emptyOpenWithDescription","length","errorOpenWithDescription","OpenWithButton","onClick","displayIntegration","displayName","isDisabled","isDisplayIntegrationDisabled","extension","Icon","tooltipDisplayProps","isDisabledBecauseBoxToolsIsNotInstalled","isShown","showCloseButton","_extends","className","position","text","dimension","height","width"],"sources":["../../../src/elements/content-open-with/OpenWithButton.js"],"sourcesContent":["/**\n * @flow\n * @file Open With button\n * @author Box\n */\n\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport noop from 'lodash/noop';\nimport Button from '../../components/button/Button';\nimport IconOpenWith from '../../icons/general/IconOpenWith';\nimport Tooltip from '../common/Tooltip';\nimport messages from '../common/messages';\nimport OpenWithButtonContents from './OpenWithButtonContents';\nimport utils from './openWithUtils';\nimport { CLASS_INTEGRATION_ICON, OPEN_WITH_BUTTON_ICON_SIZE } from '../../constants';\nimport getIcon from './IconFileMap';\nimport type { DisabledReason, Integration } from '../../common/types/integrations';\n\ntype Props = {\n    displayIntegration?: ?Integration,\n    error: ?any,\n    icon?: string,\n    isLoading: boolean,\n    onClick?: Integration => void,\n    tooltipText?: string | Object,\n};\n\n/**\n * Gets the tooltip text for the ContentOpenWith button\n *\n * @private\n * @return {?(string | Element)} the tooltip message\n */\nexport const getTooltip = (\n    displayDescription: string,\n    isLoading: boolean,\n    error: ?Error,\n    disabledReasons: Array<DisabledReason> = [],\n): ?DisabledReason => {\n    if (isLoading) {\n        return null;\n    }\n\n    let message = <FormattedMessage {...messages.emptyOpenWithDescription} />;\n    if (disabledReasons.length > 0) {\n        [message] = disabledReasons;\n    } else if (error) {\n        message = <FormattedMessage {...messages.errorOpenWithDescription} />;\n    } else if (displayDescription) {\n        message = displayDescription;\n    }\n\n    return message;\n};\n\nconst OpenWithButton = ({ error, onClick = noop, displayIntegration, isLoading }: Props) => {\n    const { displayName, isDisabled: isDisplayIntegrationDisabled, extension, disabledReasons, displayDescription } =\n        displayIntegration || {};\n\n    const isDisabled = !!isDisplayIntegrationDisabled || !displayName;\n    const Icon = displayName ? getIcon(displayName) : IconOpenWith;\n\n    const tooltipDisplayProps = utils.isDisabledBecauseBoxToolsIsNotInstalled(displayIntegration)\n        ? { isShown: true, showCloseButton: true }\n        : {};\n\n    return (\n        <Tooltip\n            className=\"bcow-tooltip\"\n            position=\"bottom-center\"\n            text={getTooltip(displayDescription, isLoading, error, disabledReasons)}\n            {...tooltipDisplayProps}\n        >\n            <Button\n                data-testid=\"singleintegrationbutton\"\n                isDisabled={isDisabled}\n                onClick={() => (displayIntegration ? onClick(displayIntegration) : noop)}\n            >\n                <OpenWithButtonContents>\n                    <Icon\n                        className={CLASS_INTEGRATION_ICON}\n                        dimension={OPEN_WITH_BUTTON_ICON_SIZE}\n                        extension={extension}\n                        height={OPEN_WITH_BUTTON_ICON_SIZE}\n                        width={OPEN_WITH_BUTTON_ICON_SIZE}\n                    />\n                </OpenWithButtonContents>\n            </Button>\n        </Tooltip>\n    );\n};\n\nexport default OpenWithButton;\n"],"mappings":";AAAA;AACA;AACA;AACA;AACA;;AAEA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAC9B,SAASC,gBAAgB,QAAQ,YAAY;AAC7C,OAAOC,IAAI,MAAM,aAAa;AAC9B,OAAOC,MAAM,MAAM,gCAAgC;AACnD,OAAOC,YAAY,MAAM,kCAAkC;AAC3D,OAAOC,OAAO,MAAM,mBAAmB;AACvC,OAAOC,QAAQ,MAAM,oBAAoB;AACzC,OAAOC,sBAAsB,MAAM,0BAA0B;AAC7D,OAAOC,KAAK,MAAM,iBAAiB;AACnC,SAASC,sBAAsB,EAAEC,0BAA0B,QAAQ,iBAAiB;AACpF,OAAOC,OAAO,MAAM,eAAe;AAYnC;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMC,UAAU,GAAGA,CACtBC,kBAA0B,EAC1BC,SAAkB,EAClBC,KAAa,EACbC,eAAsC,GAAG,EAAE,KACzB;EAClB,IAAIF,SAAS,EAAE;IACX,OAAO,IAAI;EACf;EAEA,IAAIG,OAAO,gBAAGjB,KAAA,CAAAkB,aAAA,CAACjB,gBAAgB,EAAKK,QAAQ,CAACa,wBAA2B,CAAC;EACzE,IAAIH,eAAe,CAACI,MAAM,GAAG,CAAC,EAAE;IAC5B,CAACH,OAAO,CAAC,GAAGD,eAAe;EAC/B,CAAC,MAAM,IAAID,KAAK,EAAE;IACdE,OAAO,gBAAGjB,KAAA,CAAAkB,aAAA,CAACjB,gBAAgB,EAAKK,QAAQ,CAACe,wBAA2B,CAAC;EACzE,CAAC,MAAM,IAAIR,kBAAkB,EAAE;IAC3BI,OAAO,GAAGJ,kBAAkB;EAChC;EAEA,OAAOI,OAAO;AAClB,CAAC;AAED,MAAMK,cAAc,GAAGA,CAAC;EAAEP,KAAK;EAAEQ,OAAO,GAAGrB,IAAI;EAAEsB,kBAAkB;EAAEV;AAAiB,CAAC,KAAK;EACxF,MAAM;IAAEW,WAAW;IAAEC,UAAU,EAAEC,4BAA4B;IAAEC,SAAS;IAAEZ,eAAe;IAAEH;EAAmB,CAAC,GAC3GW,kBAAkB,IAAI,CAAC,CAAC;EAE5B,MAAME,UAAU,GAAG,CAAC,CAACC,4BAA4B,IAAI,CAACF,WAAW;EACjE,MAAMI,IAAI,GAAGJ,WAAW,GAAGd,OAAO,CAACc,WAAW,CAAC,GAAGrB,YAAY;EAE9D,MAAM0B,mBAAmB,GAAGtB,KAAK,CAACuB,uCAAuC,CAACP,kBAAkB,CAAC,GACvF;IAAEQ,OAAO,EAAE,IAAI;IAAEC,eAAe,EAAE;EAAK,CAAC,GACxC,CAAC,CAAC;EAER,oBACIjC,KAAA,CAAAkB,aAAA,CAACb,OAAO,EAAA6B,QAAA;IACJC,SAAS,EAAC,cAAc;IACxBC,QAAQ,EAAC,eAAe;IACxBC,IAAI,EAAEzB,UAAU,CAACC,kBAAkB,EAAEC,SAAS,EAAEC,KAAK,EAAEC,eAAe;EAAE,GACpEc,mBAAmB,gBAEvB9B,KAAA,CAAAkB,aAAA,CAACf,MAAM;IACH,eAAY,yBAAyB;IACrCuB,UAAU,EAAEA,UAAW;IACvBH,OAAO,EAAEA,CAAA,KAAOC,kBAAkB,GAAGD,OAAO,CAACC,kBAAkB,CAAC,GAAGtB;EAAM,gBAEzEF,KAAA,CAAAkB,aAAA,CAACX,sBAAsB,qBACnBP,KAAA,CAAAkB,aAAA,CAACW,IAAI;IACDM,SAAS,EAAE1B,sBAAuB;IAClC6B,SAAS,EAAE5B,0BAA2B;IACtCkB,SAAS,EAAEA,SAAU;IACrBW,MAAM,EAAE7B,0BAA2B;IACnC8B,KAAK,EAAE9B;EAA2B,CACrC,CACmB,CACpB,CACH,CAAC;AAElB,CAAC;AAED,eAAeY,cAAc","ignoreList":[]}