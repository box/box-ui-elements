{"version":3,"file":"ContentPicker-visual.stories.js","names":["React","expect","userEvent","waitFor","within","http","HttpResponse","ContentPicker","mockRootFolder","mockEmptyRootFolder","DEFAULT_HOSTNAME_API","basic","Modernization","args","enableModernizedComponents","withPagination","initialPageSize","selectedEmptyState","play","canvasElement","canvas","getByText","toBeInTheDocument","selectedButton","getByRole","name","click","singleSelect","maxSelectable","rows","getAllByRole","not","toBeDisabled","multipleSelect","fileTypeFilter","extensions","emptyState","rootFolderId","errorEmptyState","searchEmptyState","searchBar","type","customActionButtons","renderCustomActionButtons","selectedCount","createElement","title","component","features","global","FEATURE_FLAGS","FOLDER_ID","token","TOKEN","parameters","msw","handlers","get","json","status"],"sources":["../../../../../src/elements/content-picker/stories/tests/ContentPicker-visual.stories.js"],"sourcesContent":["import React from 'react';\nimport { expect, userEvent, waitFor, within } from 'storybook/test';\nimport { http, HttpResponse } from 'msw';\nimport ContentPicker from '../../ContentPicker';\nimport { mockRootFolder, mockEmptyRootFolder } from '../../../common/__mocks__/mockRootFolder';\n\nimport { DEFAULT_HOSTNAME_API } from '../../../../constants';\n\nexport const basic = {};\n\nexport const Modernization = {\n    args: {\n        enableModernizedComponents: true,\n    },\n};\n\nexport const withPagination = {\n    args: {\n        initialPageSize: 1,\n    },\n};\n\nexport const selectedEmptyState = {\n    play: async ({ canvasElement }) => {\n        const canvas = within(canvasElement);\n        await waitFor(() => {\n            expect(canvas.getByText('An Ordered Folder')).toBeInTheDocument();\n        });\n\n        const selectedButton = canvas.getByRole('button', { name: '0 Selected' });\n        await userEvent.click(selectedButton);\n        await waitFor(() => {\n            expect(canvas.getByText(\"You haven't selected any items yet.\")).toBeInTheDocument();\n        });\n    },\n};\n\nexport const singleSelect = {\n    args: {\n        maxSelectable: 1,\n    },\n    play: async ({ canvasElement }) => {\n        const canvas = within(canvasElement);\n        await waitFor(() => {\n            expect(canvas.getByText('An Ordered Folder')).toBeInTheDocument();\n        });\n\n        const rows = canvas.getAllByRole('row');\n        await userEvent.click(rows[3]);\n        await waitFor(() => {\n            expect(canvas.getByRole('button', { name: 'Choose' })).not.toBeDisabled();\n        });\n    },\n};\n\nexport const multipleSelect = {\n    args: {\n        maxSelectable: 3,\n    },\n    play: async ({ canvasElement }) => {\n        const canvas = within(canvasElement);\n        await waitFor(() => {\n            expect(canvas.getByText('An Ordered Folder')).toBeInTheDocument();\n        });\n\n        const rows = canvas.getAllByRole('row');\n        await userEvent.click(rows[3]);\n        await userEvent.click(rows[4]);\n\n        await waitFor(() => {\n            expect(canvas.getByText('2 Selected')).toBeInTheDocument();\n        });\n    },\n};\n\nexport const fileTypeFilter = {\n    args: {\n        extensions: ['doc', 'docx'],\n    },\n};\n\nexport const emptyState = {\n    args: {\n        rootFolderId: '74729718131',\n    },\n    play: async ({ canvasElement }) => {\n        const canvas = within(canvasElement);\n        await waitFor(() => {\n            expect(canvas.getByText('There are no items in this folder.')).toBeInTheDocument();\n        });\n    },\n};\n\nexport const errorEmptyState = {\n    args: {\n        rootFolderId: '191354690948',\n    },\n    play: async ({ canvasElement }) => {\n        const canvas = within(canvasElement);\n        await waitFor(() => {\n            expect(canvas.getByText('A network error has occurred while trying to load.')).toBeInTheDocument();\n        });\n    },\n};\n\nexport const searchEmptyState = {\n    args: {\n        rootFolderId: '74729718131',\n    },\n    play: async ({ canvasElement }) => {\n        const canvas = within(canvasElement);\n        const searchBar = canvas.getByRole('searchbox', { name: 'Search files and folders' });\n        await userEvent.type(searchBar, 'foo');\n\n        expect(canvas.getByText(\"Sorry, we couldn't find what you're looking for.\")).toBeInTheDocument();\n    },\n};\n\nexport const customActionButtons = {\n    args: {\n        renderCustomActionButtons: ({ selectedCount }) => (\n            <button type=\"button\">Custom Action ({selectedCount} items)</button>\n        ),\n    },\n};\n\nexport default {\n    title: 'Elements/ContentPicker/tests/visual',\n    component: ContentPicker,\n    args: {\n        features: global.FEATURE_FLAGS,\n        rootFolderId: global.FOLDER_ID,\n        token: global.TOKEN,\n    },\n    parameters: {\n        msw: {\n            handlers: [\n                http.get(`${DEFAULT_HOSTNAME_API}/2.0/folders/69083462919`, () => {\n                    return HttpResponse.json(mockRootFolder);\n                }),\n                http.get(`${DEFAULT_HOSTNAME_API}/2.0/folders/74729718131`, () => {\n                    return HttpResponse.json(mockEmptyRootFolder);\n                }),\n                http.get(`${DEFAULT_HOSTNAME_API}/2.0/folders/191354690948`, () => {\n                    return new HttpResponse('Internal Server Error', { status: 500 });\n                }),\n            ],\n        },\n    },\n};\n"],"mappings":"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","ignoreList":[]}