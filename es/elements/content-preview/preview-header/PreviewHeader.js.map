{"version":3,"file":"PreviewHeader.js","names":["React","injectIntl","classNames","getProp","AsyncLoad","FileInfo","IconClose","IconDownload","IconDrawAnnotationMode","IconPointAnnotation","IconPrint","Logo","messages","PlainButton","bdlGray50","LoadableContentAnswers","loader","LoadableContentOpenWith","PreviewHeader","canAnnotate","canDownload","canPrint","contentAnswersProps","contentOpenWithProps","file","intl","logoUrl","onClose","onDownload","onPrint","selectedVersion","token","fileId","id","shouldRenderAnswers","show","shouldRenderOpenWith","currentVersionId","selectedVersionId","isPreviewingCurrentVersion","closeMsg","formatMessage","close","back","printMsg","print","downloadMsg","download","drawMsg","drawAnnotation","pointMsg","pointAnnotation","createElement","className","url","version","Fragment","_extends","title","type","color","height","width","onClick"],"sources":["../../../../src/elements/content-preview/preview-header/PreviewHeader.js"],"sourcesContent":["/**\n * @flow\n * @file Preview header component\n * @author Box\n */\n\nimport * as React from 'react';\nimport { injectIntl } from 'react-intl';\nimport type { IntlShape } from 'react-intl';\nimport classNames from 'classnames';\nimport getProp from 'lodash/get';\nimport AsyncLoad from '../../common/async-load';\nimport FileInfo from './FileInfo';\nimport IconClose from '../../../icons/general/IconClose';\nimport IconDownload from '../../../icons/general/IconDownloadSolid';\nimport IconDrawAnnotationMode from '../../../icons/annotations/IconDrawAnnotation';\nimport IconPointAnnotation from '../../../icons/annotations/IconPointAnnotation';\nimport IconPrint from '../../../icons/general/IconPrint';\nimport Logo from '../../common/header/Logo';\nimport messages from '../../common/messages';\nimport PlainButton from '../../../components/plain-button/PlainButton';\nimport { bdlGray50 } from '../../../styles/variables';\nimport type { BoxItem, BoxItemVersion } from '../../../common/types/core';\n\nimport './PreviewHeader.scss';\n\ntype Props = {\n    canAnnotate: boolean,\n    canDownload: boolean,\n    canPrint?: boolean,\n    contentAnswersProps?: ContentAnswersProps,\n    contentOpenWithProps?: ContentOpenWithProps,\n    file?: BoxItem,\n    intl: IntlShape,\n    logoUrl?: string,\n    onClose?: Function,\n    onDownload: Function,\n    onPrint: Function,\n    selectedVersion: ?BoxItemVersion,\n    token: ?string,\n};\n\nconst LoadableContentAnswers = AsyncLoad({\n    // $FlowFixMe TypeScript component\n    loader: () => import(/* webpackMode: \"lazy\", webpackChunkName: \"content-answers\" */ '../../common/content-answers'),\n});\nconst LoadableContentOpenWith = AsyncLoad({\n    loader: () => import(/* webpackMode: \"lazy\", webpackChunkName: \"content-open-with\" */ '../../content-open-with'),\n});\n\nconst PreviewHeader = ({\n    canAnnotate,\n    canDownload,\n    canPrint,\n    contentAnswersProps = {},\n    contentOpenWithProps = {},\n    file,\n    intl,\n    logoUrl,\n    onClose,\n    onDownload,\n    onPrint,\n    selectedVersion,\n    token,\n}: Props) => {\n    const fileId = file && file.id;\n    const shouldRenderAnswers = fileId && contentAnswersProps.show;\n    const shouldRenderOpenWith = fileId && contentOpenWithProps.show;\n    const currentVersionId = getProp(file, 'file_version.id');\n    const selectedVersionId = getProp(selectedVersion, 'id', currentVersionId);\n    const isPreviewingCurrentVersion = currentVersionId === selectedVersionId;\n\n    // When previewing an older version the close button returns the user to the current version\n    const closeMsg = isPreviewingCurrentVersion\n        ? intl.formatMessage(messages.close)\n        : intl.formatMessage(messages.back);\n    const printMsg = intl.formatMessage(messages.print);\n    const downloadMsg = intl.formatMessage(messages.download);\n    const drawMsg = intl.formatMessage(messages.drawAnnotation);\n    const pointMsg = intl.formatMessage(messages.pointAnnotation);\n\n    return (\n        <header\n            className={classNames('bcpr-PreviewHeader', {\n                'bcpr-PreviewHeader--basic': !isPreviewingCurrentVersion,\n            })}\n        >\n            {/*\n                bp-header and bp-base-header are used by box-annotations,\n                and must be put one level under bcpr-PreviewHeader\n            */}\n            <div className=\"bcpr-PreviewHeader-content bp-header bp-base-header\">\n                {logoUrl ? <Logo url={logoUrl} /> : <FileInfo file={file} version={selectedVersion} />}\n\n                <div className=\"bcpr-PreviewHeader-controls\">\n                    {isPreviewingCurrentVersion && (\n                        <>\n                            {shouldRenderOpenWith && (\n                                <LoadableContentOpenWith\n                                    className=\"bcpr-bcow-btn\"\n                                    fileId={fileId}\n                                    token={token}\n                                    {...contentOpenWithProps}\n                                />\n                            )}\n                            {shouldRenderAnswers && (\n                                <LoadableContentAnswers\n                                    className=\"bcpr-PreviewHeader-contentAnswers\"\n                                    file={file}\n                                    {...contentAnswersProps}\n                                />\n                            )}\n                            {canAnnotate && (\n                                <>\n                                    <PlainButton\n                                        aria-label={drawMsg}\n                                        className=\"bcpr-PreviewHeader-button bp-btn-annotate-draw bp-is-hidden\"\n                                        title={drawMsg}\n                                        type=\"button\"\n                                    >\n                                        <IconDrawAnnotationMode color={bdlGray50} height={18} width={18} />\n                                    </PlainButton>\n                                    <PlainButton\n                                        aria-label={pointMsg}\n                                        className=\"bcpr-PreviewHeader-button bp-btn-annotate-point bp-is-hidden\"\n                                        title={pointMsg}\n                                        type=\"button\"\n                                    >\n                                        <IconPointAnnotation color={bdlGray50} height={18} width={18} />\n                                    </PlainButton>\n                                </>\n                            )}\n                            {canPrint && (\n                                <PlainButton\n                                    aria-label={printMsg}\n                                    className=\"bcpr-PreviewHeader-button\"\n                                    onClick={onPrint}\n                                    title={printMsg}\n                                    type=\"button\"\n                                >\n                                    <IconPrint color={bdlGray50} height={22} width={22} />\n                                </PlainButton>\n                            )}\n                            {canDownload && (\n                                <PlainButton\n                                    aria-label={downloadMsg}\n                                    className=\"bcpr-PreviewHeader-button\"\n                                    data-target-id=\"PreviewHeader-downloadButton\"\n                                    onClick={onDownload}\n                                    title={downloadMsg}\n                                    type=\"button\"\n                                >\n                                    <IconDownload color={bdlGray50} height={18} width={18} />\n                                </PlainButton>\n                            )}\n                        </>\n                    )}\n\n                    {onClose && (\n                        <PlainButton\n                            aria-label={isPreviewingCurrentVersion && closeMsg}\n                            className=\"bcpr-PreviewHeader-button bcpr-PreviewHeader-button-close\"\n                            onClick={onClose}\n                            type=\"button\"\n                        >\n                            {isPreviewingCurrentVersion ? (\n                                <IconClose color={bdlGray50} height={24} width={24} />\n                            ) : (\n                                closeMsg\n                            )}\n                        </PlainButton>\n                    )}\n                </div>\n            </div>\n        </header>\n    );\n};\n\nexport default injectIntl(PreviewHeader);\n"],"mappings":"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","ignoreList":[]}