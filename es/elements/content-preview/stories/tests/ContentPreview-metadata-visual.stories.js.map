{"version":3,"file":"ContentPreview-metadata-visual.stories.js","names":["userEvent","within","http","HttpResponse","DEFAULT_HOSTNAME_API","mockEventRequest","mockFileRequest","mockUserRequest","ContentPreview","apiV2Path","fileIdWithMetadata","mockFileWithMetadata","url","response","type","id","etag","extension","name","permissions","can_download","can_preview","can_upload","can_comment","can_rename","can_delete","can_share","can_set_share_access","can_invite_collaborator","can_annotate","can_view_annotations_all","can_view_annotations_self","can_create_annotations","can_view_annotations","mockMetadataTemplateWithLongOptions","limit","entries","templateKey","scope","displayName","hidden","copyInstanceOnItemCopy","fields","key","description","options","mockMetadataInstances","$id","$version","$type","$parent","$typeVersion","$template","$scope","$templateKey","longDropdownField","$canEdit","mockGlobalMetadataTemplates","metadataDropdownPositioning","parameters","msw","handlers","get","json","play","canvasElement","canvas","editButton","findByRole","click","dropdownField","title","component","args","fileId","hasHeader","contentSidebarProps","hasMetadata","metadataSidebarProps","isFeatureEnabled","features"],"sources":["../../../../../src/elements/content-preview/stories/tests/ContentPreview-metadata-visual.stories.js"],"sourcesContent":["import { userEvent, within } from 'storybook/test';\nimport { http, HttpResponse } from 'msw';\n\nimport { DEFAULT_HOSTNAME_API } from '../../../../constants';\nimport { mockEventRequest, mockFileRequest, mockUserRequest } from '../../../common/__mocks__/mockRequests';\nimport ContentPreview from '../../ContentPreview';\n\nconst apiV2Path = `${DEFAULT_HOSTNAME_API}/2.0`;\nconst fileIdWithMetadata = '415542803939';\n\n// Mock file with metadata permissions\nconst mockFileWithMetadata = {\n    url: `${apiV2Path}/files/${fileIdWithMetadata}`,\n    response: {\n        type: 'file',\n        id: fileIdWithMetadata,\n        etag: '3',\n        extension: 'pdf',\n        name: 'Test Document.pdf',\n        permissions: {\n            can_download: true,\n            can_preview: true,\n            can_upload: true,\n            can_comment: true,\n            can_rename: true,\n            can_delete: true,\n            can_share: true,\n            can_set_share_access: true,\n            can_invite_collaborator: true,\n            can_annotate: true,\n            can_view_annotations_all: true,\n            can_view_annotations_self: true,\n            can_create_annotations: true,\n            can_view_annotations: true,\n        },\n    },\n};\n\n// Mock metadata template with very long dropdown options\nconst mockMetadataTemplateWithLongOptions = {\n    url: `${apiV2Path}/metadata_templates/enterprise`,\n    response: {\n        limit: 1000,\n        entries: [\n            {\n                id: 'long-dropdown-template-id',\n                type: 'metadata_template',\n                templateKey: 'longDropdownTemplate',\n                scope: 'enterprise_173733877',\n                displayName: 'Long Dropdown Test Template',\n                hidden: false,\n                copyInstanceOnItemCopy: false,\n                fields: [\n                    {\n                        id: 'long-dropdown-field-id',\n                        type: 'enum',\n                        key: 'longDropdownField',\n                        displayName: 'Department Selection',\n                        hidden: false,\n                        description: 'Select your department from the dropdown',\n                        options: [\n                            {\n                                id: 'option-1',\n                                key: 'Engineering - Software Development - Frontend React TypeScript Team Alpha Division',\n                            },\n                            {\n                                id: 'option-2',\n                                key: 'Marketing - Digital Campaigns - Social Media Content Strategy Team Beta Division',\n                            },\n                            {\n                                id: 'option-3',\n                                key: 'Human Resources - Talent Acquisition - Employee Experience Team Gamma Division',\n                            },\n                            {\n                                id: 'option-4',\n                                key: 'Finance - Accounting - Budget Planning - Financial Analysis Team Delta Division',\n                            },\n                            {\n                                id: 'option-5',\n                                key: 'Operations - Supply Chain - Logistics - Vendor Management Team Epsilon Division',\n                            },\n                            {\n                                id: 'option-6',\n                                key: 'Legal - Compliance - Regulatory Affairs - Contract Management Team Zeta Division',\n                            },\n                        ],\n                    },\n                ],\n            },\n        ],\n    },\n};\n\n// Mock metadata instance for the file\nconst mockMetadataInstances = {\n    url: `${apiV2Path}/files/${fileIdWithMetadata}/metadata`,\n    response: {\n        entries: [\n            {\n                $id: 'long-dropdown-instance-id',\n                $version: 1,\n                $type: 'longDropdownTemplate-template-type',\n                $parent: `file_${fileIdWithMetadata}`,\n                $typeVersion: 1,\n                $template: 'longDropdownTemplate',\n                $scope: 'enterprise_173733877',\n                $templateKey: 'longDropdownTemplate',\n                longDropdownField: 'Engineering - Software Development - Frontend React TypeScript Team Alpha Division',\n                $canEdit: true,\n            },\n        ],\n        limit: 100,\n    },\n};\n\nconst mockGlobalMetadataTemplates = {\n    url: `${apiV2Path}/metadata_templates/global`,\n    response: {\n        entries: [],\n    },\n};\n\nexport const metadataDropdownPositioning = {\n    parameters: {\n        msw: {\n            handlers: [\n                http.get(mockFileWithMetadata.url, () => HttpResponse.json(mockFileWithMetadata.response)),\n                http.get(mockMetadataTemplateWithLongOptions.url, () =>\n                    HttpResponse.json(mockMetadataTemplateWithLongOptions.response),\n                ),\n                http.get(mockMetadataInstances.url, () => HttpResponse.json(mockMetadataInstances.response)),\n                http.get(mockGlobalMetadataTemplates.url, () =>\n                    HttpResponse.json(mockGlobalMetadataTemplates.response),\n                ),\n                http.get(mockFileRequest.url, () => HttpResponse.json(mockFileRequest.response)),\n                http.get(mockUserRequest.url, () => HttpResponse.json(mockUserRequest.response)),\n                http.get(mockEventRequest.url, () => HttpResponse.json(mockEventRequest.response)),\n            ],\n        },\n    },\n    play: async ({ canvasElement }) => {\n        const canvas = within(canvasElement);\n\n        const editButton = await canvas.findByRole('button', { name: 'Edit Long Dropdown Test Template' });\n        await userEvent.click(editButton);\n\n        const dropdownField = await canvas.findByRole('combobox', { name: 'Department Selection' });\n        await userEvent.click(dropdownField);\n\n        await canvas.findByRole('option', {\n            name: 'Engineering - Software Development - Frontend React TypeScript Team Alpha Division',\n        });\n    },\n};\n\nexport default {\n    title: 'Elements/ContentPreview/tests/visual/Metadata',\n    component: ContentPreview,\n    args: {\n        fileId: fileIdWithMetadata,\n        hasHeader: true,\n        contentSidebarProps: {\n            hasMetadata: true,\n            metadataSidebarProps: {\n                isFeatureEnabled: true,\n            },\n            features: {\n                'metadata.redesign.enabled': true,\n            },\n        },\n    },\n};\n"],"mappings":"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","ignoreList":[]}