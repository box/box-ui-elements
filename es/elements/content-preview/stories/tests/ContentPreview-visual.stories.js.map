{"version":3,"file":"ContentPreview-visual.stories.js","names":["React","BrowserRouter","Router","expect","userEvent","waitFor","within","Notification","http","HttpResponse","mockEventRequest","mockFileRequest","mockUserRequest","DEFAULT_HOSTNAME_API","ContentPreview","WAIT_TIMEOUT","basic","play","canvasElement","canvas","button","findByRole","name","timeout","toBeInTheDocument","click","dialog","document","querySelector","modal","getByText","Modernization","args","enableModernizedComponents","closeModal","closeButton","getByRole","submitAnswer","textInput","focus","keyboard","pointerEventsCheck","answer","findByText","hoverOverCitation","citations","getAllByTestId","citation","hover","main","toBeVisible","citationDisabled","contentAnswersProps","show","isCitationsEnabled","isMarkdownEnabled","queryByText","not","clearConversation","clearConversationButton","oldAnswer","markdownEnabled","markdownDisabled","title","component","render","_ref","_extends","_objectDestructuringEmpty","createElement","Provider","key","fileId","token","features","global","FEATURE_FLAGS","FILE_ID","hasHeader","TOKEN","parameters","chromatic","ignoreSelectors","msw","handlers","post","url","json","response","get","request","body","prompt","created_at","completion_reason","content","id","type"],"sources":["../../../../../src/elements/content-preview/stories/tests/ContentPreview-visual.stories.js"],"sourcesContent":["// @flow\nimport * as React from 'react';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport { expect, userEvent, waitFor, within } from 'storybook/test';\nimport { Notification } from '@box/blueprint-web';\nimport { http, HttpResponse } from 'msw';\n\nimport { mockEventRequest, mockFileRequest, mockUserRequest } from '../../../common/__mocks__/mockRequests';\nimport { DEFAULT_HOSTNAME_API } from '../../../../constants';\n\nimport ContentPreview from '../../ContentPreview';\n\nconst WAIT_TIMEOUT = 5000;\n\nexport const basic = {\n    play: async ({ canvasElement }) => {\n        const canvas = within(canvasElement);\n        const button = await canvas.findByRole('button', { name: 'Box AI' }, { timeout: WAIT_TIMEOUT });\n        expect(button).toBeInTheDocument();\n        await userEvent.click(button);\n\n        const dialog = await waitFor(() => document.querySelector('[role=\"dialog\"]'));\n        expect(dialog).toBeInTheDocument();\n\n        const modal = within(dialog);\n        expect(modal.getByText(/Welcome to Box AI/i)).toBeInTheDocument();\n        expect(modal.getByText('Chat cleared when you close pdf')).toBeInTheDocument();\n\n        expect(modal.getByText('Ask Box AI')).toBeInTheDocument();\n    },\n};\n\nexport const Modernization = {\n    args: {\n        enableModernizedComponents: true,\n    },\n};\n\nexport const closeModal = {\n    play: async ({ canvasElement }) => {\n        const canvas = within(canvasElement);\n        const button = await canvas.findByRole('button', { name: 'Box AI' }, { timeout: WAIT_TIMEOUT });\n        expect(button).toBeInTheDocument();\n        await userEvent.click(button);\n\n        const dialog = await waitFor(() => document.querySelector('[role=\"dialog\"]'));\n        expect(dialog).toBeInTheDocument();\n\n        const modal = within(dialog);\n        const closeButton = modal.getByRole('button', { name: 'Close Modal' });\n        await userEvent.click(closeButton);\n    },\n};\n\nexport const submitAnswer = {\n    play: async ({ canvasElement }) => {\n        const canvas = within(canvasElement);\n        const button = await canvas.findByRole('button', { name: 'Box AI' }, { timeout: WAIT_TIMEOUT });\n        expect(button).toBeInTheDocument();\n        await userEvent.click(button);\n\n        const dialog = await waitFor(() => document.querySelector('[role=\"dialog\"]'));\n        expect(dialog).toBeInTheDocument();\n\n        const modal = within(dialog);\n        const textInput = modal.getByRole('textbox', { name: 'Ask Box AI' });\n        expect(textInput).toBeInTheDocument();\n        textInput.focus();\n        await userEvent.keyboard('Why are public APIs important?');\n\n        await userEvent.click(modal.getByRole('button', { name: 'Ask' }), { pointerEventsCheck: 0 });\n        const answer = await modal.findByText('Public APIs are important because of key and important reasons.');\n        expect(answer).toBeInTheDocument();\n\n        expect(modal.getByText('Based on:')).toBeInTheDocument();\n    },\n};\n\nexport const hoverOverCitation = {\n    play: async ({ canvasElement }) => {\n        const canvas = within(canvasElement);\n        const button = await canvas.findByRole('button', { name: 'Box AI' }, { timeout: WAIT_TIMEOUT });\n        expect(button).toBeInTheDocument();\n        await userEvent.click(button);\n\n        const dialog = await waitFor(() => document.querySelector('[role=\"dialog\"]'));\n\n        expect(dialog).toBeInTheDocument();\n        const modal = within(dialog);\n        const textInput = modal.getByRole('textbox', { name: 'Ask Box AI' });\n        expect(textInput).toBeInTheDocument();\n        textInput.focus();\n        await userEvent.keyboard('Why are public APIs important?');\n        await userEvent.click(modal.getByRole('button', { name: 'Ask' }), { pointerEventsCheck: 0 });\n\n        const answer = await modal.findByText('Public APIs are important because of key and important reasons.');\n        expect(answer).toBeInTheDocument();\n\n        expect(modal.getByText('Based on:')).toBeInTheDocument();\n\n        const citations = await modal.getAllByTestId('content-answers-citation-status');\n        const citation = citations[0];\n        expect(citation).toBeInTheDocument();\n        await userEvent.hover(citation);\n\n        const main = await waitFor(() => document.querySelector('.sb-main-padded.sb-show-main'));\n        await waitFor(async () => {\n            await expect(within(main).getByText('Public APIs are key drivers of innovation and growth.')).toBeVisible();\n        });\n    },\n};\n\nexport const citationDisabled = {\n    args: {\n        contentAnswersProps: {\n            show: true,\n            isCitationsEnabled: false,\n            isMarkdownEnabled: true,\n        },\n    },\n    play: async ({ canvasElement }) => {\n        const canvas = within(canvasElement);\n        const button = await canvas.findByRole('button', { name: 'Box AI' }, { timeout: WAIT_TIMEOUT });\n        expect(button).toBeInTheDocument();\n        await userEvent.click(button);\n\n        const dialog = await waitFor(() => document.querySelector('[role=\"dialog\"]'));\n        expect(dialog).toBeInTheDocument();\n\n        const modal = within(dialog);\n        const textInput = modal.getByRole('textbox', { name: 'Ask Box AI' });\n        expect(textInput).toBeInTheDocument();\n        textInput.focus();\n        await userEvent.keyboard('Why are public APIs important?');\n        await userEvent.click(modal.getByRole('button', { name: 'Ask' }), { pointerEventsCheck: 0 });\n\n        const answer = await modal.findByText('Public APIs are important because of key and important reasons.');\n        expect(answer).toBeInTheDocument();\n\n        expect(modal.queryByText('Based on:')).not.toBeInTheDocument();\n    },\n};\n\nexport const clearConversation = {\n    play: async ({ canvasElement }) => {\n        const canvas = within(canvasElement);\n        const button = await canvas.findByRole('button', { name: 'Box AI' }, { timeout: WAIT_TIMEOUT });\n        expect(button).toBeInTheDocument();\n        await userEvent.click(button);\n\n        const dialog = await waitFor(() => document.querySelector('[role=\"dialog\"]'));\n        expect(dialog).toBeInTheDocument();\n\n        const modal = within(dialog);\n        const textInput = modal.getByRole('textbox', { name: 'Ask Box AI' });\n        expect(textInput).toBeInTheDocument();\n        textInput.focus();\n        await userEvent.keyboard('Why are public APIs important?');\n        await userEvent.click(modal.getByRole('button', { name: 'Ask' }), { pointerEventsCheck: 0 });\n\n        const answer = await modal.findByText('Public APIs are important because of key and important reasons.');\n        expect(answer).toBeInTheDocument();\n\n        expect(modal.getByText('Based on:')).toBeInTheDocument();\n\n        const clearConversationButton = modal.getByRole('button', { name: 'Clear conversation' });\n        await userEvent.click(clearConversationButton);\n\n        const oldAnswer = modal.queryByText('Public APIs are important because of key and important reasons.');\n        expect(oldAnswer).not.toBeInTheDocument();\n    },\n};\n\nexport const markdownEnabled = {\n    play: async ({ canvasElement }) => {\n        const canvas = within(canvasElement);\n        const button = await canvas.findByRole('button', { name: 'Box AI' }, { timeout: WAIT_TIMEOUT });\n        expect(button).toBeInTheDocument();\n        await userEvent.click(button);\n\n        const dialog = await waitFor(() => document.querySelector('[role=\"dialog\"]'));\n        expect(dialog).toBeInTheDocument();\n\n        const modal = within(dialog);\n        const textInput = modal.getByRole('textbox', { name: 'Ask Box AI' });\n        expect(textInput).toBeInTheDocument();\n        textInput.focus();\n        await userEvent.keyboard('table summarizing the highlights from the document');\n\n        await userEvent.click(modal.getByRole('button', { name: 'Ask' }), { pointerEventsCheck: 0 });\n        const answer = await modal.findByText('Hereâ€™s a table summarizing the highlights from the document:');\n        expect(answer).toBeInTheDocument();\n    },\n};\n\nexport const markdownDisabled = {\n    args: {\n        contentAnswersProps: {\n            show: true,\n            isCitationsEnabled: false,\n            isMarkdownEnabled: false,\n        },\n    },\n    play: async ({ canvasElement }) => {\n        const canvas = within(canvasElement);\n        const button = await canvas.findByRole('button', { name: 'Box AI' }, { timeout: WAIT_TIMEOUT });\n        expect(button).toBeInTheDocument();\n        await userEvent.click(button);\n\n        const dialog = await waitFor(() => document.querySelector('[role=\"dialog\"]'));\n        expect(dialog).toBeInTheDocument();\n\n        const modal = within(dialog);\n        const textInput = modal.getByRole('textbox', { name: 'Ask Box AI' });\n        expect(textInput).toBeInTheDocument();\n        textInput.focus();\n        await userEvent.keyboard('table summarizing the highlights from the document');\n\n        await userEvent.click(modal.getByRole('button', { name: 'Ask' }), { pointerEventsCheck: 0 });\n    },\n};\n\nexport default {\n    title: 'Elements/ContentPreview/tests/visual/BoxAI',\n    component: ContentPreview,\n    render: ({ ...args }: any) => (\n        <Notification.Provider>\n            <Router>\n                <ContentPreview key={`${args.fileId}-${args.token}`} {...args} />\n            </Router>\n        </Notification.Provider>\n    ),\n    args: {\n        features: global.FEATURE_FLAGS,\n        fileId: global.FILE_ID,\n        hasHeader: true,\n        token: global.TOKEN,\n        contentAnswersProps: {\n            show: true,\n            isCitationsEnabled: true,\n            isMarkdownEnabled: true,\n        },\n    },\n    parameters: {\n        chromatic: {\n            ignoreSelectors: ['[class^=\"bp_avatar_module_avatar--\"] > [class^=\"bp_avatar_module_text--\"]'],\n        },\n        msw: {\n            handlers: [\n                http.post(mockEventRequest.url, () => {\n                    return HttpResponse.json(mockEventRequest.response);\n                }),\n                http.get(mockUserRequest.url, () => {\n                    return HttpResponse.json(mockUserRequest.response);\n                }),\n                http.get(mockFileRequest.url, () => {\n                    return HttpResponse.json(mockFileRequest.response);\n                }),\n                http.post(`${DEFAULT_HOSTNAME_API}/2.0/ai/ask`, async ({ request }) => {\n                    const body = await request.json();\n                    switch (body.prompt) {\n                        case 'table summarizing the highlights from the document':\n                            return HttpResponse.json({\n                                answer: 'Hereâ€™s a table summarizing the highlights from the document:\\n\\n| **Highlight**                                                                                     |\\n|---------------------------------------------------------------------------------------------------|\\n| Captain of the NCAA Division I Womenâ€™s Lacrosse Team, with a 3.8 GPA in Business at Brown University and experience in sales, marketing, and operations across various internships. |',\n                                created_at: '2024-09-20T12:25:51.816-07:00',\n                                completion_reason: 'done',\n                            });\n                        default:\n                            return HttpResponse.json({\n                                answer: 'Public APIs are important because of key and important reasons.',\n                                citations: [\n                                    {\n                                        content: 'Public APIs are key drivers of innovation and growth.',\n                                        id: '123',\n                                        type: 'file',\n                                        name: 'The importance of public APIs.pdf',\n                                    },\n                                ],\n                                completion_reason: 'done',\n                                created_at: '2012-12-12T10:53:43-08:00',\n                            });\n                    }\n                }),\n            ],\n        },\n    },\n};\n"],"mappings":"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","ignoreList":[]}