{"version":3,"file":"PreviewNavigation.js","names":["React","injectIntl","Route","IconNavigateLeft","IconNavigateRight","PlainButton","messages","SIDEBAR_VIEW_METADATA","PreviewNavigationWithRouter","collection","currentIndex","intl","onNavigateLeft","onNavigateRight","hasLeftNavigation","length","hasRightNavigation","goToActiveSidebarTab","routeParams","history","deeplink","activeTab","push","createElement","path","match","Fragment","className","onClick","params","title","formatMessage","previousFile","type","nextFile","PreviewNavigationWithoutRouter","internalSidebarNavigation","internalSidebarNavigationHandler","handleInternalNavigation","sidebar","rest","_objectWithoutProperties","_excluded","hasDeeplink","Object","keys","PreviewNavigation","props","routerDisabled"],"sources":["../../../src/elements/content-preview/PreviewNavigation.js"],"sourcesContent":["/**\n * @flow\n * @file Preview Navigation\n * @author Box\n */\n\nimport * as React from 'react';\nimport { injectIntl } from 'react-intl';\nimport type { IntlShape } from 'react-intl';\nimport { Route } from 'react-router-dom';\nimport IconNavigateLeft from '../../icons/general/IconNavigateLeft';\nimport IconNavigateRight from '../../icons/general/IconNavigateRight';\nimport PlainButton from '../../components/plain-button/PlainButton';\nimport messages from '../common/messages';\nimport type { BoxItem } from '../../common/types/core';\nimport { SIDEBAR_VIEW_METADATA } from '../../constants';\nimport type { InternalSidebarNavigation, InternalSidebarNavigationHandler } from '../common/types/SidebarNavigation';\n\ntype Props = {\n    collection: Array<string | BoxItem>,\n    currentIndex: number,\n    intl: IntlShape,\n    internalSidebarNavigation?: InternalSidebarNavigation,\n    internalSidebarNavigationHandler?: InternalSidebarNavigationHandler,\n    onNavigateLeft: Function,\n    onNavigateRight: Function,\n    routerDisabled?: boolean,\n};\n\nconst PreviewNavigationWithRouter = ({\n    collection = [],\n    currentIndex,\n    intl,\n    onNavigateLeft,\n    onNavigateRight,\n}: Props) => {\n    const hasLeftNavigation = collection.length > 1 && currentIndex > 0 && currentIndex < collection.length;\n    const hasRightNavigation = collection.length > 1 && currentIndex > -1 && currentIndex < collection.length - 1;\n\n    if (!hasLeftNavigation && !hasRightNavigation) {\n        return null;\n    }\n\n    const goToActiveSidebarTab = (routeParams, history) => {\n        if (routeParams.deeplink) {\n            if (routeParams.activeTab === SIDEBAR_VIEW_METADATA) {\n                history.push(`/${routeParams.activeTab}/${routeParams.deeplink}/${routeParams[0]}`);\n            } else {\n                history.push(`/${routeParams.activeTab}`);\n            }\n        }\n    };\n\n    return (\n        <Route path={['/:activeTab/:deeplink/*', '/']}>\n            {({ match, history }) => (\n                <>\n                    {hasLeftNavigation && (\n                        <PlainButton\n                            className=\"bcpr-navigate-left\"\n                            data-testid=\"preview-navigation-left\"\n                            onClick={() => {\n                                goToActiveSidebarTab(match.params, history);\n                                onNavigateLeft();\n                            }}\n                            title={intl.formatMessage(messages.previousFile)}\n                            type=\"button\"\n                        >\n                            <IconNavigateLeft />\n                        </PlainButton>\n                    )}\n                    {hasRightNavigation && (\n                        <PlainButton\n                            className=\"bcpr-navigate-right\"\n                            data-testid=\"preview-navigation-right\"\n                            onClick={() => {\n                                goToActiveSidebarTab(match.params, history);\n                                onNavigateRight();\n                            }}\n                            title={intl.formatMessage(messages.nextFile)}\n                            type=\"button\"\n                        >\n                            <IconNavigateRight />\n                        </PlainButton>\n                    )}\n                </>\n            )}\n        </Route>\n    );\n};\n\nconst PreviewNavigationWithoutRouter = ({\n    collection = [],\n    currentIndex,\n    intl,\n    internalSidebarNavigation,\n    internalSidebarNavigationHandler,\n    onNavigateLeft,\n    onNavigateRight,\n}: Props) => {\n    const hasLeftNavigation = collection.length > 1 && currentIndex > 0 && currentIndex < collection.length;\n    const hasRightNavigation = collection.length > 1 && currentIndex > -1 && currentIndex < collection.length - 1;\n\n    if (!hasLeftNavigation && !hasRightNavigation) {\n        return null;\n    }\n\n    const handleInternalNavigation = () => {\n        if (internalSidebarNavigationHandler && internalSidebarNavigation && internalSidebarNavigation.sidebar) {\n            const { sidebar, ...rest } = internalSidebarNavigation;\n            const hasDeeplink = Object.keys(rest).length > 0;\n\n            if (hasDeeplink && sidebar === SIDEBAR_VIEW_METADATA) {\n                internalSidebarNavigationHandler(internalSidebarNavigation);\n            } else {\n                internalSidebarNavigationHandler({ sidebar });\n            }\n        }\n    };\n\n    return (\n        <>\n            {hasLeftNavigation && (\n                <PlainButton\n                    className=\"bcpr-navigate-left\"\n                    onClick={() => {\n                        handleInternalNavigation();\n                        onNavigateLeft();\n                    }}\n                    title={intl.formatMessage(messages.previousFile)}\n                    type=\"button\"\n                >\n                    <IconNavigateLeft />\n                </PlainButton>\n            )}\n            {hasRightNavigation && (\n                <PlainButton\n                    className=\"bcpr-navigate-right\"\n                    onClick={() => {\n                        handleInternalNavigation();\n                        onNavigateRight();\n                    }}\n                    title={intl.formatMessage(messages.nextFile)}\n                    type=\"button\"\n                >\n                    <IconNavigateRight />\n                </PlainButton>\n            )}\n        </>\n    );\n};\n\nconst PreviewNavigation = (props: Props) => {\n    const { routerDisabled = false } = props;\n\n    if (routerDisabled) {\n        return <PreviewNavigationWithoutRouter {...props} />;\n    }\n\n    return <PreviewNavigationWithRouter {...props} />;\n};\n\nexport default injectIntl(PreviewNavigation);\n"],"mappings":"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","ignoreList":[]}