{"version":3,"file":"ES6Wrapper.js","names":["EventEmitter","ReactDOM","i18n","DEFAULT_CONTAINER","ES6Wrapper","constructor","args","_defineProperty","language","messages","component","data","emit","show","id","token","options","bind","container","HTMLElement","document","querySelector","render","hide","removeAllListeners","unmountComponentAtNode","innerHTML","Error","getComponent","clearCache","eventName","e"],"sources":["../../../src/elements/wrappers/ES6Wrapper.js"],"sourcesContent":["/**\n * @flow\n * @file Base class for the Box UI Elements ES6 wrapper\n * @author Box\n */\n\nimport EventEmitter from 'events';\nimport ReactDOM from 'react-dom';\nimport i18n from '../common/i18n';\nimport { DEFAULT_CONTAINER } from '../../constants';\nimport type { Token, StringMap } from '../../common/types/core';\n\nclass ES6Wrapper extends EventEmitter {\n    /**\n     * @property {Function}\n     */\n    emit: Function;\n\n    /**\n     * @property {HTMLElement}\n     */\n    container: HTMLElement;\n\n    /**\n     * @property {string}\n     */\n    id: string;\n\n    /**\n     * @property {string}\n     */\n    token: Token;\n\n    /**\n     * @property {string}\n     */\n    options: { [key: string]: any };\n\n    /**\n     * @property {string}\n     */\n    language: string = i18n.language;\n\n    /**\n     * @property {Object}\n     */\n    messages: StringMap = i18n.messages;\n\n    /**\n     * @property {Element}\n     */\n    component: any;\n\n    /**\n     * Shows the content picker.\n     *\n     * @public\n     * @param {string} id - The folder or file id.\n     * @param {string} token - The API access token.\n     * @param {Object|void} [options] Optional options.\n     * @return {void}\n     */\n    show(id: string, token: Token, options: { [key: string]: any } = {}): void {\n        this.id = id;\n        this.token = token;\n        this.options = options;\n        this.emit = this.emit.bind(this);\n        const container = options.container || DEFAULT_CONTAINER;\n        this.container =\n            container instanceof HTMLElement ? container : ((document.querySelector(container): any): HTMLElement);\n        this.render();\n    }\n\n    /**\n     * Hides the content picker.\n     * Removes all event listeners.\n     * Clears out the DOM inside container.\n     *\n     * @public\n     * @return {void}\n     */\n    hide(): void {\n        this.removeAllListeners();\n        // eslint-disable-next-line react/no-deprecated\n        ReactDOM.unmountComponentAtNode(this.container);\n        if (this.container) {\n            this.container.innerHTML = '';\n        }\n    }\n\n    /**\n     * Renders the component.\n     * Should be overriden.\n     *\n     * @protected\n     * @return {void}\n     */\n    render() {\n        throw new Error('Unimplemented!');\n    }\n\n    /**\n     * Sets reference to the inner component\n     *\n     * @protected\n     * @return {void}\n     */\n    setComponent = (component: any) => {\n        this.component = component;\n    };\n\n    /**\n     * Gets reference to the inner component\n     *\n     * @public\n     * @return {Element}\n     */\n    getComponent(): any {\n        return this.component;\n    }\n\n    /**\n     * Clears out the cache used by the component\n     *\n     * @public\n     * @return {Element}\n     */\n    clearCache(): void {\n        const component = this.getComponent();\n        if (component && typeof component.clearCache === 'function') {\n            component.clearCache();\n        }\n    }\n\n    /**\n     * Callback for interaction events\n     *\n     * @return {void}\n     */\n    onInteraction = (data: any): void => {\n        this.emit('interaction', data);\n    };\n\n    /**\n     * Wrapper for emit to prevent JS exceptions\n     * in the listeners own code.\n     *\n     * @public\n     * @param {string} eventName - name of the event\n     * @param {Object} data - event data\n     * @return {boolean} true if the event had listeners, false otherwise.\n     */\n    // eslint-disable-next-line no-dupe-class-members\n    emit(eventName: string, data: any): boolean {\n        try {\n            return super.emit(eventName, data);\n        } catch (e) {\n            // do nothing\n        }\n\n        return false;\n    }\n}\n\nexport default ES6Wrapper;\n"],"mappings":";;;AAAA;AACA;AACA;AACA;AACA;;AAEA,OAAOA,YAAY,MAAM,QAAQ;AACjC,OAAOC,QAAQ,MAAM,WAAW;AAChC,OAAOC,IAAI,MAAM,gBAAgB;AACjC,SAASC,iBAAiB,QAAQ,iBAAiB;AAGnD,MAAMC,UAAU,SAASJ,YAAY,CAAC;EAAAK,YAAA,GAAAC,IAAA;IAAA,SAAAA,IAAA;IAClC;AACJ;AACA;IAGI;AACJ;AACA;IAGI;AACJ;AACA;IAGI;AACJ;AACA;IAGI;AACJ;AACA;IAGI;AACJ;AACA;IAFIC,eAAA,mBAGmBL,IAAI,CAACM,QAAQ;IAEhC;AACJ;AACA;IAFID,eAAA,mBAGsBL,IAAI,CAACO,QAAQ;IAuDnC;AACJ;AACA;AACA;AACA;AACA;IALIF,eAAA,uBAMgBG,SAAc,IAAK;MAC/B,IAAI,CAACA,SAAS,GAAGA,SAAS;IAC9B,CAAC;IAyBD;AACJ;AACA;AACA;AACA;IAJIH,eAAA,wBAKiBI,IAAS,IAAW;MACjC,IAAI,CAACC,IAAI,CAAC,aAAa,EAAED,IAAI,CAAC;IAClC,CAAC;EAAA;EA7FD;AACJ;AACA;;EAGI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIE,IAAIA,CAACC,EAAU,EAAEC,KAAY,EAAEC,OAA+B,GAAG,CAAC,CAAC,EAAQ;IACvE,IAAI,CAACF,EAAE,GAAGA,EAAE;IACZ,IAAI,CAACC,KAAK,GAAGA,KAAK;IAClB,IAAI,CAACC,OAAO,GAAGA,OAAO;IACtB,IAAI,CAACJ,IAAI,GAAG,IAAI,CAACA,IAAI,CAACK,IAAI,CAAC,IAAI,CAAC;IAChC,MAAMC,SAAS,GAAGF,OAAO,CAACE,SAAS,IAAIf,iBAAiB;IACxD,IAAI,CAACe,SAAS,GACVA,SAAS,YAAYC,WAAW,GAAGD,SAAS,GAAKE,QAAQ,CAACC,aAAa,CAACH,SAAS,CAAqB;IAC1G,IAAI,CAACI,MAAM,CAAC,CAAC;EACjB;;EAEA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EACIC,IAAIA,CAAA,EAAS;IACT,IAAI,CAACC,kBAAkB,CAAC,CAAC;IACzB;IACAvB,QAAQ,CAACwB,sBAAsB,CAAC,IAAI,CAACP,SAAS,CAAC;IAC/C,IAAI,IAAI,CAACA,SAAS,EAAE;MAChB,IAAI,CAACA,SAAS,CAACQ,SAAS,GAAG,EAAE;IACjC;EACJ;;EAEA;AACJ;AACA;AACA;AACA;AACA;AACA;EACIJ,MAAMA,CAAA,EAAG;IACL,MAAM,IAAIK,KAAK,CAAC,gBAAgB,CAAC;EACrC;EAYA;AACJ;AACA;AACA;AACA;AACA;EACIC,YAAYA,CAAA,EAAQ;IAChB,OAAO,IAAI,CAAClB,SAAS;EACzB;;EAEA;AACJ;AACA;AACA;AACA;AACA;EACImB,UAAUA,CAAA,EAAS;IACf,MAAMnB,SAAS,GAAG,IAAI,CAACkB,YAAY,CAAC,CAAC;IACrC,IAAIlB,SAAS,IAAI,OAAOA,SAAS,CAACmB,UAAU,KAAK,UAAU,EAAE;MACzDnB,SAAS,CAACmB,UAAU,CAAC,CAAC;IAC1B;EACJ;EAWA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI;EACAjB,IAAIA,CAACkB,SAAiB,EAAEnB,IAAS,EAAW;IACxC,IAAI;MACA,OAAO,KAAK,CAACC,IAAI,CAACkB,SAAS,EAAEnB,IAAI,CAAC;IACtC,CAAC,CAAC,OAAOoB,CAAC,EAAE;MACR;IAAA;IAGJ,OAAO,KAAK;EAChB;AACJ;AAEA,eAAe3B,UAAU","ignoreList":[]}