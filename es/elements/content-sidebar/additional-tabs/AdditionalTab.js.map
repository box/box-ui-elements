{"version":3,"file":"AdditionalTab.js","names":["React","classNames","FormattedMessage","Apps16","bdlGray50","PlainButton","AdditionalTabTooltip","AdditionalTabPlaceholder","messages","BLOCKED_BY_SHEILD","AdditionalTab","PureComponent","constructor","args","_defineProperty","isErrored","props","onImageLoad","setState","isDisabled","status","getDisabledReason","reason","createElement","blockedByShieldAccessPolicy","getTabIcon","id","iconUrl","title","icon","state","TabIcon","isLoading","className","src","onError","onImageError","onLoad","alt","color","width","height","render","_this$props","callback","callbackFn","ftuxTooltipData","rest","_objectWithoutProperties","_excluded","tooltipText","defaultTooltipText","isFtuxVisible","type","onClick","callbackData"],"sources":["../../../../src/elements/content-sidebar/additional-tabs/AdditionalTab.js"],"sourcesContent":["/**\n * @flow\n * @file Sidebar Additional Tab component\n * @author Box\n */\n\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport { FormattedMessage } from 'react-intl';\n\nimport Apps16 from '../../../icon/fill/Apps16';\nimport { bdlGray50 } from '../../../styles/variables';\nimport PlainButton from '../../../components/plain-button/PlainButton';\nimport AdditionalTabTooltip from './AdditionalTabTooltip';\nimport AdditionalTabPlaceholder from './AdditionalTabPlaceholder';\nimport messages from './messages';\nimport type { AdditionalSidebarTab, AdditionalSidebarTabFtuxData } from '../flowTypes';\nimport './AdditionalTab.scss';\n\ntype Props = {\n    ftuxTooltipData?: AdditionalSidebarTabFtuxData,\n    isLoading: boolean,\n    onImageLoad: () => void,\n    status?: string,\n} & AdditionalSidebarTab;\n\ntype State = {\n    isErrored: boolean,\n};\n\nconst BLOCKED_BY_SHEILD = 'BLOCKED_BY_SHIELD_ACCESS_POLICY';\n\nclass AdditionalTab extends React.PureComponent<Props, State> {\n    state = {\n        isErrored: false,\n    };\n\n    onImageError = () => {\n        this.props.onImageLoad();\n        this.setState({ isErrored: true });\n    };\n\n    isDisabled() {\n        const { status } = this.props;\n        return status === BLOCKED_BY_SHEILD;\n    }\n\n    getDisabledReason() {\n        let reason = '';\n        const { status } = this.props;\n        switch (status) {\n            case BLOCKED_BY_SHEILD:\n                reason = <FormattedMessage {...messages.blockedByShieldAccessPolicy} />;\n                break;\n            default:\n            // noop\n        }\n        return reason;\n    }\n\n    getTabIcon() {\n        const { id, iconUrl, onImageLoad, title, icon } = this.props;\n        const { isErrored } = this.state;\n\n        let TabIcon;\n\n        if (isErrored) {\n            TabIcon = <AdditionalTabPlaceholder isLoading={false} />;\n        } else if (id && id > 0) {\n            TabIcon = (\n                <img\n                    className=\"bdl-AdditionalTab-icon\"\n                    src={iconUrl}\n                    onError={this.onImageError}\n                    onLoad={onImageLoad}\n                    alt={title}\n                />\n            );\n        } else {\n            TabIcon = icon || <Apps16 color={bdlGray50} width={20} height={20} />;\n        }\n\n        return TabIcon;\n    }\n\n    render() {\n        const {\n            callback: callbackFn,\n            id,\n            isLoading,\n            iconUrl,\n            ftuxTooltipData,\n            onImageLoad,\n            title,\n            ...rest\n        } = this.props;\n\n        const isDisabled = this.isDisabled();\n\n        const className = classNames('bdl-AdditionalTab', {\n            'bdl-is-hidden': isLoading,\n            'bdl-is-disabled': isDisabled,\n            'bdl-is-overflow': id && id < 0,\n        });\n\n        const tooltipText = isDisabled ? this.getDisabledReason() : title;\n\n        return (\n            <AdditionalTabTooltip\n                defaultTooltipText={tooltipText}\n                ftuxTooltipData={ftuxTooltipData}\n                isFtuxVisible={!isLoading}\n            >\n                <PlainButton\n                    aria-label={title}\n                    className={className}\n                    data-testid=\"additionaltab\"\n                    type=\"button\"\n                    isDisabled={isDisabled}\n                    onClick={() => callbackFn({ id, callbackData: rest })}\n                >\n                    {this.getTabIcon()}\n                </PlainButton>\n            </AdditionalTabTooltip>\n        );\n    }\n}\n\nexport default AdditionalTab;\n"],"mappings":"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","ignoreList":[]}