{"version":3,"file":"TaskModal.js","names":["React","FormattedMessage","Modal","TaskForm","messages","TASK_EDIT_MODE_CREATE","TASK_TYPE_APPROVAL","TASK_TYPE_GENERAL","getMessageForModalTitle","taskType","mode","tasksCreateGeneralTaskFormTitle","tasksEditGeneralTaskFormTitle","tasksCreateApprovalTaskFormTitle","tasksEditApprovalTaskFormTitle","focusTargetSelector","TaskModal","props","editMode","error","onSubmitError","onSubmitSuccess","onModalClose","isTaskFormOpen","taskFormProps","createElement","className","focusElementSelector","isOpen","onRequestClose","title","_extends","onCancel"],"sources":["../../../src/elements/content-sidebar/TaskModal.js"],"sourcesContent":["// @flow\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport type { MessageDescriptor } from 'react-intl';\nimport Modal from '../../components/modal/Modal';\nimport TaskForm from './activity-feed/task-form';\nimport messages from './messages';\nimport { TASK_EDIT_MODE_CREATE, TASK_TYPE_APPROVAL, TASK_TYPE_GENERAL } from '../../constants';\nimport type { TaskFormProps } from './activity-feed/task-form/TaskForm';\nimport type { TaskType, TaskEditMode } from '../../common/types/tasks';\nimport type { ElementsXhrError } from '../../common/types/api';\n\ntype TaskModalProps = {\n    editMode?: TaskEditMode,\n    error: ?ElementsXhrError,\n    isTaskFormOpen: boolean,\n    onModalClose: () => void,\n    onSubmitError: (e: ElementsXhrError) => void,\n    onSubmitSuccess: () => any,\n    taskFormProps: TaskFormProps,\n    taskType: TaskType,\n};\n\nfunction getMessageForModalTitle(taskType: TaskType, mode: TaskEditMode): MessageDescriptor {\n    switch (taskType) {\n        case TASK_TYPE_GENERAL:\n            return mode === TASK_EDIT_MODE_CREATE\n                ? messages.tasksCreateGeneralTaskFormTitle\n                : messages.tasksEditGeneralTaskFormTitle;\n        case TASK_TYPE_APPROVAL:\n        default:\n            return mode === TASK_EDIT_MODE_CREATE\n                ? messages.tasksCreateApprovalTaskFormTitle\n                : messages.tasksEditApprovalTaskFormTitle;\n    }\n}\n\nconst focusTargetSelector: string = '.task-modal textarea, .task-modal input';\n\nconst TaskModal = (props: TaskModalProps) => {\n    const {\n        editMode = TASK_EDIT_MODE_CREATE,\n        error,\n        onSubmitError,\n        onSubmitSuccess,\n        onModalClose,\n        taskType,\n        isTaskFormOpen,\n        taskFormProps,\n    } = props;\n    // Note: Modal throws an error if this fails to find an element!\n    return (\n        <Modal\n            className=\"be-modal task-modal\"\n            data-testid=\"create-task-modal\"\n            focusElementSelector={focusTargetSelector}\n            isOpen={isTaskFormOpen}\n            onRequestClose={onModalClose}\n            title={<FormattedMessage {...getMessageForModalTitle(taskType, editMode)} />}\n        >\n            <div className=\"be\">\n                <TaskForm\n                    editMode={editMode}\n                    // $FlowFixMe\n                    error={error}\n                    onCancel={onModalClose}\n                    onSubmitError={onSubmitError}\n                    onSubmitSuccess={onSubmitSuccess}\n                    taskType={taskType}\n                    {...taskFormProps}\n                />\n            </div>\n        </Modal>\n    );\n};\n\nexport default TaskModal;\n"],"mappings":";AACA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAC9B,SAASC,gBAAgB,QAAQ,YAAY;AAE7C,OAAOC,KAAK,MAAM,8BAA8B;AAChD,OAAOC,QAAQ,MAAM,2BAA2B;AAChD,OAAOC,QAAQ,MAAM,YAAY;AACjC,SAASC,qBAAqB,EAAEC,kBAAkB,EAAEC,iBAAiB,QAAQ,iBAAiB;AAgB9F,SAASC,uBAAuBA,CAACC,QAAkB,EAAEC,IAAkB,EAAqB;EACxF,QAAQD,QAAQ;IACZ,KAAKF,iBAAiB;MAClB,OAAOG,IAAI,KAAKL,qBAAqB,GAC/BD,QAAQ,CAACO,+BAA+B,GACxCP,QAAQ,CAACQ,6BAA6B;IAChD,KAAKN,kBAAkB;IACvB;MACI,OAAOI,IAAI,KAAKL,qBAAqB,GAC/BD,QAAQ,CAACS,gCAAgC,GACzCT,QAAQ,CAACU,8BAA8B;EACrD;AACJ;AAEA,MAAMC,mBAA2B,GAAG,yCAAyC;AAE7E,MAAMC,SAAS,GAAIC,KAAqB,IAAK;EACzC,MAAM;IACFC,QAAQ,GAAGb,qBAAqB;IAChCc,KAAK;IACLC,aAAa;IACbC,eAAe;IACfC,YAAY;IACZb,QAAQ;IACRc,cAAc;IACdC;EACJ,CAAC,GAAGP,KAAK;EACT;EACA,oBACIjB,KAAA,CAAAyB,aAAA,CAACvB,KAAK;IACFwB,SAAS,EAAC,qBAAqB;IAC/B,eAAY,mBAAmB;IAC/BC,oBAAoB,EAAEZ,mBAAoB;IAC1Ca,MAAM,EAAEL,cAAe;IACvBM,cAAc,EAAEP,YAAa;IAC7BQ,KAAK,eAAE9B,KAAA,CAAAyB,aAAA,CAACxB,gBAAgB,EAAKO,uBAAuB,CAACC,QAAQ,EAAES,QAAQ,CAAI;EAAE,gBAE7ElB,KAAA,CAAAyB,aAAA;IAAKC,SAAS,EAAC;EAAI,gBACf1B,KAAA,CAAAyB,aAAA,CAACtB,QAAQ,EAAA4B,QAAA;IACLb,QAAQ,EAAEA;IACV;IAAA;IACAC,KAAK,EAAEA,KAAM;IACba,QAAQ,EAAEV,YAAa;IACvBF,aAAa,EAAEA,aAAc;IAC7BC,eAAe,EAAEA,eAAgB;IACjCZ,QAAQ,EAAEA;EAAS,GACfe,aAAa,CACpB,CACA,CACF,CAAC;AAEhB,CAAC;AAED,eAAeR,SAAS","ignoreList":[]}