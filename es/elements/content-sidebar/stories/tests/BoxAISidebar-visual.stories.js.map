{"version":3,"file":"BoxAISidebar-visual.stories.js","names":["expect","within","http","HttpResponse","ContentSidebar","mockFileRequest","mockUserRequest","mockFeatures","basic","play","canvasElement","canvas","clearButton","findByRole","name","toBeInTheDocument","findByText","findByPlaceholderText","meta","title","component","args","features","fileId","global","FILE_ID","token","TOKEN","boxAISidebarProps","createSessionRequest","encodedSession","fetchTimeout","initial","getAgentConfig","getAIStudioAgents","getAnswer","getAnswerStreaming","getSuggestedQuestions","hostAppName","isAgentSelectorEnabled","isAIStudioAgentSelectorEnabled","isCitationsEnabled","isFeedbackEnabled","isDebugModeEnabled","isIntelligentQueryMode","isMarkdownEnabled","isStopResponseEnabled","isStreamingEnabled","items","id","type","fileType","status","localizedQuestions","label","prompt","recordAction","parameters","msw","handlers","get","url","json","response"],"sources":["../../../../../src/elements/content-sidebar/stories/tests/BoxAISidebar-visual.stories.tsx"],"sourcesContent":["import { type StoryObj, type Meta } from '@storybook/react';\nimport { expect, within } from 'storybook/test';\nimport { http, HttpResponse } from 'msw';\nimport type { HttpHandler } from 'msw';\nimport ContentSidebar from '../../ContentSidebar';\nimport BoxAISidebar from '../../BoxAISidebar';\nimport { mockFileRequest, mockUserRequest } from '../../../common/__mocks__/mockRequests';\n\nconst mockFeatures = {\n    'boxai.sidebar.enabled': true,\n};\n\nexport const basic: StoryObj<typeof BoxAISidebar> = {\n    play: async ({ canvasElement }) => {\n        const canvas = within(canvasElement);\n        const clearButton = await canvas.findByRole('button', { name: 'Clear conversation' });\n        expect(clearButton).toBeInTheDocument();\n\n        expect(await canvas.findByText(/Welcome to Box AI/i)).toBeInTheDocument();\n        expect(await canvas.findByText('Chat cleared when you close content')).toBeInTheDocument();\n        expect(await canvas.findByPlaceholderText('Ask Box AI')).toBeInTheDocument();\n        expect(await canvas.findByText('Summarize this document')).toBeInTheDocument();\n        expect(await canvas.findByText('What are the key takeaways?')).toBeInTheDocument();\n        expect(await canvas.findByText('How can this document be improved?')).toBeInTheDocument();\n        expect(await canvas.findByText('Are there any next steps defined?')).toBeInTheDocument();\n    },\n};\n\nconst meta: Meta<typeof ContentSidebar> & { parameters: { msw: { handlers: HttpHandler[] } } } = {\n    title: 'Elements/ContentSidebar/BoxAISidebar/tests/visual-regression-tests',\n    component: ContentSidebar,\n    args: {\n        features: mockFeatures,\n        fileId: global.FILE_ID,\n        token: global.TOKEN,\n        boxAISidebarProps: {\n            createSessionRequest: () => ({ encodedSession: '1234' }),\n            fetchTimeout: { initial: 20000 },\n            getAgentConfig: () => ({}),\n            getAIStudioAgents: () => ({}),\n            getAnswer: () => ({}),\n            getAnswerStreaming: () => ({}),\n            getSuggestedQuestions: null,\n            hostAppName: 'storybook-test',\n            isAgentSelectorEnabled: false,\n            isAIStudioAgentSelectorEnabled: true,\n            isCitationsEnabled: true,\n            isFeedbackEnabled: true,\n            isDebugModeEnabled: true,\n            isIntelligentQueryMode: false,\n            isMarkdownEnabled: true,\n            isStopResponseEnabled: true,\n            isStreamingEnabled: false,\n            items: [{ id: '123', name: 'Document (PDF).pdf', type: 'file', fileType: 'pdf', status: 'supported' }],\n            localizedQuestions: [\n                {\n                    id: 'suggested-question-1',\n                    label: 'Summarize this document',\n                    prompt: 'Summarize this document',\n                },\n                {\n                    id: 'suggested-question-2',\n                    label: 'What are the key takeaways?',\n                    prompt: 'What are the key takeaways?',\n                },\n                {\n                    id: 'suggested-question-3',\n                    label: 'How can this document be improved?',\n                    prompt: 'How can this document be improved?',\n                },\n                {\n                    id: 'suggested-question-4',\n                    label: 'Are there any next steps defined?',\n                    prompt: 'Are there any next steps defined?',\n                },\n            ],\n            recordAction: () => ({}),\n        },\n    },\n    parameters: {\n        msw: {\n            handlers: [\n                http.get(mockUserRequest.url, () => {\n                    return HttpResponse.json(mockUserRequest.response);\n                }),\n                http.get(mockFileRequest.url, () => {\n                    return HttpResponse.json(mockFileRequest.response);\n                }),\n            ],\n        },\n    },\n};\n\nexport default meta;\n"],"mappings":"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","ignoreList":[]}