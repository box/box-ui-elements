{"version":3,"file":"VersionsSidebar.js","names":["React","FormattedMessage","Route","InlineError","messages","SidebarContent","VersionsMenu","BackButton","DEFAULT_FETCH_END","LoadingIndicatorWrapper","useCallback","MAX_VERSIONS","VersionsContent","_ref","error","history","internalSidebarNavigation","internalSidebarNavigationHandler","isLoading","parentName","routerDisabled","versions","rest","_objectWithoutProperties","_excluded","showLimit","length","showVersions","showEmpty","showError","handleBackClick","sidebar","push","createElement","className","title","Fragment","onClick","versionsTitle","crawlerPosition","versionServerError","versionsEmpty","_extends","versionMaxEntries","values","maxVersions","VersionsSidebar","props"],"sources":["../../../../src/elements/content-sidebar/versions/VersionsSidebar.js"],"sourcesContent":["/**\n * @flow\n * @file Versions Sidebar component\n * @author Box\n */\n\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { Route } from 'react-router-dom';\nimport type { MessageDescriptor } from 'react-intl';\nimport InlineError from '../../../components/inline-error';\nimport messages from './messages';\nimport SidebarContent from '../SidebarContent';\nimport VersionsMenu from './VersionsMenu';\nimport BackButton from '../../common/back-button';\nimport { DEFAULT_FETCH_END } from '../../../constants';\nimport { LoadingIndicatorWrapper } from '../../../components/loading-indicator';\nimport type { BoxItemVersion } from '../../../common/types/core';\nimport type { InternalSidebarNavigation, InternalSidebarNavigationHandler, ViewTypeValues } from '../../common/types/SidebarNavigation';\nimport './VersionsSidebar.scss';\n\nconst { useCallback } = React;\n\nconst MAX_VERSIONS = DEFAULT_FETCH_END;\n\ntype Props = {\n    error?: MessageDescriptor,\n    fileId: string,\n    internalSidebarNavigation?: InternalSidebarNavigation,\n    internalSidebarNavigationHandler?: InternalSidebarNavigationHandler,\n    isLoading: boolean,\n    parentName: ViewTypeValues,\n    routerDisabled?: boolean,\n    versionCount: number,\n    versionLimit: number,\n    versions: Array<BoxItemVersion>,\n};\n\ntype VersionsContentProps = {\n    error?: MessageDescriptor,\n    fileId: string,\n    history?: any,\n    internalSidebarNavigation?: InternalSidebarNavigation,\n    internalSidebarNavigationHandler?: InternalSidebarNavigationHandler,\n    isLoading: boolean,\n    parentName: ViewTypeValues,\n    routerDisabled?: boolean,\n    versionCount: number,\n    versionLimit: number,\n    versions: Array<BoxItemVersion>,\n};\n\nconst VersionsContent = ({ \n    error, \n    history,\n    internalSidebarNavigation,\n    internalSidebarNavigationHandler,\n    isLoading, \n    parentName, \n    routerDisabled,\n    versions, \n    ...rest \n}: VersionsContentProps) => {\n    const showLimit = versions.length >= MAX_VERSIONS;\n    const showVersions = !!versions.length;\n    const showEmpty = !isLoading && !showVersions;\n    const showError = !!error;\n\n    const handleBackClick = useCallback(() => {\n        if (routerDisabled && internalSidebarNavigationHandler) {\n            internalSidebarNavigationHandler({ sidebar: parentName });\n        } else if (!routerDisabled && history) {\n            history.push(`/${parentName}`);\n        }\n    }, [parentName, routerDisabled, internalSidebarNavigationHandler, history]);\n\n    return (\n        <SidebarContent\n            className=\"bcs-Versions\"\n            data-resin-component=\"preview\"\n            data-resin-feature=\"versions\"\n            title={\n                <>\n                    <BackButton data-resin-target=\"back\" onClick={handleBackClick} />\n                    <FormattedMessage {...messages.versionsTitle} />\n                </>\n            }\n        >\n            <LoadingIndicatorWrapper\n                className=\"bcs-Versions-content\"\n                crawlerPosition=\"top\"\n                isLoading={isLoading}\n            >\n                {showError && (\n                    <InlineError title={<FormattedMessage {...messages.versionServerError} />}>\n                        <FormattedMessage {...error} />\n                    </InlineError>\n                )}\n\n                {showEmpty && (\n                    <div className=\"bcs-Versions-empty\">\n                        <FormattedMessage {...messages.versionsEmpty} />\n                    </div>\n                )}\n\n                {showVersions && (\n                    <div className=\"bcs-Versions-menu\" data-testid=\"bcs-Versions-menu\">\n                        <VersionsMenu \n                            versions={versions} \n                            routerDisabled={routerDisabled}\n                            internalSidebarNavigation={internalSidebarNavigation}\n                            {...rest} \n                        />\n                    </div>\n                )}\n                {showLimit && (\n                    <div className=\"bcs-Versions-maxEntries\" data-testid=\"max-versions\">\n                        <FormattedMessage\n                            {...messages.versionMaxEntries}\n                            values={{\n                                maxVersions: MAX_VERSIONS,\n                            }}\n                        />\n                    </div>\n                )}\n            </LoadingIndicatorWrapper>\n        </SidebarContent>\n    );\n};\n\nconst VersionsSidebar = (props: Props) => {\n    const { routerDisabled } = props;\n\n    if (routerDisabled) {\n        return <VersionsContent {...props} />;\n    }\n\n    return (\n        <Route>\n            {({ history }) => <VersionsContent {...props} history={history} />}\n        </Route>\n    );\n};\n\nexport default VersionsSidebar;\n"],"mappings":"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","ignoreList":[]}