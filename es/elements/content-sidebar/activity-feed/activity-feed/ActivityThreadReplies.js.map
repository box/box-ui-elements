{"version":3,"file":"ActivityThreadReplies.js","names":["React","Comment","LoadingIndicator","BaseComment","ActivityThreadReplies","currentUser","getAvatarUrl","getMentionWithQuery","getUserProfileUrl","hasNewThreadedReplies","isRepliesLoading","mentionSelectorContacts","onDelete","onEdit","onSelect","replies","translations","getReplyPermissions","reply","permissions","can_delete","can_edit","can_resolve","handleOnEdit","hasMention","id","onError","onSuccess","status","text","renderComment","createElement","_extends","key","type","onCommentEdit","className","map"],"sources":["../../../../../src/elements/content-sidebar/activity-feed/activity-feed/ActivityThreadReplies.js"],"sourcesContent":["// @flow\nimport * as React from 'react';\nimport Comment from '../comment';\nimport LoadingIndicator from '../../../../components/loading-indicator';\nimport { BaseComment } from '../comment/BaseComment';\n\nimport type { GetAvatarUrlCallback, GetProfileUrlCallback } from '../../../common/flowTypes';\nimport type { Translations } from '../../flowTypes';\nimport type { SelectorItems, User } from '../../../../common/types/core';\nimport type { BoxCommentPermission, Comment as CommentType } from '../../../../common/types/feed';\n\nimport './ActivityThreadReplies.scss';\n\ntype Props = {\n    currentUser?: User,\n    getAvatarUrl: GetAvatarUrlCallback,\n    getMentionWithQuery?: Function,\n    getUserProfileUrl?: GetProfileUrlCallback,\n    hasNewThreadedReplies?: boolean,\n    isRepliesLoading?: boolean,\n    mentionSelectorContacts?: SelectorItems<>,\n    onDelete?: Function,\n    onEdit?: Function,\n    onSelect?: (isSelected: boolean) => void,\n    replies: Array<CommentType>,\n    translations?: Translations,\n};\n\nconst ActivityThreadReplies = ({\n    currentUser,\n    getAvatarUrl,\n    getMentionWithQuery,\n    getUserProfileUrl,\n    hasNewThreadedReplies = false,\n    isRepliesLoading,\n    mentionSelectorContacts,\n    onDelete,\n    onEdit,\n    onSelect,\n    replies,\n    translations,\n}: Props) => {\n    const getReplyPermissions = (reply: CommentType): BoxCommentPermission => {\n        const { permissions: { can_delete = false, can_edit = false, can_resolve = false } = {} } = reply;\n        return {\n            can_delete,\n            can_edit,\n            can_resolve,\n        };\n    };\n\n    const handleOnEdit = ({ hasMention, id, onError, onSuccess, permissions, status, text }): void => {\n        if (onEdit) {\n            onEdit(id, text, status, hasMention, permissions, onSuccess, onError);\n        }\n    };\n\n    const renderComment = (reply: CommentType) => {\n        if (hasNewThreadedReplies) {\n            return (\n                <BaseComment\n                    key={`${reply.type}${reply.id}`}\n                    {...reply}\n                    currentUser={currentUser}\n                    getAvatarUrl={getAvatarUrl}\n                    getMentionWithQuery={getMentionWithQuery}\n                    getUserProfileUrl={getUserProfileUrl}\n                    mentionSelectorContacts={mentionSelectorContacts}\n                    onDelete={onDelete}\n                    onCommentEdit={handleOnEdit}\n                    onSelect={onSelect}\n                    permissions={getReplyPermissions(reply)}\n                    translations={translations}\n                />\n            );\n        }\n\n        return (\n            <Comment\n                key={`${reply.type}${reply.id}`}\n                {...reply}\n                currentUser={currentUser}\n                getAvatarUrl={getAvatarUrl}\n                getMentionWithQuery={getMentionWithQuery}\n                getUserProfileUrl={getUserProfileUrl}\n                mentionSelectorContacts={mentionSelectorContacts}\n                onDelete={onDelete}\n                onEdit={handleOnEdit}\n                onSelect={onSelect}\n                permissions={getReplyPermissions(reply)}\n                translations={translations}\n            />\n        );\n    };\n\n    return (\n        <div className=\"bcs-ActivityThreadReplies\" data-testid=\"activity-thread-replies\">\n            {isRepliesLoading && (\n                <div className=\"bcs-ActivityThreadReplies-loading\" data-testid=\"activity-thread-replies-loading\">\n                    <LoadingIndicator />\n                </div>\n            )}\n            {replies.map((reply: CommentType) => renderComment(reply))}\n        </div>\n    );\n};\n\nexport default ActivityThreadReplies;\n"],"mappings":";AACA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAC9B,OAAOC,OAAO,MAAM,YAAY;AAChC,OAAOC,gBAAgB,MAAM,0CAA0C;AACvE,SAASC,WAAW,QAAQ,wBAAwB;AAOpD,OAAO,8BAA8B;AAiBrC,MAAMC,qBAAqB,GAAGA,CAAC;EAC3BC,WAAW;EACXC,YAAY;EACZC,mBAAmB;EACnBC,iBAAiB;EACjBC,qBAAqB,GAAG,KAAK;EAC7BC,gBAAgB;EAChBC,uBAAuB;EACvBC,QAAQ;EACRC,MAAM;EACNC,QAAQ;EACRC,OAAO;EACPC;AACG,CAAC,KAAK;EACT,MAAMC,mBAAmB,GAAIC,KAAkB,IAA2B;IACtE,MAAM;MAAEC,WAAW,EAAE;QAAEC,UAAU,GAAG,KAAK;QAAEC,QAAQ,GAAG,KAAK;QAAEC,WAAW,GAAG;MAAM,CAAC,GAAG,CAAC;IAAE,CAAC,GAAGJ,KAAK;IACjG,OAAO;MACHE,UAAU;MACVC,QAAQ;MACRC;IACJ,CAAC;EACL,CAAC;EAED,MAAMC,YAAY,GAAGA,CAAC;IAAEC,UAAU;IAAEC,EAAE;IAAEC,OAAO;IAAEC,SAAS;IAAER,WAAW;IAAES,MAAM;IAAEC;EAAK,CAAC,KAAW;IAC9F,IAAIhB,MAAM,EAAE;MACRA,MAAM,CAACY,EAAE,EAAEI,IAAI,EAAED,MAAM,EAAEJ,UAAU,EAAEL,WAAW,EAAEQ,SAAS,EAAED,OAAO,CAAC;IACzE;EACJ,CAAC;EAED,MAAMI,aAAa,GAAIZ,KAAkB,IAAK;IAC1C,IAAIT,qBAAqB,EAAE;MACvB,oBACIT,KAAA,CAAA+B,aAAA,CAAC5B,WAAW,EAAA6B,QAAA;QACRC,GAAG,EAAE,GAAGf,KAAK,CAACgB,IAAI,GAAGhB,KAAK,CAACO,EAAE;MAAG,GAC5BP,KAAK;QACTb,WAAW,EAAEA,WAAY;QACzBC,YAAY,EAAEA,YAAa;QAC3BC,mBAAmB,EAAEA,mBAAoB;QACzCC,iBAAiB,EAAEA,iBAAkB;QACrCG,uBAAuB,EAAEA,uBAAwB;QACjDC,QAAQ,EAAEA,QAAS;QACnBuB,aAAa,EAAEZ,YAAa;QAC5BT,QAAQ,EAAEA,QAAS;QACnBK,WAAW,EAAEF,mBAAmB,CAACC,KAAK,CAAE;QACxCF,YAAY,EAAEA;MAAa,EAC9B,CAAC;IAEV;IAEA,oBACIhB,KAAA,CAAA+B,aAAA,CAAC9B,OAAO,EAAA+B,QAAA;MACJC,GAAG,EAAE,GAAGf,KAAK,CAACgB,IAAI,GAAGhB,KAAK,CAACO,EAAE;IAAG,GAC5BP,KAAK;MACTb,WAAW,EAAEA,WAAY;MACzBC,YAAY,EAAEA,YAAa;MAC3BC,mBAAmB,EAAEA,mBAAoB;MACzCC,iBAAiB,EAAEA,iBAAkB;MACrCG,uBAAuB,EAAEA,uBAAwB;MACjDC,QAAQ,EAAEA,QAAS;MACnBC,MAAM,EAAEU,YAAa;MACrBT,QAAQ,EAAEA,QAAS;MACnBK,WAAW,EAAEF,mBAAmB,CAACC,KAAK,CAAE;MACxCF,YAAY,EAAEA;IAAa,EAC9B,CAAC;EAEV,CAAC;EAED,oBACIhB,KAAA,CAAA+B,aAAA;IAAKK,SAAS,EAAC,2BAA2B;IAAC,eAAY;EAAyB,GAC3E1B,gBAAgB,iBACbV,KAAA,CAAA+B,aAAA;IAAKK,SAAS,EAAC,mCAAmC;IAAC,eAAY;EAAiC,gBAC5FpC,KAAA,CAAA+B,aAAA,CAAC7B,gBAAgB,MAAE,CAClB,CACR,EACAa,OAAO,CAACsB,GAAG,CAAEnB,KAAkB,IAAKY,aAAa,CAACZ,KAAK,CAAC,CACxD,CAAC;AAEd,CAAC;AAED,eAAed,qBAAqB","ignoreList":[]}