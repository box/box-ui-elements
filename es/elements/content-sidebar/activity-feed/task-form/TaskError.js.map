{"version":3,"file":"TaskError.js","names":["React","FormattedMessage","getProp","messages","apiMessages","TASK_EDIT_MODE_EDIT","TASK_MAX_GROUP_ASSIGNEES","ERROR_CODE_GROUP_EXCEEDS_LIMIT","InlineNotice","TaskError","editMode","error","taskType","isEditMode","isForbiddenErrorOnEdit","taskGroupExceedsError","errorTitle","taskEditWarningTitle","taskCreateErrorTitle","errorMessage","taskUpdateErrorMessage","taskCreateErrorMessage","taskGeneralAssigneeRemovalWarningMessage","taskApprovalAssigneeRemovalWarningMessage","createElement","type","title","taskGroupExceedsLimitWarningTitle","_extends","taskGroupExceedsLimitWarningMessage","values","max"],"sources":["../../../../../src/elements/content-sidebar/activity-feed/task-form/TaskError.js"],"sourcesContent":["/**\n * @flow\n * @file Component for in-modal error messages for tasks\n */\n\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport getProp from 'lodash/get';\n\nimport messages from './messages';\nimport apiMessages from '../../../../api/messages';\nimport { TASK_EDIT_MODE_EDIT, TASK_MAX_GROUP_ASSIGNEES, ERROR_CODE_GROUP_EXCEEDS_LIMIT } from '../../../../constants';\nimport InlineNotice from '../../../../components/inline-notice/InlineNotice';\n\nimport type { TaskType, TaskEditMode } from '../../../../common/types/tasks';\n\ntype Props = {\n    editMode?: TaskEditMode,\n    error?: { status: number }, // TODO: update to ElementXhrError once API supports it\n    taskType: TaskType,\n};\nconst TaskError = ({ editMode, error, taskType }: Props) => {\n    const isEditMode = editMode === TASK_EDIT_MODE_EDIT;\n    const isForbiddenErrorOnEdit = getProp(error, 'status') === 403 && isEditMode;\n    const taskGroupExceedsError = getProp(error, 'code') === ERROR_CODE_GROUP_EXCEEDS_LIMIT;\n\n    const errorTitle = isForbiddenErrorOnEdit ? messages.taskEditWarningTitle : messages.taskCreateErrorTitle;\n    let errorMessage = isEditMode ? messages.taskUpdateErrorMessage : apiMessages.taskCreateErrorMessage;\n    if (!error) {\n        return null;\n    }\n\n    // error message changes when a forbidden operation occurs while editing a task\n    if (isForbiddenErrorOnEdit) {\n        switch (taskType) {\n            case 'GENERAL':\n                errorMessage = messages.taskGeneralAssigneeRemovalWarningMessage;\n                break;\n            case 'APPROVAL':\n                errorMessage = messages.taskApprovalAssigneeRemovalWarningMessage;\n                break;\n            default:\n                return null;\n        }\n    }\n\n    return taskGroupExceedsError ? (\n        <InlineNotice type=\"warning\" title={<FormattedMessage {...messages.taskGroupExceedsLimitWarningTitle} />}>\n            <FormattedMessage\n                {...apiMessages.taskGroupExceedsLimitWarningMessage}\n                values={{ max: TASK_MAX_GROUP_ASSIGNEES }}\n            />\n        </InlineNotice>\n    ) : (\n        <InlineNotice type=\"error\" title={<FormattedMessage {...errorTitle} />}>\n            <FormattedMessage {...errorMessage} />\n        </InlineNotice>\n    );\n};\n\nexport default TaskError;\n"],"mappings":";AAAA;AACA;AACA;AACA;;AAEA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAC9B,SAASC,gBAAgB,QAAQ,YAAY;AAC7C,OAAOC,OAAO,MAAM,YAAY;AAEhC,OAAOC,QAAQ,MAAM,YAAY;AACjC,OAAOC,WAAW,MAAM,0BAA0B;AAClD,SAASC,mBAAmB,EAAEC,wBAAwB,EAAEC,8BAA8B,QAAQ,uBAAuB;AACrH,OAAOC,YAAY,MAAM,mDAAmD;AAS5E,MAAMC,SAAS,GAAGA,CAAC;EAAEC,QAAQ;EAAEC,KAAK;EAAEC;AAAgB,CAAC,KAAK;EACxD,MAAMC,UAAU,GAAGH,QAAQ,KAAKL,mBAAmB;EACnD,MAAMS,sBAAsB,GAAGZ,OAAO,CAACS,KAAK,EAAE,QAAQ,CAAC,KAAK,GAAG,IAAIE,UAAU;EAC7E,MAAME,qBAAqB,GAAGb,OAAO,CAACS,KAAK,EAAE,MAAM,CAAC,KAAKJ,8BAA8B;EAEvF,MAAMS,UAAU,GAAGF,sBAAsB,GAAGX,QAAQ,CAACc,oBAAoB,GAAGd,QAAQ,CAACe,oBAAoB;EACzG,IAAIC,YAAY,GAAGN,UAAU,GAAGV,QAAQ,CAACiB,sBAAsB,GAAGhB,WAAW,CAACiB,sBAAsB;EACpG,IAAI,CAACV,KAAK,EAAE;IACR,OAAO,IAAI;EACf;;EAEA;EACA,IAAIG,sBAAsB,EAAE;IACxB,QAAQF,QAAQ;MACZ,KAAK,SAAS;QACVO,YAAY,GAAGhB,QAAQ,CAACmB,wCAAwC;QAChE;MACJ,KAAK,UAAU;QACXH,YAAY,GAAGhB,QAAQ,CAACoB,yCAAyC;QACjE;MACJ;QACI,OAAO,IAAI;IACnB;EACJ;EAEA,OAAOR,qBAAqB,gBACxBf,KAAA,CAAAwB,aAAA,CAAChB,YAAY;IAACiB,IAAI,EAAC,SAAS;IAACC,KAAK,eAAE1B,KAAA,CAAAwB,aAAA,CAACvB,gBAAgB,EAAKE,QAAQ,CAACwB,iCAAoC;EAAE,gBACrG3B,KAAA,CAAAwB,aAAA,CAACvB,gBAAgB,EAAA2B,QAAA,KACTxB,WAAW,CAACyB,mCAAmC;IACnDC,MAAM,EAAE;MAAEC,GAAG,EAAEzB;IAAyB;EAAE,EAC7C,CACS,CAAC,gBAEfN,KAAA,CAAAwB,aAAA,CAAChB,YAAY;IAACiB,IAAI,EAAC,OAAO;IAACC,KAAK,eAAE1B,KAAA,CAAAwB,aAAA,CAACvB,gBAAgB,EAAKe,UAAa;EAAE,gBACnEhB,KAAA,CAAAwB,aAAA,CAACvB,gBAAgB,EAAKkB,YAAe,CAC3B,CACjB;AACL,CAAC;AAED,eAAeV,SAAS","ignoreList":[]}