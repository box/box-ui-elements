{"version":3,"file":"AssigneeList.js","names":["React","FormattedMessage","PlainButton","messages","AvatarGroupAvatar","AssigneeDetails","DEFAULT_ASSIGNEES_SHOWN","TASKS_PAGE_SIZE","AssigneeList","props","initialAssigneeCount","users","getAvatarUrl","isOpen","onCollapse","onExpand","entries","next_marker","entryCount","length","numVisibleAssignees","visibleUsers","slice","map","id","target","status","completed_at","completedAt","createElement","key","className","user","hiddenAssigneeCount","Math","max","maxAdditionalAssignees","hasMoreAssigneesThanPageSize","additionalAssigneeMessage","taskShowMoreAssigneesOverflow","taskShowMoreAssignees","onClick","_extends","values","additionalAssigneeCount","taskShowLessAssignees"],"sources":["../../../../../src/elements/content-sidebar/activity-feed/task-new/AssigneeList.js"],"sourcesContent":["// @flow strict\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport PlainButton from '../../../../components/plain-button';\nimport messages from './messages';\nimport AvatarGroupAvatar from './AvatarGroupAvatar';\nimport AssigneeDetails from './AssigneeDetails';\nimport type { TaskAssigneeCollection } from '../../../../common/types/tasks';\nimport type { GetAvatarUrlCallback } from '../../../common/flowTypes';\n\nimport './AssigneeList.scss';\n\nconst DEFAULT_ASSIGNEES_SHOWN = 3;\nconst TASKS_PAGE_SIZE = 20; // service does not return the page size to the client at the moment\n\ntype Props = {|\n    getAvatarUrl: GetAvatarUrlCallback,\n    initialAssigneeCount: number,\n    isOpen: boolean,\n    onCollapse: () => void | Promise<void>,\n    onExpand: () => void | Promise<void>,\n    users: TaskAssigneeCollection,\n|};\n\nfunction AssigneeList(props: Props) {\n    const {\n        initialAssigneeCount = DEFAULT_ASSIGNEES_SHOWN,\n        users = {},\n        getAvatarUrl,\n        isOpen,\n        onCollapse,\n        onExpand,\n    } = props;\n    const { entries = [], next_marker } = users;\n    const entryCount = entries.length;\n    const numVisibleAssignees = isOpen ? entryCount : initialAssigneeCount;\n    const visibleUsers = entries\n        .slice(0, numVisibleAssignees)\n        .map(({ id, target, status, completed_at: completedAt }) => {\n            return (\n                <li key={id} className=\"bcs-AssigneeList-listItem\" data-testid=\"assignee-list-item\">\n                    <AvatarGroupAvatar\n                        status={status}\n                        className=\"bcs-AssigneeList-listItemAvatar\"\n                        user={target}\n                        getAvatarUrl={getAvatarUrl}\n                    />\n                    <AssigneeDetails user={target} status={status} completedAt={completedAt} />\n                </li>\n            );\n        });\n\n    const hiddenAssigneeCount = Math.max(0, entryCount - initialAssigneeCount);\n    const maxAdditionalAssignees = TASKS_PAGE_SIZE - initialAssigneeCount;\n    const hasMoreAssigneesThanPageSize = hiddenAssigneeCount > maxAdditionalAssignees || next_marker;\n    const additionalAssigneeMessage = hasMoreAssigneesThanPageSize\n        ? messages.taskShowMoreAssigneesOverflow\n        : messages.taskShowMoreAssignees;\n\n    return (\n        <div className=\"bcs-AssigneeList\">\n            <ul className=\"bcs-AssigneeList-list\" data-testid=\"task-assignee-list\">\n                {visibleUsers}\n            </ul>\n            {!isOpen && hiddenAssigneeCount > 0 && (\n                <div className=\"bcs-AssigneeList-toggleBtn\">\n                    <PlainButton\n                        data-resin-target=\"showmorebtn\"\n                        data-testid=\"show-more-assignees\"\n                        onClick={onExpand}\n                        className=\"lnk\"\n                    >\n                        <FormattedMessage\n                            {...additionalAssigneeMessage}\n                            values={{\n                                additionalAssigneeCount: hasMoreAssigneesThanPageSize\n                                    ? maxAdditionalAssignees\n                                    : hiddenAssigneeCount,\n                            }}\n                        />\n                    </PlainButton>\n                </div>\n            )}\n            {isOpen && (\n                <div className=\"bcs-AssigneeList-toggleBtn\">\n                    <PlainButton\n                        data-resin-target=\"showlessbtn\"\n                        data-testid=\"show-less-assignees\"\n                        onClick={onCollapse}\n                        className=\"lnk\"\n                    >\n                        <FormattedMessage {...messages.taskShowLessAssignees} />\n                    </PlainButton>\n                </div>\n            )}\n        </div>\n    );\n}\n\nexport default AssigneeList;\n"],"mappings":"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","ignoreList":[]}