{"version":3,"file":"SidebarNavButton.js","names":["React","Route","noop","classNames","Button","Tooltip","isLeftClick","SidebarNavButton","forwardRef","props","ref","dataResinTarget","dataTestId","children","elementId","internalSidebarNavigation","internalSidebarNavigationHandler","isDisabled","isOpen","onClick","routerDisabled","sidebarView","tooltip","sidebarPath","id","isMatch","sidebar","isActiveValue","hasExtraParams","versionId","activeFeedEntryType","activeFeedEntryId","fileVersionId","isExactMatch","handleNavButtonClick","event","defaultPrevented","replace","open","createElement","position","text","isTabbable","targetWrapperClassName","accessibleWhenDisabled","className","disabled","role","tabIndex","type","variant","path","match","history","isExact","method","push","pathname","state"],"sources":["../../../src/elements/content-sidebar/SidebarNavButton.js"],"sourcesContent":["/**\n * @flow\n * @file Preview sidebar nav button component\n * @author Box\n */\n\nimport * as React from 'react';\nimport { Route } from 'react-router-dom';\nimport noop from 'lodash/noop';\nimport classNames from 'classnames';\nimport { Button } from '@box/blueprint-web';\nimport Tooltip from '../../components/tooltip/Tooltip';\nimport { isLeftClick } from '../../utils/dom';\nimport type {\n    InternalSidebarNavigation,\n    InternalSidebarNavigationHandler,\n    ViewTypeValues,\n} from '../common/types/SidebarNavigation';\nimport './SidebarNavButton.scss';\n\ntype Props = {\n    'data-resin-target'?: string,\n    'data-testid'?: string,\n    children: React.Node,\n    elementId?: string,\n    internalSidebarNavigation?: InternalSidebarNavigation,\n    internalSidebarNavigationHandler?: InternalSidebarNavigationHandler,\n    isDisabled?: boolean,\n    isOpen?: boolean,\n    onClick?: (sidebarView: ViewTypeValues) => void,\n    routerDisabled?: boolean,\n    sidebarView: ViewTypeValues,\n    tooltip: React.Node,\n};\n\nconst SidebarNavButton = React.forwardRef<Props, React.Ref<any>>((props: Props, ref: React.Ref<any>) => {\n    const {\n        'data-resin-target': dataResinTarget,\n        'data-testid': dataTestId,\n        children,\n        elementId = '',\n        internalSidebarNavigation,\n        internalSidebarNavigationHandler,\n        isDisabled,\n        isOpen,\n        onClick = noop,\n        routerDisabled = false,\n        sidebarView,\n        tooltip,\n    } = props;\n    const sidebarPath = `/${sidebarView}`;\n    const id = `${elementId}${elementId === '' ? '' : '_'}${sidebarView}`;\n\n    if (routerDisabled) {\n        // Mimic router behavior using internalSidebarNavigation\n        const isMatch = !!internalSidebarNavigation && internalSidebarNavigation.sidebar === sidebarView;\n        const isActiveValue = isMatch && !!isOpen;\n\n        // Mimic isExactMatch: true when no extra navigation parameters are present\n        const hasExtraParams =\n            internalSidebarNavigation &&\n            (internalSidebarNavigation.versionId ||\n                internalSidebarNavigation.activeFeedEntryType ||\n                internalSidebarNavigation.activeFeedEntryId ||\n                internalSidebarNavigation.fileVersionId);\n        const isExactMatch = isMatch && !hasExtraParams;\n\n        const handleNavButtonClick = event => {\n            onClick(sidebarView);\n\n            // Mimic router navigation behavior\n            if (internalSidebarNavigationHandler && !event.defaultPrevented && isLeftClick(event)) {\n                const replace = isExactMatch;\n                internalSidebarNavigationHandler(\n                    {\n                        sidebar: sidebarView,\n                        open: true,\n                    },\n                    replace,\n                );\n            }\n        };\n\n        return (\n            <Tooltip\n                position=\"middle-left\"\n                text={tooltip}\n                isTabbable={false}\n                targetWrapperClassName=\"bcs-NavButton-target\"\n            >\n                <Button\n                    accessibleWhenDisabled={true}\n                    aria-controls={`${id}-content`}\n                    aria-label={tooltip}\n                    aria-selected={isActiveValue}\n                    className={classNames('bcs-NavButton', {\n                        'bcs-is-selected': isActiveValue,\n                        'bdl-is-disabled': isDisabled,\n                    })}\n                    data-resin-target={dataResinTarget}\n                    data-testid={dataTestId}\n                    ref={ref}\n                    id={id}\n                    disabled={isDisabled}\n                    onClick={handleNavButtonClick}\n                    role=\"tab\"\n                    tabIndex={isActiveValue ? '0' : '-1'}\n                    type=\"button\"\n                    variant=\"tertiary\"\n                >\n                    {children}\n                </Button>\n            </Tooltip>\n        );\n    }\n\n    return (\n        <Route path={sidebarPath}>\n            {({ match, history }) => {\n                const isMatch = !!match;\n                const isActiveValue = isMatch && !!isOpen;\n                const isExactMatch = isMatch && match.isExact;\n\n                const handleNavButtonClick = event => {\n                    onClick(sidebarView);\n\n                    if (!event.defaultPrevented && isLeftClick(event)) {\n                        const method = isExactMatch ? history.replace : history.push;\n                        method({\n                            pathname: sidebarPath,\n                            state: { open: true },\n                        });\n                    }\n                };\n\n                return (\n                    <Tooltip\n                        targetWrapperClassName=\"bcs-NavButton-target\"\n                        position=\"middle-left\"\n                        text={tooltip}\n                        isTabbable={false}\n                    >\n                        <Button\n                            accessibleWhenDisabled={true}\n                            aria-controls={`${id}-content`}\n                            aria-label={tooltip}\n                            aria-selected={isActiveValue}\n                            className={classNames('bcs-NavButton', {\n                                'bcs-is-selected': isActiveValue,\n                                'bdl-is-disabled': isDisabled,\n                            })}\n                            data-resin-target={dataResinTarget}\n                            data-testid={dataTestId}\n                            ref={ref}\n                            id={id}\n                            disabled={isDisabled}\n                            onClick={handleNavButtonClick}\n                            role=\"tab\"\n                            tabIndex={isActiveValue ? '0' : '-1'}\n                            type=\"button\"\n                            variant=\"tertiary\"\n                        >\n                            {children}\n                        </Button>\n                    </Tooltip>\n                );\n            }}\n        </Route>\n    );\n});\n\nexport default SidebarNavButton;\n"],"mappings":"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","ignoreList":[]}