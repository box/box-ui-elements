{"version":3,"file":"progressCellRenderer.js","names":["React","FormattedMessage","Browser","messages","ItemProgress","ERROR_CODE_UPLOAD_FILE_SIZE_LIMIT_EXCEEDED","ERROR_CODE_ITEM_NAME_IN_USE","ERROR_CODE_ITEM_NAME_INVALID","ERROR_CODE_UPLOAD_PENDING_APP_FOLDER_SIZE_LIMIT","ERROR_CODE_UPLOAD_STORAGE_LIMIT_EXCEEDED","ERROR_CODE_UPLOAD_CHILD_FOLDER_FAILED","ERROR_CODE_UPLOAD_BAD_DIGEST","ERROR_CODE_UPLOAD_FAILED_PACKAGE","STATUS_IN_PROGRESS","STATUS_STAGED","STATUS_ERROR","getErrorMessage","errorCode","itemName","shouldShowUpgradeCTAMessage","createElement","uploadsOneOrMoreChildFoldersFailedToUploadMessage","uploadsFileSizeLimitExceededErrorMessageForUpgradeCta","uploadsFileSizeLimitExceededErrorMessage","uploadsItemNameInUseErrorMessage","_extends","uploadsProvidedFolderNameInvalidMessage","values","name","uploadsStorageLimitErrorMessage","uploadsPendingFolderSizeLimitErrorMessage","uploadsPackageUploadErrorMessage","uploadsDefaultErrorMessage","rowData","status","error","isFolder","file","code","isSafari","indexOf"],"sources":["../../../src/elements/content-uploader/progressCellRenderer.tsx"],"sourcesContent":["import * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\n\nimport Browser from '../../utils/Browser';\nimport messages from '../common/messages';\nimport ItemProgress from './ItemProgress';\n\nimport {\n    ERROR_CODE_UPLOAD_FILE_SIZE_LIMIT_EXCEEDED,\n    ERROR_CODE_ITEM_NAME_IN_USE,\n    ERROR_CODE_ITEM_NAME_INVALID,\n    ERROR_CODE_UPLOAD_PENDING_APP_FOLDER_SIZE_LIMIT,\n    ERROR_CODE_UPLOAD_STORAGE_LIMIT_EXCEEDED,\n    ERROR_CODE_UPLOAD_CHILD_FOLDER_FAILED,\n    ERROR_CODE_UPLOAD_BAD_DIGEST,\n    ERROR_CODE_UPLOAD_FAILED_PACKAGE,\n    STATUS_IN_PROGRESS,\n    STATUS_STAGED,\n    STATUS_ERROR,\n} from '../../constants';\nimport { cellRendererProps } from './ItemList';\n\n/**\n * Get error message for a specific error code\n *\n * @param {string} [errorCode]\n * @param {string} [itemName]\n * @returns {FormattedMessage}\n */\nconst getErrorMessage = (\n    errorCode?: string | null,\n    itemName?: string | null,\n    shouldShowUpgradeCTAMessage?: boolean,\n) => {\n    switch (errorCode) {\n        case ERROR_CODE_UPLOAD_CHILD_FOLDER_FAILED:\n            return <FormattedMessage {...messages.uploadsOneOrMoreChildFoldersFailedToUploadMessage} />;\n        case ERROR_CODE_UPLOAD_FILE_SIZE_LIMIT_EXCEEDED:\n            if (shouldShowUpgradeCTAMessage) {\n                return <FormattedMessage {...messages.uploadsFileSizeLimitExceededErrorMessageForUpgradeCta} />;\n            }\n            return <FormattedMessage {...messages.uploadsFileSizeLimitExceededErrorMessage} />;\n        case ERROR_CODE_ITEM_NAME_IN_USE:\n            return <FormattedMessage {...messages.uploadsItemNameInUseErrorMessage} />;\n        case ERROR_CODE_ITEM_NAME_INVALID:\n            return (\n                <FormattedMessage {...messages.uploadsProvidedFolderNameInvalidMessage} values={{ name: itemName }} />\n            );\n        case ERROR_CODE_UPLOAD_STORAGE_LIMIT_EXCEEDED:\n            return <FormattedMessage {...messages.uploadsStorageLimitErrorMessage} />;\n        case ERROR_CODE_UPLOAD_PENDING_APP_FOLDER_SIZE_LIMIT:\n            return <FormattedMessage {...messages.uploadsPendingFolderSizeLimitErrorMessage} />;\n        case ERROR_CODE_UPLOAD_FAILED_PACKAGE:\n            return <FormattedMessage {...messages.uploadsPackageUploadErrorMessage} />;\n        default:\n            return <FormattedMessage {...messages.uploadsDefaultErrorMessage} />;\n    }\n};\n\nexport default (shouldShowUpgradeCTAMessage?: boolean) =>\n    ({ rowData }: cellRendererProps) => {\n        const { status, error = {}, name, isFolder, file } = rowData;\n        const { code } = error;\n\n        if (isFolder && status !== STATUS_ERROR) {\n            return null;\n        }\n\n        switch (status) {\n            case STATUS_IN_PROGRESS:\n            case STATUS_STAGED:\n                return <ItemProgress {...rowData} />;\n            case STATUS_ERROR:\n                if (Browser.isSafari() && code === ERROR_CODE_UPLOAD_BAD_DIGEST && file.name.indexOf('.zip') !== -1) {\n                    return getErrorMessage(ERROR_CODE_UPLOAD_FAILED_PACKAGE, file.name);\n                }\n                return getErrorMessage(code, name, shouldShowUpgradeCTAMessage);\n            default:\n                return null;\n        }\n    };\n"],"mappings":"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","ignoreList":[]}