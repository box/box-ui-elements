{"version":3,"file":"ContentUploader-visual.stories.js","names":["expect","userEvent","waitFor","within","http","HttpResponse","ContentUploader","SLEEP_TIMEOUT","DEFAULT_HOSTNAME_API","DEFAULT_HOSTNAME_UPLOAD","singleFile","File","type","multipleFiles","basic","play","canvasElement","canvas","getByText","toBeInTheDocument","Modernization","args","enableModernizedComponents","singleUpload","dropzone","getByTestId","upload","singleUploadCancel","cancelButton","click","queryByText","not","singleUploadCancelFromRow","getByLabelText","successfulSingleUpload","uploadButton","timeout","multipleUpload","multipleUploadCancel","multipleUploadCancelFromRow","cancelButtons","getAllByLabelText","successfulMultipleUpload","title","component","features","global","FEATURE_FLAGS","rootFolderId","FOLDER_ID","token","TOKEN","parameters","msw","handlers","options","json","post"],"sources":["../../../../../src/elements/content-uploader/stories/tests/ContentUploader-visual.stories.js"],"sourcesContent":["import { expect, userEvent, waitFor, within } from 'storybook/test';\nimport { http, HttpResponse } from 'msw';\n\nimport ContentUploader from '../../ContentUploader';\nimport { SLEEP_TIMEOUT } from '../../../../utils/storybook';\nimport { DEFAULT_HOSTNAME_API, DEFAULT_HOSTNAME_UPLOAD } from '../../../../constants';\n\nconst singleFile = new File(['contents'], 'upload_file.txt', { type: 'text/plain' });\nconst multipleFiles = [\n    new File(['contents'], 'upload_file_1.txt', { type: 'text/plain' }),\n    new File(['contents'], 'upload_file_2.txt', { type: 'text/plain' }),\n    new File(['contents'], 'upload_file_3.txt', { type: 'text/plain' }),\n];\n\nexport const basic = {\n    play: async ({ canvasElement }) => {\n        const canvas = within(canvasElement);\n        expect(canvas.getByText('Drag and drop files')).toBeInTheDocument();\n        expect(canvas.getByText('Browse your device')).toBeInTheDocument();\n        expect(canvas.getByText('Close')).toBeInTheDocument();\n        expect(canvas.getByText('Cancel')).toBeInTheDocument();\n        expect(canvas.getByText('Upload')).toBeInTheDocument();\n    },\n};\n\nexport const Modernization = {\n    args: {\n        enableModernizedComponents: true,\n    },\n};\n\nexport const singleUpload = {\n    play: async ({ canvasElement }) => {\n        const canvas = within(canvasElement);\n\n        const dropzone = canvas.getByTestId('upload-input');\n        await userEvent.upload(dropzone, singleFile);\n\n        expect(canvas.getByText('upload_file.txt')).toBeInTheDocument();\n    },\n};\n\nexport const singleUploadCancel = {\n    play: async ({ canvasElement }) => {\n        const canvas = within(canvasElement);\n\n        const dropzone = canvas.getByTestId('upload-input');\n        await userEvent.upload(dropzone, singleFile);\n\n        const cancelButton = canvas.getByText('Cancel');\n        await userEvent.click(cancelButton);\n\n        expect(canvas.queryByText('upload_file.txt')).not.toBeInTheDocument();\n\n        expect(canvas.getByText('Drag and drop files')).toBeInTheDocument();\n        expect(canvas.getByText('Browse your device')).toBeInTheDocument();\n    },\n};\n\nexport const singleUploadCancelFromRow = {\n    play: async ({ canvasElement }) => {\n        const canvas = within(canvasElement);\n\n        const dropzone = canvas.getByTestId('upload-input');\n        await userEvent.upload(dropzone, singleFile);\n\n        const cancelButton = canvas.getByLabelText('Cancel this upload');\n        await userEvent.click(cancelButton);\n\n        expect(canvas.queryByText('upload_file.txt')).not.toBeInTheDocument();\n\n        expect(canvas.getByText('Drag and drop files')).toBeInTheDocument();\n        expect(canvas.getByText('Browse your device')).toBeInTheDocument();\n    },\n};\n\nexport const successfulSingleUpload = {\n    play: async ({ canvasElement }) => {\n        const canvas = within(canvasElement);\n\n        const dropzone = canvas.getByTestId('upload-input');\n        await userEvent.upload(dropzone, singleFile);\n\n        const uploadButton = canvas.getByText('Upload');\n        await userEvent.click(uploadButton);\n\n        await waitFor(\n            () => {\n                expect(canvas.getByText('Success! Your files have been uploaded.')).toBeInTheDocument();\n                expect(canvas.getByText('Select More Files')).toBeInTheDocument();\n            },\n            {\n                timeout: SLEEP_TIMEOUT,\n            },\n        );\n    },\n};\n\nexport const multipleUpload = {\n    play: async ({ canvasElement }) => {\n        const canvas = within(canvasElement);\n\n        const dropzone = canvas.getByTestId('upload-input');\n        await userEvent.upload(dropzone, multipleFiles);\n\n        expect(canvas.getByText('upload_file_1.txt')).toBeInTheDocument();\n        expect(canvas.getByText('upload_file_2.txt')).toBeInTheDocument();\n        expect(canvas.getByText('upload_file_3.txt')).toBeInTheDocument();\n    },\n};\n\nexport const multipleUploadCancel = {\n    play: async ({ canvasElement }) => {\n        const canvas = within(canvasElement);\n\n        const dropzone = canvas.getByTestId('upload-input');\n        await userEvent.upload(dropzone, multipleFiles);\n\n        const cancelButton = canvas.getByText('Cancel');\n        await userEvent.click(cancelButton);\n\n        expect(canvas.queryByText('upload_file_1.txt')).not.toBeInTheDocument();\n        expect(canvas.queryByText('upload_file_2.txt')).not.toBeInTheDocument();\n        expect(canvas.queryByText('upload_file_3.txt')).not.toBeInTheDocument();\n\n        expect(canvas.getByText('Drag and drop files')).toBeInTheDocument();\n        expect(canvas.getByText('Browse your device')).toBeInTheDocument();\n    },\n};\n\nexport const multipleUploadCancelFromRow = {\n    play: async ({ canvasElement }) => {\n        const canvas = within(canvasElement);\n\n        const dropzone = canvas.getByTestId('upload-input');\n        await userEvent.upload(dropzone, multipleFiles);\n\n        const cancelButtons = canvas.getAllByLabelText('Cancel this upload');\n        await userEvent.click(cancelButtons[1]); // Cancel middle one\n\n        expect(canvas.queryByText('upload_file_1.txt')).toBeInTheDocument();\n        expect(canvas.queryByText('upload_file_2.txt')).not.toBeInTheDocument();\n        expect(canvas.queryByText('upload_file_3.txt')).toBeInTheDocument();\n    },\n};\n\nexport const successfulMultipleUpload = {\n    play: async ({ canvasElement }) => {\n        const canvas = within(canvasElement);\n\n        const dropzone = canvas.getByTestId('upload-input');\n        await userEvent.upload(dropzone, multipleFiles);\n\n        const uploadButton = canvas.getByText('Upload');\n        await userEvent.click(uploadButton);\n\n        await waitFor(\n            () => {\n                expect(canvas.getByText('Success! Your files have been uploaded.')).toBeInTheDocument();\n                expect(canvas.getByText('Select More Files')).toBeInTheDocument();\n            },\n            {\n                timeout: SLEEP_TIMEOUT,\n            },\n        );\n    },\n};\n\nexport default {\n    title: 'Elements/ContentUploader/tests/visual',\n    component: ContentUploader,\n    args: {\n        features: global.FEATURE_FLAGS,\n        rootFolderId: global.FOLDER_ID,\n        token: global.TOKEN,\n    },\n    parameters: {\n        msw: {\n            handlers: [\n                http.options(`${DEFAULT_HOSTNAME_API}/2.0/files/content`, () => {\n                    return HttpResponse.json({});\n                }),\n                http.post(`${DEFAULT_HOSTNAME_UPLOAD}/api/2.0/files/content`, () => {\n                    return HttpResponse.json({});\n                }),\n            ],\n        },\n    },\n};\n"],"mappings":"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","ignoreList":[]}