{"version":3,"file":"useAnnotatorEvents.js","names":["React","noop","Status","useAnnotatorEvents","eventEmitter","onAnnotationDeleteEnd","onAnnotationDeleteStart","onAnnotationReplyAddEnd","onAnnotationReplyAddStart","onAnnotationReplyDeleteEnd","onAnnotationReplyDeleteStart","onAnnotationReplyUpdateEnd","onAnnotationReplyUpdateStart","onAnnotationUpdateEnd","onAnnotationUpdateStart","onSidebarAnnotationSelected","emitAnnotationActiveChangeEvent","annotationId","fileVersionId","emit","emitAddAnnotationEvent","annotation","requestId","status","actionEvent","meta","emitAddAnnotationStartEvent","PENDING","emitAddAnnotationEndEvent","SUCCESS","emitDeleteAnnotationEvent","id","emitDeleteAnnotationStartEvent","emitDeleteAnnotationEndEvent","emitUpdateAnnotationEvent","emitUpdateAnnotationStartEvent","emitUpdateAnnotationEndEvent","emitUpdateAnnotationReplyEvent","reply","annotationReply","emitUpdateAnnotationReplyStartEvent","emitUpdateAnnotationReplyEndEvent","emitDeleteAnnotationReplyEvent","emitDeleteAnnotationReplyStartEvent","emitDeleteAnnotationReplyEndEvent","emitAddAnnotationReplyEvent","emitAddAnnotationReplyStartEvent","emitAddAnnotationReplyEndEvent","useEffect","addListener","removeListener"],"sources":["../../../../src/elements/common/annotator-context/useAnnotatorEvents.ts"],"sourcesContent":["import * as React from 'react';\nimport { EventEmitter } from 'events';\nimport noop from 'lodash/noop';\nimport { AnnotationActionEvent, Status } from './types';\n\nexport interface UseAnnotatorEventsProps {\n    eventEmitter: EventEmitter;\n    onAnnotationDeleteEnd?: (annotationId: string) => void;\n    onAnnotationDeleteStart?: (annotationId: string) => void;\n    onAnnotationReplyAddEnd?: (eventData: { annotationId: string; reply: Object; requestId: string }) => void;\n    onAnnotationReplyAddStart?: (eventData: { annotationId: string; reply: Object; requestId: string }) => void;\n    onAnnotationReplyDeleteEnd?: (eventData: { annotationId: string; id: string }) => void;\n    onAnnotationReplyDeleteStart?: (eventData: { annotationId: string; id: string }) => void;\n    onAnnotationReplyUpdateEnd?: (eventData: { annotationId: string; reply: Object }) => void;\n    onAnnotationReplyUpdateStart?: (eventData: { annotationId: string; reply: Object }) => void;\n    onAnnotationUpdateEnd?: (annotation: Object) => void;\n    onAnnotationUpdateStart?: (annotation: Object) => void;\n    onSidebarAnnotationSelected?: (annotationId: string) => void;\n}\n\nfunction useAnnotatorEvents({\n    eventEmitter,\n    onAnnotationDeleteEnd = noop,\n    onAnnotationDeleteStart = noop,\n    onAnnotationReplyAddEnd = noop,\n    onAnnotationReplyAddStart = noop,\n    onAnnotationReplyDeleteEnd = noop,\n    onAnnotationReplyDeleteStart = noop,\n    onAnnotationReplyUpdateEnd = noop,\n    onAnnotationReplyUpdateStart = noop,\n    onAnnotationUpdateEnd = noop,\n    onAnnotationUpdateStart = noop,\n    onSidebarAnnotationSelected = noop,\n}: UseAnnotatorEventsProps) {\n    const emitAnnotationActiveChangeEvent = (annotationId: string | null, fileVersionId: string) => {\n        eventEmitter.emit('annotations_active_change', { annotationId, fileVersionId });\n    };\n\n    const emitAddAnnotationEvent = (annotation: Object, requestId: string, status: Status) => {\n        const actionEvent: AnnotationActionEvent = {\n            annotation,\n            meta: { status, requestId },\n        };\n        eventEmitter.emit('annotations_create', actionEvent);\n    };\n\n    const emitAddAnnotationStartEvent = (annotation: Object, requestId: string) => {\n        emitAddAnnotationEvent(annotation, requestId, Status.PENDING);\n    };\n    const emitAddAnnotationEndEvent = (annotation: Object, requestId: string) => {\n        emitAddAnnotationEvent(annotation, requestId, Status.SUCCESS);\n    };\n\n    const emitDeleteAnnotationEvent = (id: string, status: Status) => {\n        const actionEvent: AnnotationActionEvent = {\n            annotation: { id },\n            meta: { status },\n        };\n        eventEmitter.emit('annotations_delete', actionEvent);\n    };\n\n    const emitDeleteAnnotationStartEvent = (id: string) => {\n        emitDeleteAnnotationEvent(id, Status.PENDING);\n    };\n    const emitDeleteAnnotationEndEvent = (id: string) => {\n        emitDeleteAnnotationEvent(id, Status.SUCCESS);\n        eventEmitter.emit('annotations_remove', id);\n    };\n\n    const emitUpdateAnnotationEvent = (annotation: Object, status: Status) => {\n        const actionEvent: AnnotationActionEvent = {\n            annotation,\n            meta: { status },\n        };\n        eventEmitter.emit('annotations_update', actionEvent);\n    };\n\n    const emitUpdateAnnotationStartEvent = (annotation: Object) => {\n        emitUpdateAnnotationEvent(annotation, Status.PENDING);\n    };\n    const emitUpdateAnnotationEndEvent = (annotation: Object) => {\n        emitUpdateAnnotationEvent(annotation, Status.SUCCESS);\n    };\n\n    const emitUpdateAnnotationReplyEvent = (reply: Object, annotationId: string, status: Status) => {\n        const actionEvent: AnnotationActionEvent = {\n            annotation: { id: annotationId },\n            annotationReply: reply,\n            meta: { status },\n        };\n        eventEmitter.emit('annotations_reply_update', actionEvent);\n    };\n\n    const emitUpdateAnnotationReplyStartEvent = (reply: Object, annotationId: string) => {\n        emitUpdateAnnotationReplyEvent(reply, annotationId, Status.PENDING);\n    };\n    const emitUpdateAnnotationReplyEndEvent = (reply: Object, annotationId: string) => {\n        emitUpdateAnnotationReplyEvent(reply, annotationId, Status.SUCCESS);\n    };\n\n    const emitDeleteAnnotationReplyEvent = (id: string, annotationId: string, status: Status) => {\n        const actionEvent: AnnotationActionEvent = {\n            annotation: { id: annotationId },\n            annotationReply: { id },\n            meta: { status },\n        };\n        eventEmitter.emit('annotations_reply_delete', actionEvent);\n    };\n\n    const emitDeleteAnnotationReplyStartEvent = (id: string, annotationId: string) => {\n        emitDeleteAnnotationReplyEvent(id, annotationId, Status.PENDING);\n    };\n    const emitDeleteAnnotationReplyEndEvent = (id: string, annotationId: string) => {\n        emitDeleteAnnotationReplyEvent(id, annotationId, Status.SUCCESS);\n    };\n\n    const emitAddAnnotationReplyEvent = (reply: Object, annotationId: string, requestId: string, status: Status) => {\n        const actionEvent: AnnotationActionEvent = {\n            annotation: { id: annotationId },\n            annotationReply: reply,\n            meta: { status, requestId },\n        };\n        eventEmitter.emit('annotations_reply_create', actionEvent);\n    };\n\n    const emitAddAnnotationReplyStartEvent = (reply: Object, annotationId: string, requestId: string) => {\n        emitAddAnnotationReplyEvent(reply, annotationId, requestId, Status.PENDING);\n    };\n    const emitAddAnnotationReplyEndEvent = (reply: Object, annotationId: string, requestId: string) => {\n        emitAddAnnotationReplyEvent(reply, annotationId, requestId, Status.SUCCESS);\n    };\n\n    React.useEffect(() => {\n        eventEmitter.addListener('annotations_active_set', onSidebarAnnotationSelected);\n        eventEmitter.addListener('annotations_remove', onAnnotationDeleteEnd);\n        eventEmitter.addListener('annotations_remove_start', onAnnotationDeleteStart);\n        eventEmitter.addListener('sidebar.annotations_update', onAnnotationUpdateEnd);\n        eventEmitter.addListener('sidebar.annotations_update_start', onAnnotationUpdateStart);\n        eventEmitter.addListener('sidebar.annotations_reply_create', onAnnotationReplyAddEnd);\n        eventEmitter.addListener('sidebar.annotations_reply_create_start', onAnnotationReplyAddStart);\n        eventEmitter.addListener('sidebar.annotations_reply_delete', onAnnotationReplyDeleteEnd);\n        eventEmitter.addListener('sidebar.annotations_reply_delete_start', onAnnotationReplyDeleteStart);\n        eventEmitter.addListener('sidebar.annotations_reply_update', onAnnotationReplyUpdateEnd);\n        eventEmitter.addListener('sidebar.annotations_reply_update_start', onAnnotationReplyUpdateStart);\n        return () => {\n            eventEmitter.removeListener('annotations_active_set', onSidebarAnnotationSelected);\n            eventEmitter.removeListener('annotations_remove', onAnnotationDeleteEnd);\n            eventEmitter.removeListener('annotations_remove_start', onAnnotationDeleteStart);\n            eventEmitter.removeListener('sidebar.annotations_update', onAnnotationUpdateEnd);\n            eventEmitter.removeListener('sidebar.annotations_update_start', onAnnotationUpdateStart);\n            eventEmitter.removeListener('sidebar.annotations_reply_create', onAnnotationReplyAddEnd);\n            eventEmitter.removeListener('sidebar.annotations_reply_create_start', onAnnotationReplyAddStart);\n            eventEmitter.removeListener('sidebar.annotations_reply_delete', onAnnotationReplyDeleteEnd);\n            eventEmitter.removeListener('sidebar.annotations_reply_delete_start', onAnnotationReplyDeleteStart);\n            eventEmitter.removeListener('sidebar.annotations_reply_update', onAnnotationReplyUpdateEnd);\n            eventEmitter.removeListener('sidebar.annotations_reply_update_start', onAnnotationReplyUpdateStart);\n        };\n    }, [\n        eventEmitter,\n        onAnnotationDeleteEnd,\n        onAnnotationDeleteStart,\n        onAnnotationReplyAddEnd,\n        onAnnotationReplyAddStart,\n        onAnnotationReplyDeleteEnd,\n        onAnnotationReplyDeleteStart,\n        onAnnotationReplyUpdateEnd,\n        onAnnotationReplyUpdateStart,\n        onAnnotationUpdateEnd,\n        onAnnotationUpdateStart,\n        onSidebarAnnotationSelected,\n    ]);\n\n    return {\n        emitAddAnnotationEndEvent,\n        emitAddAnnotationReplyEndEvent,\n        emitAddAnnotationReplyStartEvent,\n        emitAddAnnotationStartEvent,\n        emitAnnotationActiveChangeEvent,\n        emitDeleteAnnotationEndEvent,\n        emitDeleteAnnotationReplyEndEvent,\n        emitDeleteAnnotationReplyStartEvent,\n        emitDeleteAnnotationStartEvent,\n        emitUpdateAnnotationEndEvent,\n        emitUpdateAnnotationReplyEndEvent,\n        emitUpdateAnnotationReplyStartEvent,\n        emitUpdateAnnotationStartEvent,\n    };\n}\n\nexport default useAnnotatorEvents;\n"],"mappings":"AAAA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAE9B,OAAOC,IAAI,MAAM,aAAa;AAC9B,SAAgCC,MAAM,QAAQ,SAAS;AAiBvD,SAASC,kBAAkBA,CAAC;EACxBC,YAAY;EACZC,qBAAqB,GAAGJ,IAAI;EAC5BK,uBAAuB,GAAGL,IAAI;EAC9BM,uBAAuB,GAAGN,IAAI;EAC9BO,yBAAyB,GAAGP,IAAI;EAChCQ,0BAA0B,GAAGR,IAAI;EACjCS,4BAA4B,GAAGT,IAAI;EACnCU,0BAA0B,GAAGV,IAAI;EACjCW,4BAA4B,GAAGX,IAAI;EACnCY,qBAAqB,GAAGZ,IAAI;EAC5Ba,uBAAuB,GAAGb,IAAI;EAC9Bc,2BAA2B,GAAGd;AACT,CAAC,EAAE;EACxB,MAAMe,+BAA+B,GAAGA,CAACC,YAA2B,EAAEC,aAAqB,KAAK;IAC5Fd,YAAY,CAACe,IAAI,CAAC,2BAA2B,EAAE;MAAEF,YAAY;MAAEC;IAAc,CAAC,CAAC;EACnF,CAAC;EAED,MAAME,sBAAsB,GAAGA,CAACC,UAAkB,EAAEC,SAAiB,EAAEC,MAAc,KAAK;IACtF,MAAMC,WAAkC,GAAG;MACvCH,UAAU;MACVI,IAAI,EAAE;QAAEF,MAAM;QAAED;MAAU;IAC9B,CAAC;IACDlB,YAAY,CAACe,IAAI,CAAC,oBAAoB,EAAEK,WAAW,CAAC;EACxD,CAAC;EAED,MAAME,2BAA2B,GAAGA,CAACL,UAAkB,EAAEC,SAAiB,KAAK;IAC3EF,sBAAsB,CAACC,UAAU,EAAEC,SAAS,EAAEpB,MAAM,CAACyB,OAAO,CAAC;EACjE,CAAC;EACD,MAAMC,yBAAyB,GAAGA,CAACP,UAAkB,EAAEC,SAAiB,KAAK;IACzEF,sBAAsB,CAACC,UAAU,EAAEC,SAAS,EAAEpB,MAAM,CAAC2B,OAAO,CAAC;EACjE,CAAC;EAED,MAAMC,yBAAyB,GAAGA,CAACC,EAAU,EAAER,MAAc,KAAK;IAC9D,MAAMC,WAAkC,GAAG;MACvCH,UAAU,EAAE;QAAEU;MAAG,CAAC;MAClBN,IAAI,EAAE;QAAEF;MAAO;IACnB,CAAC;IACDnB,YAAY,CAACe,IAAI,CAAC,oBAAoB,EAAEK,WAAW,CAAC;EACxD,CAAC;EAED,MAAMQ,8BAA8B,GAAID,EAAU,IAAK;IACnDD,yBAAyB,CAACC,EAAE,EAAE7B,MAAM,CAACyB,OAAO,CAAC;EACjD,CAAC;EACD,MAAMM,4BAA4B,GAAIF,EAAU,IAAK;IACjDD,yBAAyB,CAACC,EAAE,EAAE7B,MAAM,CAAC2B,OAAO,CAAC;IAC7CzB,YAAY,CAACe,IAAI,CAAC,oBAAoB,EAAEY,EAAE,CAAC;EAC/C,CAAC;EAED,MAAMG,yBAAyB,GAAGA,CAACb,UAAkB,EAAEE,MAAc,KAAK;IACtE,MAAMC,WAAkC,GAAG;MACvCH,UAAU;MACVI,IAAI,EAAE;QAAEF;MAAO;IACnB,CAAC;IACDnB,YAAY,CAACe,IAAI,CAAC,oBAAoB,EAAEK,WAAW,CAAC;EACxD,CAAC;EAED,MAAMW,8BAA8B,GAAId,UAAkB,IAAK;IAC3Da,yBAAyB,CAACb,UAAU,EAAEnB,MAAM,CAACyB,OAAO,CAAC;EACzD,CAAC;EACD,MAAMS,4BAA4B,GAAIf,UAAkB,IAAK;IACzDa,yBAAyB,CAACb,UAAU,EAAEnB,MAAM,CAAC2B,OAAO,CAAC;EACzD,CAAC;EAED,MAAMQ,8BAA8B,GAAGA,CAACC,KAAa,EAAErB,YAAoB,EAAEM,MAAc,KAAK;IAC5F,MAAMC,WAAkC,GAAG;MACvCH,UAAU,EAAE;QAAEU,EAAE,EAAEd;MAAa,CAAC;MAChCsB,eAAe,EAAED,KAAK;MACtBb,IAAI,EAAE;QAAEF;MAAO;IACnB,CAAC;IACDnB,YAAY,CAACe,IAAI,CAAC,0BAA0B,EAAEK,WAAW,CAAC;EAC9D,CAAC;EAED,MAAMgB,mCAAmC,GAAGA,CAACF,KAAa,EAAErB,YAAoB,KAAK;IACjFoB,8BAA8B,CAACC,KAAK,EAAErB,YAAY,EAAEf,MAAM,CAACyB,OAAO,CAAC;EACvE,CAAC;EACD,MAAMc,iCAAiC,GAAGA,CAACH,KAAa,EAAErB,YAAoB,KAAK;IAC/EoB,8BAA8B,CAACC,KAAK,EAAErB,YAAY,EAAEf,MAAM,CAAC2B,OAAO,CAAC;EACvE,CAAC;EAED,MAAMa,8BAA8B,GAAGA,CAACX,EAAU,EAAEd,YAAoB,EAAEM,MAAc,KAAK;IACzF,MAAMC,WAAkC,GAAG;MACvCH,UAAU,EAAE;QAAEU,EAAE,EAAEd;MAAa,CAAC;MAChCsB,eAAe,EAAE;QAAER;MAAG,CAAC;MACvBN,IAAI,EAAE;QAAEF;MAAO;IACnB,CAAC;IACDnB,YAAY,CAACe,IAAI,CAAC,0BAA0B,EAAEK,WAAW,CAAC;EAC9D,CAAC;EAED,MAAMmB,mCAAmC,GAAGA,CAACZ,EAAU,EAAEd,YAAoB,KAAK;IAC9EyB,8BAA8B,CAACX,EAAE,EAAEd,YAAY,EAAEf,MAAM,CAACyB,OAAO,CAAC;EACpE,CAAC;EACD,MAAMiB,iCAAiC,GAAGA,CAACb,EAAU,EAAEd,YAAoB,KAAK;IAC5EyB,8BAA8B,CAACX,EAAE,EAAEd,YAAY,EAAEf,MAAM,CAAC2B,OAAO,CAAC;EACpE,CAAC;EAED,MAAMgB,2BAA2B,GAAGA,CAACP,KAAa,EAAErB,YAAoB,EAAEK,SAAiB,EAAEC,MAAc,KAAK;IAC5G,MAAMC,WAAkC,GAAG;MACvCH,UAAU,EAAE;QAAEU,EAAE,EAAEd;MAAa,CAAC;MAChCsB,eAAe,EAAED,KAAK;MACtBb,IAAI,EAAE;QAAEF,MAAM;QAAED;MAAU;IAC9B,CAAC;IACDlB,YAAY,CAACe,IAAI,CAAC,0BAA0B,EAAEK,WAAW,CAAC;EAC9D,CAAC;EAED,MAAMsB,gCAAgC,GAAGA,CAACR,KAAa,EAAErB,YAAoB,EAAEK,SAAiB,KAAK;IACjGuB,2BAA2B,CAACP,KAAK,EAAErB,YAAY,EAAEK,SAAS,EAAEpB,MAAM,CAACyB,OAAO,CAAC;EAC/E,CAAC;EACD,MAAMoB,8BAA8B,GAAGA,CAACT,KAAa,EAAErB,YAAoB,EAAEK,SAAiB,KAAK;IAC/FuB,2BAA2B,CAACP,KAAK,EAAErB,YAAY,EAAEK,SAAS,EAAEpB,MAAM,CAAC2B,OAAO,CAAC;EAC/E,CAAC;EAED7B,KAAK,CAACgD,SAAS,CAAC,MAAM;IAClB5C,YAAY,CAAC6C,WAAW,CAAC,wBAAwB,EAAElC,2BAA2B,CAAC;IAC/EX,YAAY,CAAC6C,WAAW,CAAC,oBAAoB,EAAE5C,qBAAqB,CAAC;IACrED,YAAY,CAAC6C,WAAW,CAAC,0BAA0B,EAAE3C,uBAAuB,CAAC;IAC7EF,YAAY,CAAC6C,WAAW,CAAC,4BAA4B,EAAEpC,qBAAqB,CAAC;IAC7ET,YAAY,CAAC6C,WAAW,CAAC,kCAAkC,EAAEnC,uBAAuB,CAAC;IACrFV,YAAY,CAAC6C,WAAW,CAAC,kCAAkC,EAAE1C,uBAAuB,CAAC;IACrFH,YAAY,CAAC6C,WAAW,CAAC,wCAAwC,EAAEzC,yBAAyB,CAAC;IAC7FJ,YAAY,CAAC6C,WAAW,CAAC,kCAAkC,EAAExC,0BAA0B,CAAC;IACxFL,YAAY,CAAC6C,WAAW,CAAC,wCAAwC,EAAEvC,4BAA4B,CAAC;IAChGN,YAAY,CAAC6C,WAAW,CAAC,kCAAkC,EAAEtC,0BAA0B,CAAC;IACxFP,YAAY,CAAC6C,WAAW,CAAC,wCAAwC,EAAErC,4BAA4B,CAAC;IAChG,OAAO,MAAM;MACTR,YAAY,CAAC8C,cAAc,CAAC,wBAAwB,EAAEnC,2BAA2B,CAAC;MAClFX,YAAY,CAAC8C,cAAc,CAAC,oBAAoB,EAAE7C,qBAAqB,CAAC;MACxED,YAAY,CAAC8C,cAAc,CAAC,0BAA0B,EAAE5C,uBAAuB,CAAC;MAChFF,YAAY,CAAC8C,cAAc,CAAC,4BAA4B,EAAErC,qBAAqB,CAAC;MAChFT,YAAY,CAAC8C,cAAc,CAAC,kCAAkC,EAAEpC,uBAAuB,CAAC;MACxFV,YAAY,CAAC8C,cAAc,CAAC,kCAAkC,EAAE3C,uBAAuB,CAAC;MACxFH,YAAY,CAAC8C,cAAc,CAAC,wCAAwC,EAAE1C,yBAAyB,CAAC;MAChGJ,YAAY,CAAC8C,cAAc,CAAC,kCAAkC,EAAEzC,0BAA0B,CAAC;MAC3FL,YAAY,CAAC8C,cAAc,CAAC,wCAAwC,EAAExC,4BAA4B,CAAC;MACnGN,YAAY,CAAC8C,cAAc,CAAC,kCAAkC,EAAEvC,0BAA0B,CAAC;MAC3FP,YAAY,CAAC8C,cAAc,CAAC,wCAAwC,EAAEtC,4BAA4B,CAAC;IACvG,CAAC;EACL,CAAC,EAAE,CACCR,YAAY,EACZC,qBAAqB,EACrBC,uBAAuB,EACvBC,uBAAuB,EACvBC,yBAAyB,EACzBC,0BAA0B,EAC1BC,4BAA4B,EAC5BC,0BAA0B,EAC1BC,4BAA4B,EAC5BC,qBAAqB,EACrBC,uBAAuB,EACvBC,2BAA2B,CAC9B,CAAC;EAEF,OAAO;IACHa,yBAAyB;IACzBmB,8BAA8B;IAC9BD,gCAAgC;IAChCpB,2BAA2B;IAC3BV,+BAA+B;IAC/BiB,4BAA4B;IAC5BW,iCAAiC;IACjCD,mCAAmC;IACnCX,8BAA8B;IAC9BI,4BAA4B;IAC5BK,iCAAiC;IACjCD,mCAAmC;IACnCL;EACJ,CAAC;AACL;AAEA,eAAehC,kBAAkB","ignoreList":[]}