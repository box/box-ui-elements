{"version":3,"file":"makePopup.js","names":["React","PureComponent","Modal","noop","omit","CLIENT_NAME_CONTENT_PICKER","CLIENT_NAME_CONTENT_UPLOADER","makePopup","kit","Wrapped","Wrapper","constructor","props","_defineProperty","data","onClick","close","onClose","onCancel","onChoose","setState","isOpen","state","callback","render","_this$props","modal","rest","_objectWithoutProperties","_excluded","wrappedProps","buttonLabel","buttonClassName","modalClassName","overlayClassName","Error","createElement","className","onButtonClick","type","contentLabel"],"sources":["../../../src/elements/common/makePopup.js"],"sourcesContent":["/**\n * @flow\n * @file HOC to make popup-able Box UI Elements\n * @author Box\n */\n\nimport React, { PureComponent } from 'react';\nimport Modal from 'react-modal';\nimport noop from 'lodash/noop';\nimport omit from 'lodash/omit';\n\nimport { CLIENT_NAME_CONTENT_PICKER, CLIENT_NAME_CONTENT_UPLOADER } from '../../constants';\n\nimport type { ModalOptions } from './flowTypes';\n\ntype Props = {\n    modal: ModalOptions,\n    onCancel?: Function,\n    onChoose?: Function,\n    onClick?: Function,\n    onClose?: Function,\n};\n\ntype State = {\n    isOpen: boolean,\n};\n\nconst makePopup = (kit: string) => (Wrapped: any) =>\n    class Wrapper extends PureComponent<Props, State> {\n        /**\n         * [constructor]\n         *\n         * @param {*} props\n         * @return {Wrapper}\n         */\n        constructor(props: Props) {\n            super(props);\n            this.state = {\n                isOpen: false,\n            };\n        }\n\n        /**\n         * Hides the modal and call the callback\n         *\n         * @param {Function} callback - function to call\n         * @return {void}\n         */\n        close(callback: Function, data: any) {\n            this.setState({ isOpen: false }, () => callback(data));\n        }\n\n        /**\n         * Callback for clicking\n         *\n         * @param {*} data - any callback data\n         * @return {void}\n         */\n        onClick = (data: any) => {\n            const { onClick = noop }: Props = this.props;\n            this.close(onClick, data);\n        };\n\n        /**\n         * Callback for pressing close\n         *\n         * @param {*} data - any callback data\n         * @return {void}\n         */\n        onClose = (data: any) => {\n            const { onClose = noop }: Props = this.props;\n            this.close(onClose, data);\n        };\n\n        /**\n         * Callback for pressing cancel\n         *\n         * @param {*} data - any callback data\n         * @return {void}\n         */\n        onCancel = (data: any) => {\n            const { onCancel = noop }: Props = this.props;\n            this.close(onCancel, data);\n        };\n\n        /**\n         * Callback for pressing choose\n         *\n         * @param {*} data - any callback data\n         * @return {void}\n         */\n        onChoose = (data: any) => {\n            const { onChoose = noop }: Props = this.props;\n            this.close(onChoose, data);\n        };\n\n        /**\n         * Button click handler\n         *\n         * @return {void}\n         */\n        onButtonClick = () => {\n            this.setState({ isOpen: true });\n        };\n\n        /**\n         * Renders the component\n         *\n         * @return {void}\n         */\n        render() {\n            const { isOpen }: State = this.state;\n            const { modal, ...rest }: Props = this.props;\n            const wrappedProps = omit(rest, ['onCancel', 'onChoose', 'onClose', 'modal']);\n            const {\n                buttonLabel = 'Missing modal.buttonLabel in options',\n                buttonClassName = 'btn btn-primary',\n                modalClassName = 'be-modal-wrapper-content',\n                overlayClassName = 'be-modal-wrapper-overlay',\n            }: ModalOptions = modal;\n\n            switch (kit) {\n                case CLIENT_NAME_CONTENT_PICKER:\n                    wrappedProps.onCancel = this.onCancel;\n                    wrappedProps.onChoose = this.onChoose;\n                    break;\n                case CLIENT_NAME_CONTENT_UPLOADER:\n                    wrappedProps.onClose = this.onClose;\n                    break;\n                default:\n                    throw new Error('Unknown kit type');\n            }\n\n            return (\n                <div>\n                    <button className={buttonClassName} onClick={this.onButtonClick} type=\"button\">\n                        {buttonLabel}\n                    </button>\n                    <Modal\n                        className={modalClassName}\n                        contentLabel={kit}\n                        isOpen={isOpen}\n                        overlayClassName={overlayClassName}\n                    >\n                        <Wrapped {...wrappedProps} />\n                    </Modal>\n                </div>\n            );\n        }\n    };\n\nexport default makePopup;\n"],"mappings":"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","ignoreList":[]}