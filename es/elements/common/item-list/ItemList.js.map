{"version":3,"file":"ItemList.js","names":["React","useIntl","noop","Cell","Column","Row","Table","TableBody","TableHeader","Text","ItemDate","ItemOptions","ItemTypeIcon","getSize","SORT_ASC","SORT_DESC","TYPE_FOLDER","TYPE_WEBLINK","VIEW_MODE_LIST","VIEW_RECENTS","ITEM_ICON_SIZE","ITEM_LIST_COLUMNS","MEDIUM_ITEM_LIST_COLUMNS","SMALL_ITEM_LIST_COLUMNS","messages","ItemList","_ref","canPreview","isMedium","isSmall","isTouch","items","onItemClick","onSortChange","selectionMode","sortBy","sortDirection","view","rest","_objectWithoutProperties","_excluded","formatMessage","defaultColumns","listColumns","map","_ref2","messageId","column","_excluded2","_objectSpread","children","key","id","handleSortChange","sortDescriptor","direction","createElement","listView","className","columns","_ref3","columnProps","_excluded3","item","name","size","type","handleAction","onAction","dimension","as","variant","color","itemSubtitle","date","_extends","viewMode"],"sources":["../../../../src/elements/common/item-list/ItemList.tsx"],"sourcesContent":["import React from 'react';\nimport { useIntl } from 'react-intl';\nimport noop from 'lodash/noop';\nimport type { SelectionMode } from 'react-aria-components';\n\nimport { Cell, Column, Row, Table, TableBody, TableHeader, Text } from '@box/blueprint-web';\n\nimport { ItemDate, ItemOptions, ItemTypeIcon } from '../item';\n\nimport getSize from '../../../utils/size';\n\nimport { SORT_ASC, SORT_DESC, TYPE_FOLDER, TYPE_WEBLINK, VIEW_MODE_LIST, VIEW_RECENTS } from '../../../constants';\nimport { ITEM_ICON_SIZE, ITEM_LIST_COLUMNS, MEDIUM_ITEM_LIST_COLUMNS, SMALL_ITEM_LIST_COLUMNS } from './constants';\n\nimport messages from './messages';\n\nimport type { BoxItem, SortBy, SortDirection, View } from '../../../common/types/core';\nimport type { ItemAction, ItemEventHandlers, ItemEventPermissions } from '../item';\nimport type { ItemListColumn } from './types';\n\nimport './ItemList.scss';\n\nexport interface ItemListProps extends ItemEventHandlers, ItemEventPermissions {\n    isMedium?: boolean;\n    isSmall?: boolean;\n    isTouch?: boolean;\n    itemActions?: ItemAction[];\n    items: BoxItem[];\n    onSortChange?: (sortBy: SortBy, sortDirection: SortDirection) => void;\n    portalElement?: HTMLElement;\n    selectionMode?: SelectionMode;\n    sortBy?: SortBy;\n    sortDirection?: SortDirection;\n    view: View;\n}\n\nconst ItemList = ({\n    canPreview,\n    isMedium,\n    isSmall,\n    isTouch,\n    items,\n    onItemClick = noop,\n    onSortChange = noop,\n    selectionMode,\n    sortBy,\n    sortDirection,\n    view,\n    ...rest\n}: ItemListProps) => {\n    const { formatMessage } = useIntl();\n\n    let defaultColumns: ItemListColumn[] = ITEM_LIST_COLUMNS;\n\n    if (isSmall) {\n        defaultColumns = SMALL_ITEM_LIST_COLUMNS;\n    }\n\n    if (isMedium) {\n        defaultColumns = MEDIUM_ITEM_LIST_COLUMNS;\n    }\n\n    const listColumns = defaultColumns.map(({ messageId, ...column }) => {\n        return { children: formatMessage(messages[messageId]), key: column.id, ...column };\n    });\n\n    // TODO: Refactor ContentExplorer to use SortDirection system from Blueprint\n    const handleSortChange = sortDescriptor => {\n        const { column, direction } = sortDescriptor;\n\n        onSortChange(column, direction === 'ascending' ? SORT_ASC : SORT_DESC);\n    };\n\n    return (\n        <Table\n            aria-label={formatMessage(messages.listView)}\n            className=\"be-ItemList\"\n            sortDescriptor={{\n                column: sortBy,\n                direction: sortDirection === SORT_ASC ? 'ascending' : 'descending',\n            }}\n            onSortChange={handleSortChange}\n            selectionMode={selectionMode}\n        >\n            <TableHeader className=\"be-ItemList-header\" columns={listColumns}>\n                {({ children, ...columnProps }) => <Column {...columnProps}>{children}</Column>}\n            </TableHeader>\n            <TableBody items={items.map(item => ({ key: item.id, ...item }))}>\n                {item => {\n                    const { id, name, size, type } = item;\n\n                    const handleAction = () => {\n                        if (type === TYPE_FOLDER || (!isTouch && (type === TYPE_WEBLINK || canPreview))) {\n                            onItemClick(item);\n                        }\n                    };\n\n                    return (\n                        <Row id={id} className=\"be-ItemList-item\" onAction={handleAction}>\n                            <Cell>\n                                <div className=\"be-ItemList-nameCell\">\n                                    <ItemTypeIcon\n                                        className=\"be-ItemList-itemIcon\"\n                                        dimension={ITEM_ICON_SIZE}\n                                        item={item}\n                                    />\n                                    <div className=\"be-ItemList-itemDetails\">\n                                        <Text as=\"span\" className=\"be-ItemList-itemTitle\" variant=\"bodyDefaultSemibold\">\n                                            {name}\n                                        </Text>\n                                        {isSmall && view !== VIEW_RECENTS ? (\n                                            <Text\n                                                as=\"span\"\n                                                className=\"be-ItemList-itemSubtitle\"\n                                                color=\"textOnLightSecondary\"\n                                            >\n                                                {formatMessage(messages.itemSubtitle, {\n                                                    date: <ItemDate isSmall item={item} view={view} />,\n                                                    size: getSize(size),\n                                                })}\n                                            </Text>\n                                        ) : null}\n                                    </div>\n                                </div>\n                            </Cell>\n                            {isSmall ? null : (\n                                <Cell>\n                                    <Text as=\"span\" color=\"textOnLightSecondary\">\n                                        <ItemDate item={item} view={view} />\n                                    </Text>\n                                </Cell>\n                            )}\n                            {isSmall || isMedium ? null : (\n                                <Cell>\n                                    <Text as=\"span\" color=\"textOnLightSecondary\">\n                                        {getSize(size)}\n                                    </Text>\n                                </Cell>\n                            )}\n                            <ItemOptions canPreview={canPreview} item={item} viewMode={VIEW_MODE_LIST} {...rest} />\n                        </Row>\n                    );\n                }}\n            </TableBody>\n        </Table>\n    );\n};\n\nexport default ItemList;\n"],"mappings":"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","ignoreList":[]}