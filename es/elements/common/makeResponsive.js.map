{"version":3,"file":"makeResponsive.js","names":["React","debounce","Measure","classNames","CLASS_IS_MEDIUM","CLASS_IS_SMALL","CLASS_IS_TOUCH","SIZE_LARGE","SIZE_MEDIUM","SIZE_SMALL","SIZE_VERY_LARGE","CROSS_OVER_WIDTH_SMALL","CROSS_OVER_WIDTH_MEDIUM","CROSS_OVER_WIDTH_LARGE","HAS_TOUCH","window","DocumentTouch","document","makeResponsive","Wrapped","_Class","PureComponent","constructor","props","_defineProperty","bounds","width","setState","size","getSize","el","innerElement","state","innerWidth","render","_this$props","isTouch","className","componentRef","rest","_objectWithoutProperties","_excluded","isLarge","isMedium","isSmall","isVeryLarge","isResponsive","filter","item","length","Error","createElement","_extends","ref","sizeFromState","styleClassName","innerRef","onResize","measureRef","getInnerRef","getInnerElement"],"sources":["../../../src/elements/common/makeResponsive.js"],"sourcesContent":["/**\n * @flow\n * @file HOC to make responsive Box UI Elements\n * @author Box\n */\n\nimport * as React from 'react';\nimport debounce from 'lodash/debounce';\nimport Measure from 'react-measure';\nimport classNames from 'classnames';\nimport {\n    CLASS_IS_MEDIUM,\n    CLASS_IS_SMALL,\n    CLASS_IS_TOUCH,\n    SIZE_LARGE,\n    SIZE_MEDIUM,\n    SIZE_SMALL,\n    SIZE_VERY_LARGE,\n} from '../../constants';\nimport type { Size } from '../../common/types/core';\n\ntype PropsShape = {\n    className: string,\n    componentRef?: Function,\n    isTouch: boolean,\n    size?: Size,\n};\n\ntype State = {\n    size: Size,\n};\n\nconst CROSS_OVER_WIDTH_SMALL = 700;\nconst CROSS_OVER_WIDTH_MEDIUM = 1000;\nconst CROSS_OVER_WIDTH_LARGE = 1500;\nconst HAS_TOUCH = !!('ontouchstart' in window || (window.DocumentTouch && document instanceof window.DocumentTouch));\n\nfunction makeResponsive<Props: PropsShape>(Wrapped: React.ComponentType<any>): React.ComponentType<any> {\n    return class extends React.PureComponent<Props, State> {\n        props: Props;\n\n        state: State;\n\n        innerElement: ?HTMLElement;\n\n        static defaultProps = {\n            className: '',\n            isTouch: HAS_TOUCH,\n        };\n\n        /**\n         * [constructor]\n         *\n         * @param {*} data\n         * @return {void}\n         */\n        constructor(props: Props) {\n            super(props);\n            this.state = {\n                size: props.size || this.getSize(window.innerWidth),\n            };\n        }\n\n        /**\n         * Calculates the new size\n         *\n         * @private\n         * @param {Component} react component\n         * @return {void}\n         */\n        getSize(width: number) {\n            let size = SIZE_VERY_LARGE;\n            if (width <= CROSS_OVER_WIDTH_SMALL) {\n                size = SIZE_SMALL;\n            } else if (width <= CROSS_OVER_WIDTH_MEDIUM) {\n                size = SIZE_MEDIUM;\n            } else if (width <= CROSS_OVER_WIDTH_LARGE) {\n                size = SIZE_LARGE;\n            }\n\n            return size;\n        }\n\n        /**\n         * Resizing function\n         *\n         * @private\n         * @param {Component} react component\n         * @return {void}\n         */\n        onResize = debounce(({ bounds: { width } }: { bounds: ClientRect }) => {\n            this.setState({ size: this.getSize(width) });\n        }, 500);\n\n        /**\n         * Callback function for setting the ref which measureRef is attached to\n         *\n         * @return {void}\n         */\n        innerRef = el => {\n            this.innerElement = el;\n        };\n\n        /**\n         * Gets the ref element which measureRef is attached to\n         *\n         * @return {?HTMLElement} - the HTML element\n         */\n        getInnerElement = () => this.innerElement;\n\n        /**\n         * Renders the Box UI Element\n         *\n         * @private\n         * @inheritdoc\n         * @return {Element}\n         */\n        render() {\n            const { isTouch, size, className, componentRef, ...rest }: Props = this.props;\n\n            let isLarge: boolean = size === SIZE_LARGE;\n            let isMedium: boolean = size === SIZE_MEDIUM;\n            let isSmall: boolean = size === SIZE_SMALL;\n            let isVeryLarge: boolean = size === SIZE_VERY_LARGE;\n            const isResponsive: boolean = !isSmall && !isLarge && !isMedium && !isVeryLarge;\n\n            if ([isSmall, isMedium, isLarge, isVeryLarge].filter(item => item).length > 1) {\n                throw new Error('Box UI Element cannot be small or medium or large or very large at the same time');\n            }\n\n            if (!isResponsive) {\n                return (\n                    <Wrapped\n                        ref={componentRef}\n                        className={className}\n                        isLarge={isLarge}\n                        isMedium={isMedium}\n                        isSmall={isSmall}\n                        isTouch={isTouch}\n                        isVeryLarge={isVeryLarge}\n                        {...rest}\n                    />\n                );\n            }\n\n            const { size: sizeFromState }: State = this.state;\n            isSmall = sizeFromState === SIZE_SMALL;\n            isMedium = sizeFromState === SIZE_MEDIUM;\n            isLarge = sizeFromState === SIZE_LARGE;\n            isVeryLarge = sizeFromState === SIZE_VERY_LARGE;\n            const styleClassName = classNames(\n                {\n                    [CLASS_IS_SMALL]: isSmall,\n                    [CLASS_IS_MEDIUM]: isMedium,\n                    [CLASS_IS_TOUCH]: isTouch,\n                },\n                className,\n            );\n\n            return (\n                <Measure bounds innerRef={this.innerRef} onResize={this.onResize}>\n                    {({ measureRef }) => (\n                        <Wrapped\n                            ref={componentRef}\n                            className={styleClassName}\n                            getInnerRef={this.getInnerElement}\n                            isLarge={isLarge}\n                            isMedium={isMedium}\n                            isSmall={isSmall}\n                            isTouch={isTouch}\n                            isVeryLarge={isVeryLarge}\n                            measureRef={measureRef}\n                            {...rest}\n                        />\n                    )}\n                </Measure>\n            );\n        }\n    };\n}\n\nexport default makeResponsive;\n"],"mappings":"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","ignoreList":[]}