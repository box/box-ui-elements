{"version":3,"file":"AsyncLoad.js","names":["React","AsyncError","retryNumOfTimes","DEFAULT_NUM_TIMES","DEFAULT_INITIAL_DELAY","DEFAULT_BACKOFF_FACTOR","AsyncLoad","errorComponent","fallback","loader","lazyRetry","successCallback","errorCallback","then","catch","LazyComponent","lazy","forwardRef","props","ref","createElement","component","Suspense","_extends"],"sources":["../../../../src/elements/common/async-load/AsyncLoad.js"],"sourcesContent":["// @flow\nimport * as React from 'react';\nimport AsyncError from './AsyncError';\nimport { retryNumOfTimes } from '../../../utils/function';\n\ntype Props = {\n    errorComponent?: React.ComponentType<any>,\n    fallback?: React.Element<any>,\n    loader: () => Promise<any>,\n};\n\nconst DEFAULT_NUM_TIMES = 3;\nconst DEFAULT_INITIAL_DELAY = 500;\nconst DEFAULT_BACKOFF_FACTOR = 2;\n\nconst AsyncLoad = ({ errorComponent, fallback, loader }: Props = {}) => {\n    const lazyRetry = () =>\n        retryNumOfTimes(\n            (successCallback, errorCallback) =>\n                loader()\n                    .then(successCallback)\n                    .catch(errorCallback),\n            DEFAULT_NUM_TIMES,\n            DEFAULT_INITIAL_DELAY,\n            DEFAULT_BACKOFF_FACTOR,\n        );\n    const LazyComponent = React.lazy(() => loader().catch(lazyRetry));\n\n    return React.forwardRef<Object, React.Ref<any>>((props: Object, ref: React.Ref<any>) => (\n        <AsyncError component={errorComponent}>\n            <React.Suspense fallback={fallback || null}>\n                <LazyComponent ref={ref} {...props} />\n            </React.Suspense>\n        </AsyncError>\n    ));\n};\n\nexport default AsyncLoad;\n"],"mappings":";AACA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAC9B,OAAOC,UAAU,MAAM,cAAc;AACrC,SAASC,eAAe,QAAQ,yBAAyB;AAQzD,MAAMC,iBAAiB,GAAG,CAAC;AAC3B,MAAMC,qBAAqB,GAAG,GAAG;AACjC,MAAMC,sBAAsB,GAAG,CAAC;AAEhC,MAAMC,SAAS,GAAGA,CAAC;EAAEC,cAAc;EAAEC,QAAQ;EAAEC;AAAc,CAAC,GAAG,CAAC,CAAC,KAAK;EACpE,MAAMC,SAAS,GAAGA,CAAA,KACdR,eAAe,CACX,CAACS,eAAe,EAAEC,aAAa,KAC3BH,MAAM,CAAC,CAAC,CACHI,IAAI,CAACF,eAAe,CAAC,CACrBG,KAAK,CAACF,aAAa,CAAC,EAC7BT,iBAAiB,EACjBC,qBAAqB,EACrBC,sBACJ,CAAC;EACL,MAAMU,aAAa,gBAAGf,KAAK,CAACgB,IAAI,CAAC,MAAMP,MAAM,CAAC,CAAC,CAACK,KAAK,CAACJ,SAAS,CAAC,CAAC;EAEjE,oBAAOV,KAAK,CAACiB,UAAU,CAAyB,CAACC,KAAa,EAAEC,GAAmB,kBAC/EnB,KAAA,CAAAoB,aAAA,CAACnB,UAAU;IAACoB,SAAS,EAAEd;EAAe,gBAClCP,KAAA,CAAAoB,aAAA,CAACpB,KAAK,CAACsB,QAAQ;IAACd,QAAQ,EAAEA,QAAQ,IAAI;EAAK,gBACvCR,KAAA,CAAAoB,aAAA,CAACL,aAAa,EAAAQ,QAAA;IAACJ,GAAG,EAAEA;EAAI,GAAKD,KAAK,CAAG,CACzB,CACR,CACf,CAAC;AACN,CAAC;AAED,eAAeZ,SAAS","ignoreList":[]}